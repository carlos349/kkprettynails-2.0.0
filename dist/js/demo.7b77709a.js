(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["demo"],{"0407":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-3 pt-5 pt-lg-8 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/users.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Reporte del cierre ("+t._s(t._f("formatDate")(t.closes.createdAt))+")")])]),a("base-button",{staticClass:"float-right mt-6 mr-2",attrs:{size:"sm",disabled:!t.validRoute("caja","editar"),type:"default"},on:{click:function(e){t.modals.modal1=!0}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.8em"},attrs:{type:"form"}}),t._v("\n                    Editar montos manuales\n                ")],1),a("base-button",{staticClass:"float-right mt-6 mr-2",attrs:{size:"sm",type:"warning"},on:{click:t.back}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.8em"},attrs:{type:"rollback"}})],1)],1)])]),a("div",{staticClass:"col-12 mt-3 mx-auto"},[a("div",{staticClass:"row mx-auto text-center"},[a("div",{staticClass:"col-4 mx-auto"},[a("dt",{attrs:{type:"success"}},[t._v("Ingresos manuales")]),t._l(t.closes.manual,(function(e){return a("base-button",{key:e.type,staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v(t._s(e.type))]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":"1em !important"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(e.total)))])],1)}))],2),a("div",{staticClass:"col-4 mx-auto"},[a("dt",{attrs:{type:"default"}},[t._v("Ingresos sistema")]),t._l(t.closes.system,(function(e){return a("base-button",{key:e.type,staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v(t._s(e.type))]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":"1em !important"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(e.total)))])],1)}))],2),a("div",{staticClass:"col-2 mx-auto"},[a("dt",{attrs:{type:"warning"}},[t._v("Diferencia")]),t._l(t.closes.system,(function(e,s){return a("base-button",{key:e.type,staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[a("badge",{staticClass:"text-default",staticStyle:{"font-size":"1em !important"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(parseInt(e.total)-parseInt(t.closes.manual[s].total))))])],1)}))],2)])]),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":""}},[[a("div",{staticClass:"text-center text-muted mb-2",staticStyle:{"margin-top":"-15% !important"}},[a("small",[t._v("Ingresos manuales")])]),t._l(t.closes.manual,(function(e){return["Total"!=e.type?a("div",{key:e.type,staticClass:"text-left text-muted"},[a("small",[t._v(t._s(e.type))])]):t._e(),"Total"!=e.type?a("currency-input",{key:e.type,staticClass:"form-control",attrs:{locale:"de"},on:{keyup:function(e){return t.cashTotal()}},model:{value:e.total,callback:function(a){t.$set(e,"total",a)},expression:"close.total"}}):t._e()]})),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-2",attrs:{type:"default"},on:{click:t.editEntry}},[t._v("Editar")])],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal2,gradient:"success","modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{staticClass:"ni ni-check-bold ni-3x"}),a("h4",{staticClass:"heading mt-4"},[t._v("¡Actualizado!")])])])],1)},n=[],i=(a("6b54"),a("a481"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=(a("41cb"),a("a5e9")),c=a.n(l),d=a("04e1"),u=a.n(d),m=a("12f9"),p=a("c1df"),f=(a("898b"),a("ef34"));p["locale"]("es");var h={mixins:[f["a"]],components:{VueBootstrap4Table:m["a"]},data:function(){return{auth:[],id:localStorage.getItem("reportID"),modals:{modal1:!1,modal2:!1},closes:{},configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}}}},created:function(){this.getClosing(),this.getToken(),$(document).ready((function(){setTimeout((function(){$("input[placeholder='Go to page']").hide()}),200)}))},methods:{getToken:function(){var t=localStorage.userToken,e=u()(t);this.auth=e.access},back:function(){window.history.go(-1)},getClosing:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/sales/getClosing/"+this.id,this.configHeader);case 3:e=t.sent,this.closes=e.data.data,console.log(this.closes),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(t){return p(t).format("DD-MM-YYYY")},cashTotal:function(){for(var t=0,e=0;e<=2;e++){var a=this.closes.manual[e];0==e||1==e?t+=a.total:2==e&&(t-=a.total)}this.closes.manual[3].total=t},editEntry:function(){for(var t=this,e=0,a={"Egreso de caja":"si","Fondo de caja":"si","Total efectivo":"si"},s=0;s<this.closes.manual.length-1;s++){var n=this.closes.manual[s];n.type in a?e=e:e+=n.total}this.closes.manual[this.closes.manual.length-1].total=e,r.a.put(c.a.endpointTarget+"/sales/editclosedmanualamounts/"+this.id,{manual:this.closes.manual},this.configHeader).then((function(e){"ok"==e.data.status&&(t.modals.modal1=!1,t.$swal({icon:"success",title:"Edición exitosa.",showConfirmButton:!1,timer:1500}))}))},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return console.log(!0),!0}}}},g=h,v=a("2877"),b=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=b.exports},"0694":function(t,e,a){},"0a8d":function(t,e,a){"use strict";e.__esModule=!0,e.vueUse=e.registerDirectives=e.registerDirective=e.registerComponents=e.registerComponent=void 0;var s=function(t,e,a){t.component(e,a)};e.registerComponent=s;var n=function(t,e){for(var a in e)s(t,a,e[a])};e.registerComponents=n;var i=function(t,e,a){t.directive(e,a)};e.registerDirective=i;var o=function(t,e){for(var a in e)i(t,a,e[a])};e.registerDirectives=o;var r=function(t){"undefined"!==typeof window&&window.Vue&&window.Vue.use(t)};e.vueUse=r},"159d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/clients.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white"},[t._v("Pedidos")]),a("p",{staticClass:"text-white mt-0 mb-2"},[t._v("Esta es la sección administrativa de tus pedidos, aquí podrás visualizar todos tus pedidos.")]),t.validRoute("clientes","filtrar")?a("base-button",{attrs:{type:"success"},on:{click:function(e){t.modals.modal1=!0}}},[t._v("Crear pedido")]):t._e(),t.validRoute("clientes","filtrar")?a("base-button",{attrs:{type:"default"},on:{click:t.showFilter}},[t._v("Filtrar")]):t._e(),a("base-button",{attrs:{type:"primary"}},[t._v("Pedidos por confirmar: "+t._s(t.rowsPending.length))]),a("base-button",{attrs:{type:"secondary"}},[t._v("Monto total: "),a("span",{staticClass:"text-success"},[t._v("$ "+t._s(t.formatPrice(t.totalPending)))])])],1)])])]),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[t._v("\n                    Aun en construcción\n                ")])],[a("form",{attrs:{role:"form"}},[a("vue-single-select",{attrs:{options:t.clientsNames,placeholder:"Comprador"},model:{value:t.registerClient.recommender,callback:function(e){t.$set(t.registerClient,"recommender",e)},expression:"registerClient.recommender"}}),[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple","default-value":["a1","b2"],placeholder:"Please select"},on:{change:t.handleChange}},t._l(t.services,(function(e){return a("a-select-option",{key:e.nombre},[t._v("\n                            "+t._s(e.nombre)+"\n                            ")])})),1)],a("base-input",{attrs:{alternative:"",type:"text",placeholder:"Contacto","addon-left-icon":"fa fa-address-card","addon-right-icon":"fa fa-asterisk text-danger"},on:{change:function(e){return t.validRegister()}},model:{value:t.registerClient.id,callback:function(e){t.$set(t.registerClient,"id",e)},expression:"registerClient.id"}}),a("base-input",{attrs:{alternative:"",type:"text",placeholder:"Pedido","addon-left-icon":"fa fa-address-card","addon-right-icon":"fas fa-plus text-default"},model:{value:t.registerClient.contactOne,callback:function(e){t.$set(t.registerClient,"contactOne",e)},expression:"registerClient.contactOne"}}),a("base-input",{attrs:{alternative:"",type:"text",placeholder:"Medio de pago","addon-left-icon":"fa fa-address-card","addon-right-icon":"fas fa-plus text-default"},model:{value:t.registerClient.contactTwo,callback:function(e){t.$set(t.registerClient,"contactTwo",e)},expression:"registerClient.contactTwo"}}),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:function(e){return t.registerClients()}}},[t._v("Registrar pedido")])],1)],2)]],2)],1),a("modal",{attrs:{show:t.modals.modal2,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal3,"modal-classes":"modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("h1",{staticClass:"heading mt-5"},[t._v("¿Seguro que desea confirmar este pedido?")]),a("base-button",{staticClass:"my-4",attrs:{type:"success"},on:{click:function(e){return t.confirmar()}}},[t._v("Si")]),a("base-button",{staticClass:"my-4",attrs:{type:"danger"},on:{click:function(e){t.modals.modal3=!1,t.idPedido=""}}},[t._v("No")])],1)]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-cart"}),t._v("\n                    Pedidos por confirmar\n                ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:t.rowsPending,columns:t.columns,classes:t.classes,config:t.config},scopedSlots:t._u([{key:"Administrar",fn:function(e){return[a("b",[a("center",[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Confirmar pedido")])]),t.validRoute("clientes","detalle")&&"Nconfirmado"==e.row.estado?a("base-button",{attrs:{size:"sm",type:"success",icon:"ni ni-check-bold"},on:{click:function(a){t.modals.modal3=!0,t.idPedido=e.row._id,t.identidadPedido=e.row.contacto,t.codePedido=e.row.codigo,t.articuloPedido=e.row.articulo,t.clientePedido=e.row.cliente}}}):t._e()],2)],1)],1)]}},{key:"date",fn:function(e){return[a("b",[t._v("\n                           \n                            "+t._s(t.formatDate(e.row.date))+"\n                                \n                            \n                            \n                        ")])]}},{key:"vencimiento",fn:function(e){return[a("b",[t._v("\n                            \n                            "+t._s(t.formatCaducity(e.row.date))+"\n                          \n                            \n                        ")])]}},{key:"pagination-info",fn:function(e){return[t._v("\n                        Actuales "+t._s(e.currentPageRowsLength)+" | \n                        Registros totales "+t._s(e.originalRowsLength)+"\n                    ")]}},{key:"selected-rows-info",fn:function(e){return[t._v("\n                        Total Number of rows selected : "+t._s(e.selectedItemsCount)+"\n                    ")]}}])})],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-check-bold"}),t._v("\n                    Pedidos confirmados\n                ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:t.rowsConfirmed,columns:t.columnsConfirmed,classes:t.classes,config:t.config},scopedSlots:t._u([{key:"date",fn:function(e){return[a("b",[t._v("\n                            "+t._s(t.formatDate(e.row.date))+"\n                        ")])]}},{key:"dateConfirm",fn:function(e){return[a("b",[t._v("\n                           \n                            "+t._s(t.formatDates(e.row.dateConfirm))+"\n                          \n                            \n                        ")])]}},{key:"pagination-info",fn:function(e){return[t._v("\n                        Actuales "+t._s(e.currentPageRowsLength)+" | \n                        Registros totales "+t._s(e.originalRowsLength)+"\n                    ")]}},{key:"selected-rows-info",fn:function(e){return[t._v("\n                        Total Number of rows selected : "+t._s(e.selectedItemsCount)+"\n                    ")]}}])})],1),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-folder-17"}),t._v("\n                    Pedidos procesados / vencidos\n                ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:t.rowsUsed,columns:t.columnsProccess,classes:t.classes,config:t.config},scopedSlots:t._u([{key:"date",fn:function(e){return[a("b",[t._v("\n                            \n                            "+t._s(t.formatDate(e.row.date))+"\n                                \n                            \n                            \n                        ")])]}},{key:"dateProccess",fn:function(e){return[a("b",["usado"==e.row.estado?a("div",[t._v("\n                                "+t._s(t.formatDates(e.row.dateProccess))+"  \n                            ")]):a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Pedido vencido el "+t._s(t.formatDates(e.row.dateProccess))+"  ")])]),a("base-button",{attrs:{size:"sm",type:"danger"}},[t._v("Vencido")])],2)],1)]}},{key:"pagination-info",fn:function(e){return[t._v("\n                        Actuales "+t._s(e.currentPageRowsLength)+" | \n                        Registros totales "+t._s(e.originalRowsLength)+"\n                    ")]}},{key:"selected-rows-info",fn:function(e){return[t._v("\n                        Total Number of rows selected : "+t._s(e.selectedItemsCount)+"\n                    ")]}}])})],1)],1)],1)],1)},n=[],i=(a("6b54"),a("7f7f"),a("a481"),a("bd86")),o=a("bc3a"),r=a.n(o),l=a("a5e9"),c=a.n(l),d=a("12f9"),u=a("e366"),m=a("04e1"),p=a.n(m),f=a("41cb"),h=a("c1df"),g=(a("898b"),a("ef34"));h["locale"]("es");var v={mixins:[g["a"]],components:{VueBootstrap4Table:d["a"]},data:function(){var t;return{auth:[],idPedido:"",identidadPedido:"",codePedido:"",articuloPedido:"",clientePedido:"",successRegister:!1,clientsNames:[],tipeForm:"",services:"",registerClient:{name:"",id:"",contactOne:"",contactTwo:"",recommender:null,discount:!1,valid:!1,valid2:!1,recommenders:"",lastDate:"",date:"",participation:0},modals:{modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},rowsPending:[],rowsConfirmed:[],rowsUsed:[],totalPending:0,columnsConfirmed:[{label:"Fecha",name:"date",sort:!0,slot_name:"date"},{label:"N° de pedido",name:"nPedido",sort:!0},{label:"Regalador",name:"cliente",sort:!0},{label:"Articulo",name:"articulo",sort:!0},{label:"Medio de pago",name:"tipoPago",sort:!0,slot_name:"vencimiento"},{label:"Total",name:"total",sort:!0},{label:"Fecha de confirmación",name:"dateConfirm",sort:!0,slot_name:"dateConfirm"}],columnsProccess:[{label:"Fecha",name:"date",sort:!0,slot_name:"date"},{label:"N° de pedido",name:"nPedido",sort:!0},{label:"Regalador",name:"cliente",sort:!0},{label:"Articulo",name:"articulo",sort:!0},{label:"Codigo",name:"codigo",sort:!0},{label:"Medio de pago",name:"tipoPago",sort:!0},{label:"Total",name:"total",sort:!0},{label:"Fecha de procesamiento",name:"dateProccess",sort:!0,slot_name:"dateProccess"}],columns:[{label:"Fecha",name:"date",sort:!0,slot_name:"date"},{label:"N° de pedido",name:"nPedido",sort:!0},{label:"Cliente",name:"cliente",sort:!0},{label:"Contacto",name:"contacto",sort:!0},{label:"Articulo",name:"articulo",sort:!0},{label:"Fecha de vencimiento",name:"",sort:!0,slot_name:"vencimiento"},{label:"Total",name:"total",sort:!0},{label:"Administrar",name:"_id",sort:!1,slot_name:"Administrar"}],config:(t={card_title:"Tabla de pedidos",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(i["a"])(t,"rows_selectable",!0),Object(i["a"])(t,"per_page_options",[5,10,20,30,40,50,80,100]),Object(i["a"])(t,"global_search",{placeholder:"Filtre sus pedidos",visibility:!0,case_sensitive:!1}),Object(i["a"])(t,"show_refresh_button",!1),Object(i["a"])(t,"show_reset_button",!1),Object(i["a"])(t,"selected_rows_info",!0),Object(i["a"])(t,"preservePageOnDataChange",!0),Object(i["a"])(t,"pagination_info",!0),t),classes:{table:"table-bordered table-striped"}}},created:function(){this.getOrders(),this.getToken(),this.getServices()},methods:{getToken:function(){var t=localStorage.userToken,e=p()(t);this.auth=e.access},getServices:function(){var t=this;r.a.get(c.a.endpointTarget+"/servicios").then((function(e){t.services=e.data}))},getOrders:function(){var t=this;r.a.get(c.a.endpointTarget+"/pedidos/findPending").then((function(e){t.rowsPending=e.data;for(var a=0;a<e.data.length;a++){var s=e.data[a],n=s.total.replace(".",""),i=n.replace("$ ","");t.totalPending=parseFloat(t.totalPending)+parseFloat(i)}})),r.a.get(c.a.endpointTarget+"/pedidos/findConfirmed").then((function(e){t.rowsConfirmed=e.data})),r.a.get(c.a.endpointTarget+"/pedidos/findUsed").then((function(e){t.rowsUsed=e.data}))},registerClients:function(){var t=this,e=this.registerClient.discount?0:1;r.a.post(c.a.endpointTarget+"/pedidos",{nombre:this.registerClient.name,identidad:this.registerClient.id,recomendador:this.registerClient.recommender,correoCliente:this.registerClient.contactOne,instagramCliente:this.registerClient.contactTwo,ifCheck:e}).then((function(e){"Registrado"==e.data.status?(t.modals={modal2:!0,message:"Se registro el cliente con éxito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},t.initialState(1),t.getClients(),u["a"].$emit("reloadClients","reload")}),1500)):(t.modals={modal2:!0,message:"El cliente ya existe",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500))}))},validRegister:function(){""!=this.registerClient.name&&""!=this.registerClient.id?this.registerClient.valid=!0:this.registerClient.valid=!1},MaysPrimera:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},initialState:function(t){this.registerClient={name:"",id:"",contactOne:"",discount:!1,contactTwo:"",recommender:null,valid:!1},1==t&&(this.modals={modal1:!1,modal2:!1,modal3:!1}),2==t&&(this.tipeForm="Registrar"),3==t&&(this.tipeForm="Editar")},pushData:function(t,e,a,s,n,i,o,r,l,c){this.registerClient={name:t,id:e,contactOne:a,discount:!1,contactTwo:s,recommender:i,valid:!0,valid2:!0,recommenders:o,lastDate:this.formatDate(r),date:this.formatDate(l),participation:n,_id:c}},formatDate:function(t){var e=new Date(t);return e.setDate(e.getDate()+1),h(e).format("DD-MM-YYYY")},formatDates:function(t){var e=new Date(t);return h(e).format("DD-MM-YYYY")},deleteClient:function(t){var e=this;this.$swal({title:"¿Está seguro de borrar el cliente?",text:"No puedes revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.put(c.a.endpointTarget+"/clients/deleteClient/"+t).then((function(t){"ok"==t.data.status&&(e.modals={modal2:!0,message:"Cliente borrado con éxito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},e.getClients(),u["a"].$emit("reloadClients","reload")}),1500))})):(e.modals={modal2:!0,message:"Acción cancelada",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500))}))},clientEdit:function(){var t=this;r.a.put(c.a.endpointTarget+"/clients/"+this.registerClient._id,{nombreClienteEditar:this.registerClient.name,identidadClienteEditar:this.registerClient.id,correoClienteEditar:this.registerClient.contactOne,instagramClienteEditar:this.registerClient.contactTwo}).then((function(e){"Servicio actualizado"==e.data.status?(t.modals={modal2:!0,message:"el cliente editó con éxito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},t.getClients(),t.initialState(1),u["a"].$emit("reloadClients","reload")}),1500)):(t.modals={modal2:!0,message:"El cliente ya existe",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500))}))},showFilter:function(){$(".tableClient .vbt-table-tools").toggle()},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},selectTemplate:function(t){this.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},setTimeout((function(){localStorage.setItem("selectTemplate",t),f["a"].push({path:"Correo"})}),200)},confirmar:function(){var t=this;r.a.put(c.a.endpointTarget+"/pedidos/"+this.idPedido,{nombreClienteEditar:this.registerClient.name,identidadClienteEditar:this.registerClient.id,correoClienteEditar:this.registerClient.contactOne,instagramClienteEditar:this.registerClient.contactTwo}).then((function(e){console.log(e),"Servicio actualizado"==e.data.status?(r.a.post(c.a.endpointTarget+"/pedidos/sendEmailPedido",{to:t.identidadPedido,code:t.codePedido,article:t.articuloPedido,client:t.clientePedido}),t.modals={modal2:!0,message:"Pedido confirmado",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},t.getOrders(),t.initialState(1),u["a"].$emit("reloadClients","reload")}),1500)):(t.modals={modal2:!0,message:"Falla de conexion a internet",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500))}))},formatCaducity:function(t){var e=new Date(t);return e.setDate(e.getDate()+7),h(e).format("DD-MM-YYYY")},formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},b=v,y=(a("ac52"),a("2877")),C=Object(y["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},1611:function(t,e,a){"use strict";e.__esModule=!0,e.requestAF=e.position=e.offset=e.getCS=e.getBCR=e.hasAttr=e.getAttr=e.removeAttr=e.setAttr=e.hasClass=e.removeClass=e.addClass=e.getById=e.contains=e.closest=e.matches=e.select=e.selectAll=e.reflow=e.isDisabled=e.isVisible=e.isElement=e.eventOff=e.eventOn=e.parseEventOptions=e.isPassiveSupported=void 0;var s=a("bb2f"),n=a("24e2"),i=a("4565"),o=!1;if(i.inBrowser)try{var r={get passive(){o=!0}};window.addEventListener("test",r,r),window.removeEventListener("test",r,r)}catch(H){o=!1}var l=function(){return o};e.isPassiveSupported=l;var c=function(t){return o?t||{useCapture:!1}:Boolean((0,n.isObject)(t)?t.useCapture:t)};e.parseEventOptions=c;var d=function(t,e,a,s){t&&t.addEventListener&&t.addEventListener(e,a,c(s))};e.eventOn=d;var u=function(t,e,a,s){t&&t.removeEventListener&&t.removeEventListener(e,a,c(s))};e.eventOff=u;var m=function(t){return Boolean(t&&t.nodeType===Node.ELEMENT_NODE)};e.isElement=m;var p=function(t){if(!m(t)||!C(document.body,t))return!1;var e=E(t);return Boolean(e&&e.height>0&&e.width>0)};e.isVisible=p;var f=function(t){return!m(t)||t.disabled||S(t,"disabled")||Boolean(P(t,"disabled"))};e.isDisabled=f;var h=function(t){return m(t)&&t.offsetHeight};e.reflow=h;var g=function(t,e){return m(e)||(e=document),(0,s.from)(e.querySelectorAll(t))};e.selectAll=g;var v=function(t,e){return m(e)||(e=document),e.querySelector(t)||null};e.select=v;var b=function(t,e){if(!m(t))return!1;var a=Element.prototype,s=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(t){var e=this,a=g(t,e.document||e.ownerDocument),s=a.length;while(--s>=0&&a.item(s)!==e);return s>-1};return s.call(t,e)};e.matches=b;var y=function(t,e){if(!m(e))return null;var a=Element.prototype.closest||function(t){var e=this;if(!C(document.documentElement,e))return null;do{if(b(e,t))return e;e=e.parentElement}while(null!==e);return null},s=a.call(e,t);return s===e?null:s};e.closest=y;var C=function(t,e){return!(!t||"function"!==typeof t.contains)&&t.contains(e)};e.contains=C;var w=function(t){return document.getElementById(/^#/.test(t)?t.slice(1):t)||null};e.getById=w;var x=function(t,e){e&&m(t)&&t.classList&&t.classList.add(e)};e.addClass=x;var _=function(t,e){e&&m(t)&&t.classList&&t.classList.remove(e)};e.removeClass=_;var S=function(t,e){return!!(e&&m(t)&&t.classList)&&t.classList.contains(e)};e.hasClass=S;var k=function(t,e,a){e&&m(t)&&t.setAttribute(e,a)};e.setAttr=k;var A=function(t,e){e&&m(t)&&t.removeAttribute(e)};e.removeAttr=A;var P=function(t,e){return e&&m(t)?t.getAttribute(e):null};e.getAttr=P;var D=function(t,e){return e&&m(t)?t.hasAttribute(e):null};e.hasAttr=D;var E=function(t){return m(t)?t.getBoundingClientRect():null};e.getBCR=E;var T=function(t){return m(t)?window.getComputedStyle(t):{}};e.getCS=T;var I=function(t){var e={top:0,left:0};if(!m(t)||0===t.getClientRects().length)return e;var a=E(t);if(a){var s=t.ownerDocument.defaultView;e.top=a.top+s.pageYOffset,e.left=a.left+s.pageXOffset}return e};e.offset=I;var B=function(t){var e={top:0,left:0};if(!m(t))return e;var a={top:0,left:0},s=T(t);if("fixed"===s.position)e=E(t)||e;else{e=I(t);var n=t.ownerDocument,i=t.offsetParent||n.documentElement;while(i&&(i===n.body||i===n.documentElement)&&"static"===T(i).position)i=i.parentNode;if(i&&i!==t&&i.nodeType===Node.ELEMENT_NODE){a=I(i);var o=T(i);a.top+=parseFloat(o.borderTopWidth),a.left+=parseFloat(o.borderLeftWidth)}}return{top:e.top-a.top-parseFloat(s.marginTop),left:e.left-a.left-parseFloat(s.marginLeft)}};e.position=B;var R=function(t){var e=i.inBrowser?window:{},a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){return setTimeout(t,16)};return a(t)};e.requestAF=R},"16ae":function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;var s=a("f0bd"),n=a("f8bb"),i=a("bb2f"),o=a("1611");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),s.forEach((function(e){c(t,e,a[e])}))}return t}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function m(t,e,a){return e&&u(t.prototype,e),a&&u(t,a),t}var p="tooltip",f="bs-tooltip",h=new RegExp("\\b".concat(f,"\\S+"),"g"),g=150,v="bv::modal::hidden",b=".modal-content",y={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOPLEFT:"top",TOPRIGHT:"top",RIGHTTOP:"right",RIGHTBOTTOM:"right",BOTTOMLEFT:"bottom",BOTTOMRIGHT:"bottom",LEFTTOP:"left",LEFTBOTTOM:"left"},C={AUTO:0,TOPLEFT:-1,TOP:0,TOPRIGHT:1,RIGHTTOP:-1,RIGHT:0,RIGHTBOTTOM:1,BOTTOMLEFT:-1,BOTTOM:0,BOTTOMRIGHT:1,LEFTTOP:-1,LEFT:0,LEFTBOTTOM:1},w={SHOW:"show",OUT:"out"},x={FADE:"fade",SHOW:"show"},_={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},S={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,placement:"top",offset:0,arrowPadding:6,container:!1,fallbackPlacement:"flip",callbacks:{},boundary:"scrollParent"},k={WebkitTransition:["webkitTransitionEnd"],MozTransition:["transitionend"],OTransition:["otransitionend","oTransitionEnd"],transition:["transitionend"]},A=1,P=function(t){return"__BV_".concat(t,"_").concat(A++,"__")},D=function(){function t(e,a,s){d(this,t),this.$isEnabled=!0,this.$fadeTimeout=null,this.$hoverTimeout=null,this.$visibleInterval=null,this.$hoverState="",this.$activeTrigger={},this.$popper=null,this.$element=e,this.$tip=null,this.$id=P(this.constructor.NAME),this.$root=s||null,this.$routeWatcher=null,this.$forceHide=this.forceHide.bind(this),this.$doHide=this.doHide.bind(this),this.$doShow=this.doShow.bind(this),this.$doDisable=this.doDisable.bind(this),this.$doEnable=this.doEnable.bind(this),this.updateConfig(a)}return m(t,[{key:"updateConfig",value:function(t){var e=l({},this.constructor.Default,t);t.delay&&"number"===typeof t.delay&&(e.delay={show:t.delay,hide:t.delay}),t.title&&"number"===typeof t.title&&(e.title=t.title.toString()),t.content&&"number"===typeof t.content&&(e.content=t.content.toString()),this.fixTitle(),this.$config=e,this.unListen(),this.listen()}},{key:"destroy",value:function(){this.unListen(),this.setWhileOpenListeners(!1),clearTimeout(this.$hoverTimeout),this.$hoverTimeout=null,clearTimeout(this.$fadeTimeout),this.$fadeTimeout=null,this.$popper&&this.$popper.destroy(),this.$popper=null,this.$tip&&this.$tip.parentElement&&this.$tip.parentElement.removeChild(this.$tip),this.$tip=null,this.$id=null,this.$isEnabled=null,this.$root=null,this.$element=null,this.$config=null,this.$hoverState=null,this.$activeTrigger=null,this.$forceHide=null,this.$doHide=null,this.$doShow=null,this.$doDisable=null,this.$doEnable=null}},{key:"enable",value:function(){var t=new n.default("enabled",{cancelable:!1,target:this.$element,relatedTarget:null});this.$isEnabled=!0,this.emitEvent(t)}},{key:"disable",value:function(){var t=new n.default("disabled",{cancelable:!1,target:this.$element,relatedTarget:null});this.$isEnabled=!1,this.emitEvent(t)}},{key:"toggle",value:function(t){this.$isEnabled&&(t?(this.$activeTrigger.click=!this.$activeTrigger.click,this.isWithActiveTrigger()?this.enter(null):this.leave(null)):(0,o.hasClass)(this.getTipElement(),x.SHOW)?this.leave(null):this.enter(null))}},{key:"show",value:function(){var t=this;if(document.body.contains(this.$element)&&(0,o.isVisible)(this.$element)){var e=this.getTipElement();if(this.fixTitle(),this.setContent(e),this.isWithContent(e)){(0,o.setAttr)(e,"id",this.$id),this.addAriaDescribedby(),this.$config.animation?(0,o.addClass)(e,x.FADE):(0,o.removeClass)(e,x.FADE);var a=this.getPlacement(),i=this.constructor.getAttachment(a);this.addAttachmentClass(i);var r=new n.default("show",{cancelable:!0,target:this.$element,relatedTarget:e});if(this.emitEvent(r),r.defaultPrevented)this.$tip=null;else{var l=this.getContainer();document.body.contains(e)||l.appendChild(e),this.removePopper(),this.$popper=new s.default(this.$element,e,this.getPopperConfig(a,e));var c=function(){t.$config.animation&&t.fixTransition(e);var a=t.$hoverState;t.$hoverState=null,a===w.OUT&&t.leave(null);var s=new n.default("shown",{cancelable:!1,target:t.$element,relatedTarget:e});t.emitEvent(s)};this.setWhileOpenListeners(!0),(0,o.addClass)(e,x.SHOW),this.transitionOnce(e,c)}}else this.$tip=null}}},{key:"visibleCheck",value:function(t){var e=this;clearInterval(this.$visibleInterval),this.$visibleInterval=null,t&&(this.$visibleInterval=setInterval((function(){var t=e.getTipElement();t&&!(0,o.isVisible)(e.$element)&&(0,o.hasClass)(t,x.SHOW)&&e.forceHide()}),100))}},{key:"setWhileOpenListeners",value:function(t){this.setModalListener(t),this.visibleCheck(t),this.setRouteWatcher(t),this.setOnTouchStartListener(t),t&&/(focus|blur)/.test(this.$config.trigger)?(0,o.eventOn)(this.$tip,"focusout",this):(0,o.eventOff)(this.$tip,"focusout",this)}},{key:"forceHide",value:function(){this.$tip&&(0,o.hasClass)(this.$tip,x.SHOW)&&(this.setWhileOpenListeners(!1),clearTimeout(this.$hoverTimeout),this.$hoverTimeout=null,this.$hoverState="",this.hide(null,!0))}},{key:"hide",value:function(t,e){var a=this,s=this.$tip;if(s){var i=new n.default("hide",{cancelable:!e,target:this.$element,relatedTarget:s});if(this.emitEvent(i),!i.defaultPrevented){var r=function(){a.$hoverState!==w.SHOW&&s.parentNode&&(s.parentNode.removeChild(s),a.removeAriaDescribedby(),a.removePopper(),a.$tip=null),t&&t();var e=new n.default("hidden",{cancelable:!1,target:a.$element,relatedTarget:null});a.emitEvent(e)};this.setWhileOpenListeners(!1),e&&(0,o.removeClass)(s,x.FADE),(0,o.removeClass)(s,x.SHOW),this.$activeTrigger.click=!1,this.$activeTrigger.focus=!1,this.$activeTrigger.hover=!1,this.transitionOnce(s,r),this.$hoverState=""}}}},{key:"emitEvent",value:function(t){var e=t.type;this.$root&&this.$root.$emit&&this.$root.$emit("bv::".concat(this.constructor.NAME,"::").concat(e),t);var a=this.$config.callbacks||{};"function"===typeof a[e]&&a[e](t)}},{key:"getContainer",value:function(){var t=this.$config.container,e=document.body;return!1===t?(0,o.closest)(b,this.$element)||e:(0,o.select)(t,e)||e}},{key:"addAriaDescribedby",value:function(){var t=(0,o.getAttr)(this.$element,"aria-describedby")||"";t=t.split(/\s+/).concat(this.$id).join(" ").trim(),(0,o.setAttr)(this.$element,"aria-describedby",t)}},{key:"removeAriaDescribedby",value:function(){var t=this,e=(0,o.getAttr)(this.$element,"aria-describedby")||"";e=e.split(/\s+/).filter((function(e){return e!==t.$id})).join(" ").trim(),e?(0,o.setAttr)(this.$element,"aria-describedby",e):(0,o.removeAttr)(this.$element,"aria-describedby")}},{key:"removePopper",value:function(){this.$popper&&this.$popper.destroy(),this.$popper=null}},{key:"transitionOnce",value:function(t,e){var a=this,s=this.getTransitionEndEvents(),n=!1;clearTimeout(this.$fadeTimeout),this.$fadeTimeout=null;var i=function i(){n||(n=!0,clearTimeout(a.$fadeTimeout),a.$fadeTimeout=null,s.forEach((function(e){(0,o.eventOff)(t,e,i)})),e())};(0,o.hasClass)(t,x.FADE)?(s.forEach((function(e){(0,o.eventOn)(t,e,i)})),this.$fadeTimeout=setTimeout(i,g)):i()}},{key:"getTransitionEndEvents",value:function(){for(var t in k)if(void 0!==this.$element.style[t])return k[t];return[]}},{key:"update",value:function(){null!==this.$popper&&this.$popper.scheduleUpdate()}},{key:"isWithContent",value:function(t){return t=t||this.$tip,!!t&&Boolean(((0,o.select)(_.TOOLTIP_INNER,t)||{}).innerHTML)}},{key:"addAttachmentClass",value:function(t){(0,o.addClass)(this.getTipElement(),"".concat(f,"-").concat(t))}},{key:"getTipElement",value:function(){return this.$tip||(this.$tip=this.compileTemplate(this.$config.template)||this.compileTemplate(this.constructor.Default.template)),this.$tip.tabIndex=-1,this.$tip}},{key:"compileTemplate",value:function(t){if(!t||"string"!==typeof t)return null;var e=document.createElement("div");e.innerHTML=t.trim();var a=e.firstElementChild?e.removeChild(e.firstElementChild):null;return e=null,a}},{key:"setContent",value:function(t){this.setElementContent((0,o.select)(_.TOOLTIP_INNER,t),this.getTitle()),(0,o.removeClass)(t,x.FADE),(0,o.removeClass)(t,x.SHOW)}},{key:"setElementContent",value:function(t,e){if(t){var a=this.$config.html;"object"===r(e)&&e.nodeType?a?e.parentElement!==t&&(t.innerHTML="",t.appendChild(e)):t.innerText=e.innerText:t[a?"innerHTML":"innerText"]=e}}},{key:"getTitle",value:function(){var t=this.$config.title||"";return"function"===typeof t&&(t=t(this.$element)),"object"===r(t)&&t.nodeType&&!t.innerHTML.trim()&&(t=""),"string"===typeof t&&(t=t.trim()),t||(t=(0,o.getAttr)(this.$element,"title")||(0,o.getAttr)(this.$element,"data-original-title")||"",t=t.trim()),t}},{key:"listen",value:function(){var t=this,e=this.$config.trigger.trim().split(/\s+/),a=this.$element;this.setRootListener(!0),e.forEach((function(e){"click"===e?(0,o.eventOn)(a,"click",t):"focus"===e?((0,o.eventOn)(a,"focusin",t),(0,o.eventOn)(a,"focusout",t)):"blur"===e?(0,o.eventOn)(a,"focusout",t):"hover"===e&&((0,o.eventOn)(a,"mouseenter",t),(0,o.eventOn)(a,"mouseleave",t))}),this)}},{key:"unListen",value:function(){var t=this,e=["click","focusin","focusout","mouseenter","mouseleave"];e.forEach((function(e){(0,o.eventOff)(t.$element,e,t)}),this),this.setRootListener(!1)}},{key:"handleEvent",value:function(t){if(!(0,o.isDisabled)(this.$element)&&this.$isEnabled){var e=t.type,a=t.target,s=t.relatedTarget,n=this.$element,i=this.$tip;if("click"===e)this.toggle(t);else if("focusin"===e||"mouseenter"===e)this.enter(t);else if("focusout"===e){if(i&&n&&n.contains(a)&&i.contains(s))return;if(i&&n&&i.contains(a)&&n.contains(s))return;if(i&&i.contains(a)&&i.contains(s))return;if(n&&n.contains(a)&&n.contains(s))return;this.leave(t)}else"mouseleave"===e&&this.leave(t)}}},{key:"setRouteWatcher",value:function(t){var e=this;t?(this.setRouteWatcher(!1),this.$root&&Boolean(this.$root.$route)&&(this.$routeWatcher=this.$root.$watch("$route",(function(t,a){t!==a&&e.forceHide()})))):this.$routeWatcher&&(this.$routeWatcher(),this.$routeWatcher=null)}},{key:"setModalListener",value:function(t){var e=(0,o.closest)(b,this.$element);e&&this.$root&&this.$root[t?"$on":"$off"](v,this.$forceHide)}},{key:"setRootListener",value:function(t){this.$root&&(this.$root[t?"$on":"$off"]("bv::hide::".concat(this.constructor.NAME),this.$doHide),this.$root[t?"$on":"$off"]("bv::show::".concat(this.constructor.NAME),this.$doShow),this.$root[t?"$on":"$off"]("bv::disable::".concat(this.constructor.NAME),this.$doDisable),this.$root[t?"$on":"$off"]("bv::enable::".concat(this.constructor.NAME),this.$doEnable))}},{key:"doHide",value:function(t){t?this.$element&&this.$element.id&&this.$element.id===t&&this.hide():this.forceHide()}},{key:"doShow",value:function(t){t?t&&this.$element&&this.$element.id&&this.$element.id===t&&this.show():this.show()}},{key:"doDisable",value:function(t){t?this.$element&&this.$element.id&&this.$element.id===t&&this.disable():this.disable()}},{key:"doEnable",value:function(t){t?this.$element&&this.$element.id&&this.$element.id===t&&this.enable():this.enable()}},{key:"setOnTouchStartListener",value:function(t){var e=this;"ontouchstart"in document.documentElement&&(0,i.from)(document.body.children).forEach((function(a){t?(0,o.eventOn)(a,"mouseover",e._noop):(0,o.eventOff)(a,"mouseover",e._noop)}))}},{key:"_noop",value:function(){}},{key:"fixTitle",value:function(){var t=this.$element,e=r((0,o.getAttr)(t,"data-original-title"));((0,o.getAttr)(t,"title")||"string"!==e)&&((0,o.setAttr)(t,"data-original-title",(0,o.getAttr)(t,"title")||""),(0,o.setAttr)(t,"title",""))}},{key:"enter",value:function(t){var e=this;t&&(this.$activeTrigger["focusin"===t.type?"focus":"hover"]=!0),(0,o.hasClass)(this.getTipElement(),x.SHOW)||this.$hoverState===w.SHOW?this.$hoverState=w.SHOW:(clearTimeout(this.$hoverTimeout),this.$hoverState=w.SHOW,this.$config.delay&&this.$config.delay.show?this.$hoverTimeout=setTimeout((function(){e.$hoverState===w.SHOW&&e.show()}),this.$config.delay.show):this.show())}},{key:"leave",value:function(t){var e=this;t&&(this.$activeTrigger["focusout"===t.type?"focus":"hover"]=!1,"focusout"===t.type&&/blur/.test(this.$config.trigger)&&(this.$activeTrigger.click=!1,this.$activeTrigger.hover=!1)),this.isWithActiveTrigger()||(clearTimeout(this.$hoverTimeout),this.$hoverState=w.OUT,this.$config.delay&&this.$config.delay.hide?this.$hoverTimeout=setTimeout((function(){e.$hoverState===w.OUT&&e.hide()}),this.$config.delay.hide):this.hide())}},{key:"getPopperConfig",value:function(t,e){var a=this;return{placement:this.constructor.getAttachment(t),modifiers:{offset:{offset:this.getOffset(t,e)},flip:{behavior:this.$config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{padding:this.$config.boundaryPadding,boundariesElement:this.$config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&a.handlePopperPlacementChange(t)},onUpdate:function(t){a.handlePopperPlacementChange(t)}}}},{key:"getOffset",value:function(t,e){if(!this.$config.offset){var a=(0,o.select)(_.ARROW,e),s=parseFloat((0,o.getCS)(a).width)+parseFloat(this.$config.arrowPadding);switch(C[t.toUpperCase()]){case 1:return"+50%p - ".concat(s,"px");case-1:return"-50%p + ".concat(s,"px");default:return 0}}return this.$config.offset}},{key:"getPlacement",value:function(){var t=this.$config.placement;return"function"===typeof t?t.call(this,this.$tip,this.$element):t}},{key:"isWithActiveTrigger",value:function(){for(var t in this.$activeTrigger)if(this.$activeTrigger[t])return!0;return!1}},{key:"cleanTipClass",value:function(){var t=this.getTipElement(),e=t.className.match(h);null!==e&&e.length>0&&e.forEach((function(e){(0,o.removeClass)(t,e)}))}},{key:"handlePopperPlacementChange",value:function(t){this.cleanTipClass(),this.addAttachmentClass(this.constructor.getAttachment(t.placement))}},{key:"fixTransition",value:function(t){var e=this.$config.animation||!1;null===(0,o.getAttr)(t,"x-placement")&&((0,o.removeClass)(t,x.FADE),this.$config.animation=!1,this.hide(),this.show(),this.$config.animation=e)}}],[{key:"getAttachment",value:function(t){return y[t.toUpperCase()]}},{key:"Default",get:function(){return S}},{key:"NAME",get:function(){return p}}]),t}(),E=D;e.default=E},"172e":function(t,e,a){"use strict";a.r(e);var s,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-3 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/branch.png)","background-size":"cover","background-position":"center 25%"}},[a("span",{staticClass:"mask opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Sucursales")]),a("p",{staticClass:"text-white hideText"},[t._v("Esta es la sección administrativa de tus sucursales, aquí podrás registrar, editar y visualizar todas tus sucursales.")])]),a("base-button",{staticClass:"float-right mt-7",staticStyle:{"font-size":"1em"},attrs:{disabled:!t.validRoute("sucursales","registrar"),size:"sm",type:"success"},on:{click:function(e){t.modals.modal1=!0}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v(" Registrar")],1)],1)])]),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Sin sucursales registrados.")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.progress,"data-source":t.branches,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                    Buscar\n                ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                    resetear\n                ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                        "+t._s(e)+"\n                    ")]]}},{key:"actionButtons",fn:function(e,s){return[t.validRoute("sucursales","configurar")?a("router-link",{attrs:{to:{path:"/configuration",query:{id:s._id}}}},[a("base-button",{staticClass:"text-center",attrs:{disabled:!t.validRoute("sucursales","configurar"),icon:"ni ni-settings-gear-65",size:"sm",type:"default"}},[t._v("\n                            Configurar\n                        ")])],1):a("base-button",{staticClass:"text-center",attrs:{disabled:"",icon:"ni ni-settings-gear-65",size:"sm",type:"default"}},[t._v("\n                        Configurar\n                    ")]),a("a-tooltip",{staticClass:"ml-2",attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Activar / Desactivar")])]),t.validRoute("servicios","activaciones")?[s.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success"},on:{click:function(e){return t.changeStatus(s._id,!0)}}}):a("base-button",{staticClass:"text-center",attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.changeStatus(s._id,!1)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"close"}})],1)]:[s.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success",disabled:""}}):a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-remove",size:"sm",type:"danger",disabled:""}})]],2)]}},{key:"format-date",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatDate")(a.createdAt))+"\n            ")]}}])})],1),a("modal",{attrs:{show:t.modals.modal1,"modal-classes":"modal-dialog-centered modal-xl pt-lg-2"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[a("h3",[t._v("Registre una sucursal")])]),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"stepsBar"},[a("a-steps",[a("a-step",{attrs:{status:t.status.branch,title:"Sucursal"}},[a("a-icon",{staticStyle:{"vertical-align":"3px"},attrs:{slot:"icon",type:"process"==t.status.branch?"loading":"shop"},slot:"icon"})],1),a("a-step",{attrs:{status:t.status.date,title:"Agenda"}},[a("a-icon",{staticStyle:{"vertical-align":"3px"},attrs:{slot:"icon",type:"process"==t.status.date?"loading":"calendar"},slot:"icon"})],1),a("a-step",{attrs:{status:t.status.sale,title:"Ventas"}},[a("a-icon",{staticStyle:{"vertical-align":"3px"},attrs:{slot:"icon",type:"process"==t.status.sale?"loading":"credit-card"},slot:"icon"})],1)],1)],1),a("div",{staticClass:"stepsBox mt-1"},["branch"==t.process?a("div",{staticClass:"branch mt-1"},[a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                    Nombre de la sucursal\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Nombre de la sucursal","addon-left-icon":"ni ni-shop",valid:t.modelStart.businessName.length>=4},model:{value:t.modelStart.businessName,callback:function(e){t.$set(t.modelStart,"businessName",e)},expression:"modelStart.businessName"}})],1),a("div",{staticClass:"col-md-6 col-sm-12 row pr-0"},[a("label",{staticClass:"ml-4 mb-0 pb-0 w-100",staticStyle:{"margin-bottom":"-20px !important"},attrs:{for:"credentials"}},[t._v("\n                                    Número de contacto\n                                ")]),a("div",{staticClass:"col-12 pl-3 pr-0 mt-0 pt-0"},[a("VuePhoneNumberInput",{attrs:{"default-country-code":t.modelStart.businessPhone.countryCode,translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un país",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.modelStart.businessPhone=e}},model:{value:t.modelStart.businessPhone.formatNational,callback:function(e){t.$set(t.modelStart.businessPhone,"formatNational",e)},expression:"modelStart.businessPhone.formatNational"}})],1)]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("a-tooltip",[a("template",{slot:"title"},[t._v("\n                                        Debe ser un correo valido\n                                    ")]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.05em"},attrs:{type:"question-circle"}})],2),a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                    Correo\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Correo de la sucursal","addon-left-icon":"ni ni-email-83",valid:t.verifyEmailVar},on:{keyup:function(e){return t.verifyEmail()}},model:{value:t.modelStart.email,callback:function(e){t.$set(t.modelStart,"email",e)},expression:"modelStart.email"}})],1),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                    Logo de la sucursal\n                                ")]),a("br"),a("input",{ref:"file",staticClass:"form-control input-group-alternative",attrs:{type:"file",id:"fileProfile",placeholder:"seleccione logo"},on:{change:function(e){return t.handleFileUpload()}}})]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"location"}},[t._v("\n                                    Dirección del local\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Dirección","addon-left-icon":"fa fa-location-arrow",valid:t.modelStart.businessLocation.length>=10},model:{value:t.modelStart.businessLocation,callback:function(e){t.$set(t.modelStart,"businessLocation",e)},expression:"modelStart.businessLocation"}})],1),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"bussiness"}},[t._v("\n                                    Tipo de negocio\n                                ")]),a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%",height:"43px"},attrs:{"show-search":"",placeholder:"Seleccionar negocio","option-filter-prop":"children",size:"large","filter-option":t.filterOption},on:{change:t.handleChange},model:{value:t.modelStart.businessType,callback:function(e){t.$set(t.modelStart,"businessType",e)},expression:"modelStart.businessType"}},[a("a-select-option",{attrs:{value:"nails"}},[t._v("\n                                        Spa de uñas\n                                    ")]),a("a-select-option",{attrs:{value:"barber"}},[t._v("\n                                        Barberia\n                                    ")]),a("a-select-option",{attrs:{value:"stylish"}},[t._v("\n                                        Peluquería\n                                    ")])],1)],1)]),a("base-button",{staticClass:"float-right mt-2",attrs:{outline:"",type:"default"},on:{click:function(e){return t.nextStep("branch")}}},[t._v("\n                            Siguiente\n                        ")])],1):"date"==t.process?a("div",{staticClass:"data"},[a("h1",{staticClass:"text-uppercase text-center"},[t._v("\n                            Horario\n                        ")]),a("hr",{staticClass:"w-50"}),a("h3",{staticClass:"text-weigth-bold text-center"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Seleccione los días y horarios de apertura y cierre de su negocio.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Configura tu horario\n                        ")],1),a("div",{staticClass:"row pl-8 pr-4"},[a("div",{staticClass:"col-2"},[a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.monday,size:"sm"},on:{click:function(e){return t.salectDay("monday")}}},[t._v("\n                                    Lunes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.tuesday,size:"sm"},on:{click:function(e){return t.salectDay("tuesday")}}},[t._v("\n                                    Martes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.wednesday,size:"sm"},on:{click:function(e){return t.salectDay("wednesday")}}},[t._v("\n                                    Miércoles\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.thursday,size:"sm"},on:{click:function(e){return t.salectDay("thursday")}}},[t._v("\n                                    Jueves\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.friday,size:"sm"},on:{click:function(e){return t.salectDay("friday")}}},[t._v("\n                                    Viernes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.saturday,size:"sm"},on:{click:function(e){return t.salectDay("saturday")}}},[t._v("\n                                    Sábado\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.sunday,size:"sm"},on:{click:function(e){return t.salectDay("sunday")}}},[t._v("\n                                    Domingo\n                                ")])],1),a("div",{staticClass:"col-10"},[a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[1].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[1].start,callback:function(e){t.$set(t.modelStart.blockHour[1],"start",e)},expression:"modelStart.blockHour[1].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[1].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[1].end,callback:function(e){t.$set(t.modelStart.blockHour[1],"end",e)},expression:"modelStart.blockHour[1].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[2].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[2].start,callback:function(e){t.$set(t.modelStart.blockHour[2],"start",e)},expression:"modelStart.blockHour[2].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[2].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[2].end,callback:function(e){t.$set(t.modelStart.blockHour[2],"end",e)},expression:"modelStart.blockHour[2].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[3].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[3].start,callback:function(e){t.$set(t.modelStart.blockHour[3],"start",e)},expression:"modelStart.blockHour[3].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[3].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[3].end,callback:function(e){t.$set(t.modelStart.blockHour[3],"end",e)},expression:"modelStart.blockHour[3].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[4].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[4].start,callback:function(e){t.$set(t.modelStart.blockHour[4],"start",e)},expression:"modelStart.blockHour[4].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[4].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[4].end,callback:function(e){t.$set(t.modelStart.blockHour[4],"end",e)},expression:"modelStart.blockHour[4].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[5].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[5].start,callback:function(e){t.$set(t.modelStart.blockHour[5],"start",e)},expression:"modelStart.blockHour[5].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[5].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[5].end,callback:function(e){t.$set(t.modelStart.blockHour[5],"end",e)},expression:"modelStart.blockHour[5].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[6].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[6].start,callback:function(e){t.$set(t.modelStart.blockHour[6],"start",e)},expression:"modelStart.blockHour[6].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[6].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[6].end,callback:function(e){t.$set(t.modelStart.blockHour[6],"end",e)},expression:"modelStart.blockHour[6].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[0].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[0].start,callback:function(e){t.$set(t.modelStart.blockHour[0],"start",e)},expression:"modelStart.blockHour[0].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[0].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[0].end,callback:function(e){t.$set(t.modelStart.blockHour[0],"end",e)},expression:"modelStart.blockHour[0].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1)],1)]),a("base-button",{staticClass:"float-left mt-2",attrs:{outline:"",type:"default"},on:{click:function(e){return t.prevStep("date")}}},[t._v("\n                            Anterior\n                        ")]),a("base-button",{staticClass:"float-right mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.nextStep("date")}}},[t._v("\n                            Siguiente\n                        ")])],1):"sale"==t.process?a("div",{staticClass:"data"},[a("h1",{staticClass:"text-uppercase text-center"},[t._v("\n                            Tipos de pago\n                        ")]),a("hr",{staticClass:"w-50"}),a("h3",{staticClass:"text-weigth-bold text-center"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Seleccione los días y horarios de apertura y cierre de su negocio.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Crea tus tipos de pago\n                        ")],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("label",{attrs:{for:"currency"}},[t._v("\n                                    Escriba su tipo de pago\n                                ")]),a("div",{staticClass:"row pr-2"},[a("div",{staticClass:"col-10 pr-0"},[a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Tipo de pago","addon-left-icon":"fa fa-plus"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.insertTypePay(e)}},model:{value:t.typePay,callback:function(e){t.typePay=e},expression:"typePay"}})],1),a("div",{staticClass:"col-2"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Ingresar método de pago.")])]),a("base-button",{staticClass:"p-2 px-3 mt-1",attrs:{outline:"",type:"default"},on:{click:t.insertTypePay}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"plus"}})],1)],2)],1)]),a("label",{staticClass:"mt-4",attrs:{for:"currency"}},[t._v("\n                                    Seleccione su moneda local\n                                ")]),a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%",height:"43px"},attrs:{"default-value":"CLP",size:"large"},on:{change:t.selectCurrency}},[a("a-select-option",{attrs:{value:"USD"}},[t._v("\n                                        USD\n                                    ")]),a("a-select-option",{attrs:{value:"EUR"}},[t._v("\n                                        EUR\n                                    ")]),a("a-select-option",{attrs:{value:"CLP"}},[t._v("\n                                        CLP\n                                    ")]),a("a-select-option",{attrs:{value:"COP"}},[t._v("\n                                        COP\n                                    ")]),a("a-select-option",{attrs:{value:"ARG"}},[t._v("\n                                        ARG\n                                    ")]),a("a-select-option",{attrs:{value:"VES"}},[t._v("\n                                        VES\n                                    ")])],1)],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("p",[t._v("No se han agregado metodos de pago")])],1)]},proxy:!0}])},[a("div",{staticClass:"col-md-8 mt-4",staticStyle:{overflow:"hidden","overflow-y":"scroll","max-height":"200px"}},[a("a-list",{attrs:{size:"small",bordered:"","data-source":t.modelStart.typesPay},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{},[t._v("\n                                            "+t._s(e)+" \n                                            "),"Efectivo"!=e?a("base-button",{staticClass:"float-right",staticStyle:{"margin-top":"-3px"},attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){return t.removeTypePay(s)}}},[a("i",{staticClass:"fa fa-times"})]):t._e()],1)}}])})],1)])],1),a("base-button",{staticClass:"float-left mt-2",attrs:{outline:"",type:"default"},on:{click:function(e){return t.prevStep("sale")}}},[t._v("\n                            Anterior\n                        ")]),a("base-button",{staticClass:"float-right mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.finishProcess()}}},[t._v("\n                            Finalizar\n                        ")])],1):t._e()])]],2)],1)],1)},i=[],o=(a("ac4d"),a("8a81"),a("7514"),a("28a5"),a("a481"),a("ac6a"),a("96cf"),a("3b8d")),r=(a("7f7f"),a("6b54"),a("6762"),a("2fdb"),a("bd86")),l=a("bc3a"),c=a.n(l),d=(a("41cb"),a("a5e9")),u=a.n(d),m=a("04e1"),p=a.n(m),f=a("7bec"),h=a.n(f),g=(a("4413"),a("e366")),v=a("ef34"),b=a("bb36"),y={mixins:[v["a"],b["a"]],components:{VuePhoneNumberInput:h.a},data:function(){var t,e=this;return{configHeader:{headers:{"x-database-connect":u.a.database,"x-access-token":localStorage.userToken}},phoneData:{isValid:!1},modals:{modal1:!1},status:{branch:"process",date:"wait",sale:"wait"},process:"branch",typePay:"",modelStart:(t={email:"",password:"",first_name:"",last_name:"",branch:""},Object(r["a"])(t,"email",""),Object(r["a"])(t,"businessName",""),Object(r["a"])(t,"businessPhoneCode","+56"),Object(r["a"])(t,"businessPhone",{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""}),Object(r["a"])(t,"businessType","Seleccione"),Object(r["a"])(t,"businessLocation",""),Object(r["a"])(t,"blockHour",[{day:0,start:"10:00",end:"20:00",status:!1,time:0},{day:1,start:"10:00",end:"20:00",status:!1,time:0},{day:2,start:"10:00",end:"20:00",status:!1,time:0},{day:3,start:"10:00",end:"20:00",status:!1,time:0},{day:4,start:"10:00",end:"20:00",status:!1,time:0},{day:5,start:"10:00",end:"20:00",status:!1,time:0},{day:6,start:"10:00",end:"20:00",status:!1,time:0}]),Object(r["a"])(t,"currency","CLP"),Object(r["a"])(t,"typesPay",["Efectivo"]),t),fromArray:["6:00","6:30","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00"],toArray:["12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00"],verifyEmailVar:!1,progress:!1,days:{monday:"danger",tuesday:"danger",wednesday:"danger",thursday:"danger",friday:"danger",saturday:"danger",sunday:"danger"},searchText:"",searchInput:null,searchedColumn:"",branch:"",branchName:"",branches:[],columns:[{title:"Nombre",dataIndex:"name",key:"name",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}},{title:"Fecha",dataIndex:"createdAt",key:"createdAt",ellipsis:!0,scopedSlots:{customRender:"format-date"}},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"actionButtons"},ellipsis:!0}],file:"",activeBranchs:0}},created:function(){this.getToken(),this.getBranch()},methods:(s={getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.getBranches()},getToken:function(){var t=localStorage.userToken;if(t.length>0){var e=p()(t);this.auth=e.access}},dataEdit:function(t){console.log(t)},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},getBranches:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.activeBranchs=0,t.prev=1,t.next=4,c.a.get(u.a.endpointTarget+"/branches",this.configHeader);case 4:e=t.sent,"ok"==e.data.status&&(this.branches=e.data.data,this.branches.forEach((function(t){t.active&&a.activeBranchs++}))),console.log(this.activeBranchs),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},removeTypePay:function(t){this.modelStart.typesPay.splice(t,1)},handleChange:function(t){this.modelStart.businessType=t},salectDay:function(t){"monday"==t?(this.modelStart.blockHour[1].status="success"!=this.days.monday,this.days.monday="success"==this.days.monday?"danger":"success"):"tuesday"==t?(this.modelStart.blockHour[2].status="success"!=this.days.tuesday,this.days.tuesday="success"==this.days.tuesday?"danger":"success"):"wednesday"==t?(this.modelStart.blockHour[3].status="success"!=this.days.wednesday,this.days.wednesday="success"==this.days.wednesday?"danger":"success"):"thursday"==t?(this.modelStart.blockHour[4].status="success"!=this.days.thursday,this.days.thursday="success"==this.days.thursday?"danger":"success"):"friday"==t?(this.modelStart.blockHour[5].status="success"!=this.days.friday,this.days.friday="success"==this.days.friday?"danger":"success"):"saturday"==t?(this.modelStart.blockHour[6].status="success"!=this.days.saturday,this.days.saturday="success"==this.days.saturday?"danger":"success"):"sunday"==t&&(this.modelStart.blockHour[0].status="success"!=this.days.sunday,this.days.sunday="success"==this.days.sunday?"danger":"success")},formatPhone:function(){var t=this.modelStart.businessPhone.replace(/[^\d]/g,"");9==t.length&&(t=t.replace(/(\d{1})(\d{4})/,"$1-$2-")),this.modelStart.businessPhone=t},verifyEmail:function(){this.modelStart.email.split("@")[1]&&this.modelStart.email.split("@")[1].split(".")[0]?this.verifyEmailVar=!0:this.verifyEmailVar=!1,console.log(this.verifyEmailVar)},nextStep:function(t){if("branch"==t)this.modelStart.businessName.length>=4&&this.modelStart.businessPhone.isValid&&this.modelStart.businessLocation.length>=10&&"Seleccione"!=this.modelStart.businessType&&this.verifyEmailVar?(this.status.branch="finish",this.status.date="process",this.process="date"):this.verifyEmailVar?0==this.modelStart.businessPhone.isValid?this.$swal({icon:"error",title:"Debe escribir un número de teléfono valido",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Ningún campo puede quedar en rojo",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"El correo es invalido",showConfirmButton:!1,timer:1500});else if("date"==t){var e=this.modelStart.blockHour.find((function(t){return 1==t.status}));console.log(e),void 0!=e?(this.status.date="finish",this.status.sale="process",this.process="sale"):this.$swal({icon:"error",title:"Debe seleccionar mínimo un día.",showConfirmButton:!1,timer:1500})}else"sale"==t?this.modelStart.typesPay.length>0?(this.status.sale="finish",this.status.final="process",this.process="final"):this.$swal({icon:"error",title:"Debe crear mínimo un tipo de pago.",showConfirmButton:!1,timer:1500}):"final"==t&&(this.status.branch="finish")},changeStatus:function(t,e){var a=this;this.activeBranchs<=1&&e?this.$swal({icon:"error",title:"Debe haber al menos una sucursal activa",text:"La sucursal que intentas desactivar en la unica activa restante",showConfirmButton:!0}):c.a.put(u.a.endpointTarget+"/branches/changeActive/"+t,{id:t},this.configHeader).then((function(t){a.getBranch(),g["a"].$emit("newBranch",status)})).catch((function(t){a.$swal({icon:"error",title:"Problemas tecnicos",showConfirmButton:!1,timer:1500})}))},prevStep:function(t){"date"==t?(this.status.branch="process",this.status.date="wait",this.process="branch"):"sale"==t?(this.status.date="process",this.status.sale="wait",this.process="date"):"final"==t&&(this.status.sale="process",this.status.final="wait",this.process="sale")},handleFileUpload:function(){this.file=this.$refs.file.files[0]},insertTypePay:function(){var t=this;if(this.modelStart.typesPay.length<8)if(this.typePay.length>4){var e=this.modelStart.typesPay.find((function(e){return e==t.typePay}));void 0==e?(this.modelStart.typesPay.push(this.typePay),this.typePay=""):this.$swal({icon:"error",title:"Tipo de pago duplicado.",showConfirmButton:!1,timer:1500})}else this.typePay.length<=4?this.$swal({icon:"error",title:"El método de pago debe estar compuesto por mas de 4 caracteres",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Debe llenar el tipo de pago",showConfirmButton:!1,timer:1500});else this.$swal({icon:"error",title:"No puede ingresar mas de 8 métodos de pago.",showConfirmButton:!1,timer:1500})}},Object(r["a"])(s,"removeTypePay",(function(t){this.modelStart.typesPay.splice(t,1)})),Object(r["a"])(s,"selectCurrency",(function(t){this.currency=t})),Object(r["a"])(s,"validEmail",(function(){var t=this.modelStart.email.split("@");return t.length>1&&(console.log(t[1].includes(".")),t[1].includes("."))})),Object(r["a"])(s,"calculatedHour",(function(){var t=!0,e=!1,a=void 0;try{for(var s,n=this.modelStart.blockHour[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var i,o,r,l=s.value;l.status&&(i=60*parseInt(l.end.split(":")[0]-parseInt(l.start.split(":")[0])),o=parseInt(l.start.split(":")[1])-parseInt(l.end.split(":")[1]),r=i+o,l.time=r)}}catch(c){e=!0,a=c}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}})),Object(r["a"])(s,"createFormData",(function(t){var e=new FormData;return e.append("image",this.file),e})),Object(r["a"])(s,"finishProcess",function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.calculatedHour(),!(this.modelStart.typesPay.length>1)){t.next=46;break}return t.prev=2,t.next=5,c.a.post(u.a.endpointTarget+"/branches",{branch:this.modelStart.businessName},this.configHeader);case 5:if(e=t.sent,"ok"!=e.data.status){t.next=38;break}return t.prev=7,a=new FormData,a.append("image",this.file),s={headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken,"x-database-connect":u.a.database}},t.prev=11,t.next=14,c.a.post(u.a.endpointTarget+"/configurations/uploadLogo",a,s);case 14:if(n=t.sent,"ok"!=n.data.status){t.next=22;break}return t.next=18,c.a.post(u.a.endpointTarget+"/configurations",{branch:e.data.data._id,blockHour:this.modelStart.blockHour,businessName:this.modelStart.businessName,businessPhone:this.modelStart.businessPhone,businessType:this.modelStart.businessType,businessLocation:this.modelStart.businessLocation,route:u.a.url,email:this.modelStart.email,typesPay:this.modelStart.typesPay,currency:this.modelStart.currency,file:n.data.file},this.configHeader);case 18:i=t.sent,"ok"==i.data.status&&(this.$swal({type:"success",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:1500}),this.getBranches(),this.modals.modal1=!1,g["a"].$emit("newBranch",status)),t.next=26;break;case 22:return t.next=24,c.a.post(u.a.endpointTarget+"/configurations",{branch:e.data.data._id,blockHour:this.modelStart.blockHour,businessName:this.modelStart.businessName,businessPhone:this.modelStart.businessPhone,businessType:this.modelStart.businessType,businessLocation:this.modelStart.businessLocation,email:this.modelStart.email,typesPay:this.modelStart.typesPay,currency:this.modelStart.currency,file:""},this.configHeader);case 24:o=t.sent,"ok"==o.data.status&&(this.$swal({type:"success",icon:"success",title:"Registro de la sucursal, exitoso.",showConfirmButton:!1,timer:1500}),this.getBranches(),this.modals.modal1=!1,g["a"].$emit("newBranch",status));case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](11),console.log(t.t0);case 31:t.next=36;break;case 33:t.prev=33,t.t1=t["catch"](7),console.log(t.t1);case 36:t.next=39;break;case 38:this.$swal({type:"error",icon:"error",title:"Sucursal ya existente",showConfirmButton:!1,timer:1500});case 39:t.next=44;break;case 41:t.prev=41,t.t2=t["catch"](2),console.log(t.t2);case 44:t.next=47;break;case 46:this.$swal({type:"error",icon:"error",title:"Registre al menos dos tipos de pago.",showConfirmButton:!1,timer:1500});case 47:case"end":return t.stop()}}),t,this,[[2,41],[7,33],[11,28]])})));function e(){return t.apply(this,arguments)}return e}()),s),mounted:function(){var t=this;g["a"].$on("changeBranch",(function(e){t.getBranch()}))},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},C=y,w=a("2877"),x=Object(w["a"])(C,n,i,!1,null,null,null);e["default"]=x.exports},"17d3":function(t,e,a){},"1d37":function(t,e,a){},"1e9c":function(t,e,a){},"1e9e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAACORJREFUeJzt3dlPEwsYhvEXaEvpIgiK2AOEJQE1KiaaqBgTY4wxavTGxL/QS+MSUXBJjHG50HirmHhQKEoptKVQoYUy54JADgKf2A6U5fndOQzDB/o4SztDmeM4jgCsqrzUAwBbGYEABs/vC2ayOf07NFKKWYCSqq0Jq2Hf3mXLVgQyl59XOjO9aUMBW0WVv3LFMg6xAAOBAAYCAQwEAhhWnKSvJVBVqZZI/UbOAmyKeDKteGJiXeuuOxBPRYX2hAIFDwVsFX9zlZZDLMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGDwuLmxgWhMXk/FiuX1dTUaHU+5+aWwi/l8XuVys6t+LDc7p7amBte+lquB+Lwe/XOgbtWPNTbsc/NLAasajo27ur2iA5l3HPUPRBUOVClSX6foyJgbcwEFaWzYp+jImCYz0zrc3lT09lzZg9SEgzq4v1bDsfEduaf4NZNVIjVZ6jFcVbMnpFDAX+oxXLf4b/DHaMKV7RUVyL9DI6r0edWwf6+iI2NyXBlp65meySnq8q671Dwez44MpKKiXJOZaVWHA/oxmtB0Nqe2pgaVFbi9ogKp9Hl1sL5WsbHkjtxz/C4crFJ1KFDqMYqSzkwrPfWr1GNsmIZ9eyVJP0YTitTX6kc8ITmOVFZYIq6epO904WDVtv+PIBob39GBuI1AtjDHcfTr1y/Nzs7K4/EoEAiovJyXrjYTP+0tampqSnfu3FEsFlMgEFA6nVZPT4/S6XSpR9tVCGSLevnypW7duqW2tjb5fD5FIhFdv35dL168kOPs1MshW09Rgaz1oiCKFwwG5fcvv8pUVlamjo4OxePxEk21/UT216qswBN0qchA3LrWjOVyuZwqKytX/Vg4HFYmk9nkibavH/FEUXtcDrG2gKGhIQ0ODi792efzaWJiYtV1h4eH1djYuFmj7XoEUmKfP3/WwMCABgYG9O3bt6XlnZ2d+vjx47J1v3//rlAoJK/Xu9lj7lpc5i2hT58+6ePHj6qvr5fX69WbN2+Uz+fV3t6utrY2DQ4O6tmzZ2pqWnhPUTAY1LFjx0o89e5CICXS39+vfD6v27dvK5PJKJvN6sKFC3r37p3y+bw6OjrU3Nys5ubmVT8/Go3K6/XqwIEDmzz57sIh1gZ6//695ubmViz/+vWrZmZmdPToUXk8HlVXV6u+vl6SdPbsWY2NjenLly9rbre/v18jIyOamJhQLBbbsPnBHmTDvHr1Si0tLert7dWVK1fk8Sz8qL9+/apMJqOurq41P7e7u1tv375VKpVSXd3yS+mjo6OamppSeXm54vG4stmsuru7lwKDuwhkAzx//lzxeFypVEo1NTV69eqVzp8/r+HhYWUyGR0/fvyP2+ju7tbg4KBmZ5ffOdfa2qqGhoU75pLJpKqrq/X9+3f9/PlTBw8e3JDvZzcjEJf19fXp2LFjikQiS8vm5ub08OFDRSIRnTlzZt3bam5u1vv373XixIlVr1zt3bvwztXW1talQzIicRfnIC7q6+tTV1fXsjikhXsvrl69qsHBQc3MzKx7e0+fPlVtba0ePHiwYk/yu46ODiWTSUWj0YJmx+oIxCU9PT3q6upaOvz5nd/v140bN3T//v11RfLw4UMdOnRIk5OTunz5su7du6dcLmd+zpEjR5RKpTQ0NFTQ94CVigokHKxya45traenRydPnlwzjkWLkdy9e1fZbHbN9Xp7e9XR0aG3b9/K5/Pp9evXCoVCevLkyapXxf7v6NGjSiQSy1503M32BAMF3ywlFXkOMpmZVnAH3ra5Xo7jqLe3d11xLAoEArp586Z6e3tXvBlRkmZnZ3X48GG1t7fr0KFDkqSmpib5/X7l83k9fvxY165dU0XFyscrLerq6tKHDx8kSS0tLQV8ZzvHxFSmqFuLOUkvkOM4evTokU6fPv3Xl1hDoZBu3ry57vXD4bAkyev16tKlS+rp6dH169fNm6dOnTqlDx8+LL0yv1uVFXw3+gLOQQpUaBzFCgQCunjxovr6+v74LtVTp05pdHSUFxOLwB6kQOfOnZMkJRKlecv/6dOnlUwm/7heZ2enqqo4VywUgRSotra21CNgPYo7wiKQv5Gbndv2TwTJrvFM252q2HOQogKZn5/Xz9GEQgG/oiNjykxn1dn6T1EDbWVjybTGkjw0YSsbjo3LcRxFDtQpGhtf8yHX61VUII0N+zTvOEsPjnP7wcFbRZXfp8Yddv/9Tnyq4qLFR4+68XfmyiFWajKjfH5edTV7eHj1NpFKTymVnir1GK77/8OrI/XFnycWHUh5WZkOty3c8bZTH16N7cPtf4OunqTn5+dX3YPwC3Tgpj/9Ah03uRpI88H9a36MPQu2I15JBwwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAbPelfM5mYVHRnbyFmATZHOTK973b8LJDZe0EDAdsUhFmAgEMBAIICBQADDipN0T0W59gSrSjELUFJVft+KZWWO4zglmAXYFjjEAgwEAhj+AzKcWb7aS+qAAAACE2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLycgeDp4bXB0az0nSW1hZ2U6OkV4aWZUb29sIDEwLjgwJz4KPHJkZjpSREYgeG1sbnM6cmRmPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjJz4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgPHBkZjpBdXRob3I+Q2FybG9zIENhcGFjaG88L3BkZjpBdXRob3I+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnhtcD0naHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyc+CiAgPHhtcDpDcmVhdG9yVG9vbD5DYW52YTwveG1wOkNyZWF0b3JUb29sPgogPC9yZGY6RGVzY3JpcHRpb24+CjwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9J3InPz5DtCnxAAAAAElFTkSuQmCC"},"241e5":function(t,e,a){"use strict";var s=a("df7b"),n=a.n(s);n.a},"24e2":function(t,e,a){"use strict";function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),s.forEach((function(e){n(t,e,a[e])}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}e.__esModule=!0,e.readonlyDescriptor=e.omit=e.isPlainObject=e.isObject=e.is=e.isFrozen=e.create=e.getPrototypeOf=e.getOwnPropertySymbols=e.getOwnPropertyDescriptor=e.freeze=e.defineProperty=e.defineProperties=e.keys=e.getOwnPropertyNames=e.assign=void 0,"function"!==typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a}),Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e});var o=Object.assign;e.assign=o;var r=Object.getOwnPropertyNames;e.getOwnPropertyNames=r;var l=Object.keys;e.keys=l;var c=Object.defineProperties;e.defineProperties=c;var d=Object.defineProperty;e.defineProperty=d;var u=Object.freeze;e.freeze=u;var m=Object.getOwnPropertyDescriptor;e.getOwnPropertyDescriptor=m;var p=Object.getOwnPropertySymbols;e.getOwnPropertySymbols=p;var f=Object.getPrototypeOf;e.getPrototypeOf=f;var h=Object.create;e.create=h;var g=Object.isFrozen;e.isFrozen=g;var v=Object.is;e.is=v;var b=function(t){return null!==t&&"object"===i(t)};e.isObject=b;var y=function(t){return"[object Object]"===Object.prototype.toString.call(t)};e.isPlainObject=y;var C=function(t,e){return Object.keys(t).filter((function(t){return-1===e.indexOf(t)})).reduce((function(e,a){return s({},e,n({},a,t[a]))}),{})};e.omit=C;var w=function(){return{enumerable:!0,configurable:!1,writable:!1}};e.readonlyDescriptor=w},2992:function(t,e,a){},"2c25":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/store.png)","background-size":"cover","background-position":"center 70%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Bodega")]),a("p",{staticClass:"text-white"},[t._v("Total STOCK - "+t._s(t._f("formatPrice")(t.totalStock)))])]),a("base-button",{staticClass:"float-right mt-7 mr-0",attrs:{disabled:!t.validRoute("bodega","cierre_bodega"),size:"sm",type:"warning"},on:{click:function(e){t.modals.modal4=!0}}},[a("i",{staticClass:"fa fa-archive mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"}}),t._v("\n                  Cerrar bodega\n              ")]),a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{disabled:!t.validRoute("bodega","registrar_proveedores"),size:"sm",type:"primary"},on:{click:function(e){t.modals.modal3=!0,t.providerSup.typeProvider="Registrar",t.initialState(2)}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"shopping-cart"}}),t._v("\n                  Proveedores\n              ")],1),a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{disabled:!t.validRoute("bodega","gestion_sucursales"),size:"sm",type:"success"},on:{click:function(e){t.modalAdminProduct.modal1=!0,t.selectLoad(),t.productForBranch=""}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"shop"}}),t._v("\n                  Sucursales\n              ")],1),a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{disabled:!t.validRoute("bodega","registrar_producto"),size:"sm",type:"success"},on:{click:function(e){t.modals.modal1=!0,t.validForm=1,t.initialState(3)}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                  Registrar\n              ")],1)],1)])]),a("tabs",{staticClass:"flex-column flex-md-row inventory inventoryTabs",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{staticClass:"p-2",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"}),t._v("\n                  Tabla de productos\n              ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún producto registrado")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.productState,"data-source":t.products,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                  Buscar\n                              ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                  Restablecer\n                              ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"total",fn:function(e,s){return[parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume)<s.alertTotal?a("span",{staticClass:"text-danger"},[t._v("\n                                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                                  "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Bajo en stock")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em","font-size":"1.1em"},attrs:{type:"exclamation-circle"}})],2)],1):a("span",[t._v("\n                                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                                ")])]}},{key:"price",fn:function(e){return[t._v("\n                                  "+t._s(t.formatPrice(e))+"\n                              ")]}},{key:"actions",fn:function(e,s){return[a("b",[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Anexar productos")])]),a("base-button",{attrs:{disabled:!t.validRoute("bodega","anexar_productos"),title:"Compras",size:"sm",type:"success",icon:"fa fa-plus"},on:{click:function(e){t.modals.modal1=!0,t.validForm=3,t.dataProduct.entry="",t.dataProduct.measure=s.measure,t.dataProduct.product=s.product,t.initialState(1,s._id)}}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Editar producto")])]),a("base-button",{attrs:{disabled:!t.validRoute("bodega","editar_producto"),title:"Editar producto",size:"sm",type:"default",icon:"fa fa-edit"},on:{click:function(e){return t.pushDataProduct(s.product,s.measure,s.price,s.alertTotal,s._id)}}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Eliminar")])]),a("base-button",{attrs:{disabled:!t.validRoute("bodega","eliminar_producto"),title:"Eliminar",size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(e){return t.deleteItem(s._id)}}})],2)],1)]}}])})],1)],1)]],2),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title",id:"provedorBtn"},slot:"title"},[a("i",{staticClass:"fa fa-user-tie"}),t._v("\n                  Tabla de provedores\n              ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún provedor registrado")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsProviders,loading:t.productState,"data-source":t.providerTable,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                  Buscar\n                              ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                  Restablecer\n                              ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"actions",fn:function(e,s){return[a("b",[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Editar")])]),a("base-button",{attrs:{disabled:!t.validRoute("bodega","editar_proveedor"),size:"sm",type:"default",icon:"fas fa-edit"},on:{click:function(e){t.modals.modal3=!0,t.providerSup.typeProvider="Editar",t.pushDataProvider(s.name,s.document,s.contact,s.contactPlus,s.location,s._id)}}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Eliminar")])]),a("base-button",{attrs:{disabled:!t.validRoute("bodega","eliminar_proveedor"),size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(e){return t.deleteProvider(s._id)}}})],2)],1)]}}])})],1)],1)]],2),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-calendar-grid-58"}),t._v("\n                Historial\n              ")]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-money-check-alt"}),t._v("\n                              Historial de compras y abastecimientos\n                          ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v(t._s(t.messageHistory))])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistory,loading:t.productState,"data-source":t.dataHistory,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                            Buscar\n                                        ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                            Restablecer\n                                        ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"date",fn:function(e){return[t._v("\n                                            "+t._s(t.formatDate(e))+"\n                                        ")]}},{key:"price",fn:function(e){return[t._v("\n                                            "+t._s(t.formatPrice(e))+"\n                                        ")]}},{key:"priceTotal",fn:function(e,s){return[a("span","Abastecimiento"==e||"Devolución"==e||"Descartamiento"==e?[t._v("No aplica")]:[t._v(t._s(t.formatPrice(e*s.entry)))])]}}])})],1)],1)]],2),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-file-contract"}),t._v("\n                              Historial de cierres\n                          ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v(t._s(t.messageHistory))])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistoryClosed,loading:t.productState,"data-source":t.dataHistoryClosed,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                            Buscar\n                                        ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                            Restablecer\n                                        ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"date",fn:function(e){return[t._v("\n                                            "+t._s(t.formatDate(e))+"\n                                        ")]}},{key:"user",fn:function(e){return[t._v("\n                                            "+t._s(e.email)+"\n                                        ")]}},{key:"report",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Ver informe")])]),a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(e){t.modals.modal5=!0,t.validForm=2,t.dataHistoryClosedReport=s.products,t.dateReport=s.createdAt}}})],2)]}}])})],1)],1)]],2)],1)],1)],1)],1)],1),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[void 0,[3!=t.validForm?a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[t._v("Datos del producto")])]):a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[t._v("Anexa mas productos a "+t._s(t.dataProduct.product))])]),a("form",{attrs:{role:"form"}},[3==t.validForm?a("div",{staticClass:"row"},[a("div",{staticClass:"col-7"},[a("base-input",{attrs:{alternative:"",placeholder:"Cantidad","addon-left-icon":"fa fa-box-open"},model:{value:t.dataProduct.entry,callback:function(e){t.$set(t.dataProduct,"entry",e)},expression:"dataProduct.entry"}})],1),a("div",{staticClass:"col-5 mt-2"},[t._v("\n                      "+t._s(t.dataProduct.measure)+"\n                    ")])]):t._e(),3==t.validForm?a("base-input",{attrs:{"addon-left-icon":"ni ni-calendar-grid-58"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.focus,n=e.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{config:t.configDatePicker,placeholder:"Seleccione una fecha de compra"},on:{"on-open":s,"on-close":n},model:{value:t.dateAdd,callback:function(e){t.dateAdd=e},expression:"dateAdd"}})}}],null,!1,752621718)}):t._e(),3!=t.validForm?a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"fa fa-edit"},model:{value:t.dataProduct.product,callback:function(e){t.$set(t.dataProduct,"product",e)},expression:"dataProduct.product"}}):t._e(),3!=t.validForm?a("select",{directives:[{name:"model",rawName:"v-model",value:t.dataProduct.measure,expression:"dataProduct.measure"}],staticClass:"form-control mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.dataProduct,"measure",e.target.multiple?a:a[0])}}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:""}},[t._v("Seleccione el tipo de medida")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Gramo(s)"}},[t._v("Gramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Kilogramo(s)"}},[t._v("Kilogramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Litro(s)"}},[t._v("Litro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Mililitro(s)"}},[t._v("Mililitro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Unidad"}},[t._v("Unidad")])]):t._e(),1==t.validForm?a("base-input",{attrs:{alternative:"",placeholder:"Numero para alerta","addon-left-icon":"fa fa-bell"},on:{keyup:function(e){return t.verifyDecimal()}},model:{value:t.dataProduct.alertTotal,callback:function(e){t.$set(t.dataProduct,"alertTotal",e)},expression:"dataProduct.alertTotal"}}):t._e(),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("Introduzca gasto total")])]),1!=t.validForm?a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de",placeholder:"Gasto total","addon-left-icon":"ni ni-money-coins"},model:{value:t.dataProduct.price,callback:function(e){t.$set(t.dataProduct,"price",e)},expression:"dataProduct.price"}}):t._e()],2),3==t.validForm?a("base-button",{staticClass:"mb-2",attrs:{icon:"fa fa-plus",size:"sm",type:"success"},on:{click:function(e){t.modals.modal3=!0,t.providerSup.typeProvider="Registrar",t.initialState(2)}}},[t._v("Registrar provedor")]):t._e(),3==t.validForm?a("a-select",{staticClass:"input-group-alternative w-100 mb-4 mt-2",attrs:{"default-value":"Seleccione un provedor",size:"large"}},t._l(t.providers,(function(e){return a("a-select-option",{key:e,attrs:{value:e},on:{click:function(a){return t.selectProviderForProduct(e)}}},[t._v("\n                          "+t._s(e)+"\n                      ")])})),1):t._e(),a("div",{staticClass:"text-center"},[1==t.validForm?a("base-button",{attrs:{disabled:""==t.dataProduct.product||""==t.dataProduct.measure||""==t.dataProduct.alertTotal,type:"default"},on:{click:function(e){return t.addProduct()}}},[t._v("Registrar")]):t._e(),2==t.validForm?a("base-button",{attrs:{type:"default"},on:{click:function(e){return t.updateProducts()}}},[t._v("Editar")]):t._e(),3==t.validForm?a("base-button",{attrs:{disabled:""==t.dataProduct.entry||null==t.dataProduct.price||""==t.dateAdd||""==t.dataProduct.price||0==t.dataProduct.price||""==t.provider.name,type:"success"},on:{click:function(e){return t.addMore(t.dataProduct.id)}}},[t._v("Agregar")]):t._e()],1)],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal6,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal6",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-center mb-4",staticStyle:{"margin-top":"-30%"}},[t._v("\n                  Editar producto\n              ")]),a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"fa fa-edit"},model:{value:t.dataProduct.product,callback:function(e){t.$set(t.dataProduct,"product",e)},expression:"dataProduct.product"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.dataProduct.measure,expression:"dataProduct.measure"}],staticClass:"form-control mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.dataProduct,"measure",e.target.multiple?a:a[0])}}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:""}},[t._v("Seleccione el tipo de medida")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Gramo(s)"}},[t._v("Gramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Kilogramo(s)"}},[t._v("Kilogramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Litro(s)"}},[t._v("Litro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Mililitro(s)"}},[t._v("Mililitro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Unidad"}},[t._v("Unidad")])]),a("base-input",{attrs:{alternative:"",placeholder:"Numero para alerta","addon-left-icon":"fa fa-bell"},on:{keyup:function(e){return t.verifyDecimal()}},model:{value:t.dataProduct.alertTotal,callback:function(e){t.$set(t.dataProduct,"alertTotal",e)},expression:"dataProduct.alertTotal"}})],1)],a("div",{staticClass:"text-center"},[a("base-button",{attrs:{disabled:""==t.dataProduct.product||""==t.dataProduct.measure||""==t.dataProduct.alertTotal,type:"default"},on:{click:function(e){return t.editProduct()}}},[t._v("Editar")])],1)],2)],1),a("modal",{attrs:{show:t.modals.modal3,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[t._v("Datos del provedor")])]),a("form",{attrs:{role:"form"}},[a("base-input",{attrs:{alternative:"",placeholder:"Nombre de la empresa","addon-left-icon":"fa fa-user-tie","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validProviders()}},model:{value:t.provider.name,callback:function(e){t.$set(t.provider,"name",e)},expression:"provider.name"}}),a("base-input",{attrs:{alternative:"",placeholder:"Datos de identificación","addon-left-icon":"fa fa-key","addon-right-icon":"fas fa-plus text-default"},on:{keyup:function(e){return t.formatRut(t.provider.document)}},model:{value:t.provider.document,callback:function(e){t.$set(t.provider,"document",e)},expression:"provider.document"}}),a("VuePhoneNumberInput",{staticClass:"mb-4",attrs:{"default-phoner-number":t.provider.contact.nationalNumber,"default-country-code":t.provider.contact.countryCode,translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un país",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.provider.contact=e}},model:{value:t.provider.contact.formatNational,callback:function(e){t.$set(t.provider.contact,"formatNational",e)},expression:"provider.contact.formatNational"}}),a("base-input",{attrs:{alternative:"",placeholder:"Correo","addon-left-icon":"fa fa-address-book","addon-right-icon":"fas fa-plus text-default"},model:{value:t.provider.contactPlus,callback:function(e){t.$set(t.provider,"contactPlus",e)},expression:"provider.contactPlus"}}),a("base-input",{attrs:{alternative:"",placeholder:"Dirección de la empresa","addon-left-icon":"fas fa-route","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validProviders()}},model:{value:t.provider.location,callback:function(e){t.$set(t.provider,"location",e)},expression:"provider.location"}})],1)],a("div",{staticClass:"text-center"},[a("base-button",{attrs:{disabled:t.providerSup.validProvider,type:"default"},on:{click:function(e){return t.providerFunction()}}},[t._v(t._s(t.providerSup.typeProvider))])],1)],2)],1),a("modal",{attrs:{show:t.modals.modal4,"modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal4",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Cierre de bodega")]),a("vue-custom-scrollbar",{staticStyle:{height:"30vh",overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}},[a("div",{staticClass:"row p-2 m-2"},[a("div",{staticClass:"col-6"},[t._v("\n          Nombre del producto\n        ")]),a("div",{staticClass:"col-6 text-left"},[t._v("\n          Total real\n        ")])]),t._l(t.products,(function(e,s){return a("div",{key:s,staticClass:"row p-2 m-2"},[a("dt",{staticClass:"col-6 mt-2"},[t._v(t._s(e.product))]),a("base-input",{staticClass:"col-6",attrs:{placeholder:"Ingrese cantidad en "+e.measure},model:{value:t.countProduct[s].count,callback:function(e){t.$set(t.countProduct[s],"count",e)},expression:"countProduct[index].count"}})],1)}))],2),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"default"},on:{click:t.closeStore}},[t._v("Cerrar inventario")]),a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modals.modal4=!1}}},[t._v("Salir\n        ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-xl",show:t.modals.modal5},on:{"update:show":function(e){return t.$set(t.modals,"modal5",e)}}},[a("h4",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Informe de cierre")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v(t._s(t.messageHistory))])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistoryClosedReport,loading:t.productState,"data-source":t.dataHistoryClosedReport,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                          Buscar\n                      ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                          Restablecer\n                      ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}}])})],1)],1)],a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"default"},on:{click:t.printExcel}},[t._v("\n              Imprimir excel\n          ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-xl",show:t.modalAdminProduct.modal1},on:{"update:show":function(e){return t.$set(t.modalAdminProduct,"modal1",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Gestión de sucursales")]),a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-md-4 mx-auto"},[a("a-select",{staticClass:"input-group-alternative w-100 mx-auto",attrs:{"show-search":"","default-value":"Seleccione una sucursal",size:"large"},on:{change:t.selectEmploye}},t._l(t.branches,(function(e){return e.active?a("a-select-option",{key:e._id,attrs:{value:e.name},on:{click:function(a){return t.getInventoryByBranch(e._id,e.name)}}},[t._v("\n                      "+t._s(e.name)+"\n                  ")]):t._e()})),1)],1),a("div",{staticClass:"col-md-4 mx-auto"},[t.productsForBranch.length>0?a("a-select",{staticClass:"input-group-alternative w-100",attrs:{"default-value":"Seleccione un producto",size:"large"}},t._l(t.productsForBranch,(function(e){return a("a-select-option",{key:e,attrs:{value:e.name,disabled:e.disabled},on:{click:function(a){return t.selectProductForBranch(e.data)}}},[t._v("\n                      "+t._s(e.name)+"\n                  ")])})),1):t._e()],1),a("div",{staticClass:"col-md-3 mx-auto"},[a("base-button",{staticClass:"mx-auto",attrs:{type:"success",disabled:""==t.productForBranch},on:{click:t.addProductToBranch}},[t._v("Agregar un producto\n              ")])],1)]),1==t.branchDataValid?a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" Selecciona una sucursal ")])]):a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Esta sucursal no posee ningún producto")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsBranchData,"data-source":t.branchData,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                      Buscar\n                  ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                      resetear\n                  ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                      "+t._s(e)+"\n                  ")]]}},{key:"actions",fn:function(e,s){return[a("base-button",{staticClass:" mr-0",attrs:{size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(e){return t.deleteProductByBranch(s)}}}),a("base-button",{staticClass:"ml-1",attrs:{size:"sm",type:"primary",icon:"ni ni-bell-55"},on:{click:function(e){t.modalAdminProduct.modal4=!0,t.idForAlert=s._id,t.branchAlert=s.alertTotal}}})]}},{key:"total",fn:function(e,s){return[parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume)<s.alertTotal?a("span",{staticClass:"text-danger"},[t._v("\n                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                  "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Bajo en stock")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em","font-size":"1.1em"},attrs:{type:"exclamation-circle"}})],2)],1):a("span",[t._v("\n                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                  ")])]}},{key:"add",fn:function(e,s,n){return[a("base-button",{staticClass:"float-right ml-2",attrs:{size:"sm",type:"success",disabled:!(t.branchEntry[n].count>0),icon:"fa fa-plus"},on:{click:function(e){return t.addToProductBranch(s._id,s.storeId,s.measure,n)}}}),a("base-button",{staticClass:"float-right ml-2",attrs:{size:"sm",type:"danger",disabled:!(t.branchEntry[n].count>0),icon:"fa fa-minus"},on:{click:function(e){t.removeProductsBranch(s._id,s.storeId,n,s.measure,s.quantity+s.entry-s.consume)}}}),a("a-input",{staticClass:"ml-auto float-right",staticStyle:{width:"65%"},attrs:{placeholder:"Cantidad"},model:{value:t.branchEntry[n].count,callback:function(e){t.$set(t.branchEntry[n],"count",e)},expression:"branchEntry[index].count"}})]}},{key:"format-date",fn:function(e,a){return[t._v("\n                  "+t._s(t.formatDate(a.createdAt))+"\n              ")]}},{key:"totalStore",fn:function(e,a){return[t._v("\n                  "+t._s(t.getQuantity(a.storeId))+"\n              ")]}}])})],1),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modalAdminProduct.modal1=!1}}},[t._v("Cerrar\n          ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-lg",show:t.modalAdminProduct.modal2},on:{"update:show":function(e){return t.$set(t.modalAdminProduct,"modal2",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Gestionar productos de sucursal ")]),0==t.branchData?a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" Selecciona una sucursal ")])]):t._e(),t.branchData==[]?a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" Esta sucursal no posee ningún producto registrado ")])]):t._e(),t._l(t.branchData,(function(e,s){return a("base-button",{key:e,staticClass:"col-12 mb-1",staticStyle:{cursor:"default"},attrs:{size:"sm",type:"secondary"}},[a("div",{staticClass:"row p-0"},[a("div",{staticClass:"col-5 p-0"},[a("base-button",{staticClass:"float-left ml-2 mr-0",attrs:{size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(a){return t.deleteProductByBranch(e)}}}),a("base-button",{staticClass:"float-left ml-1",attrs:{size:"sm",type:"primary",icon:"ni ni-bell-55"},on:{click:function(a){t.modalAdminProduct.modal4=!0,t.idForAlert=e._id,t.branchAlert=e.alertTotal}}}),parseFloat(e.quantity)+parseFloat(e.entry)-parseFloat(e.consume)<e.alertTotal?a("span",{staticClass:"text-danger",staticStyle:{"vertical-align":"-0.4em"}},[t._v("\n                      "+t._s(e.product)+"\n                      "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Este producto necesita ser reabastecido.")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em","font-size":"1.1em"},attrs:{type:"exclamation-circle"}})],2)],1):a("span",{staticStyle:{"vertical-align":"-0.4em"}},[t._v("\n                      "+t._s(e.product)+"\n                  ")])],1),t.branchEntry!=[]?a("div",{staticClass:"col-7 row p-0"},[a("a-input",{staticClass:"w-75 ml-auto float-right",attrs:{placeholder:"Ingrese cantidad en "+e.measure},model:{value:t.branchEntry[s].count,callback:function(e){t.$set(t.branchEntry[s],"count",e)},expression:"branchEntry[index].count"}}),a("base-button",{staticClass:"float-right ml-auto",attrs:{size:"sm",type:"success",icon:"fa fa-plus"},on:{click:function(a){return t.addToProductBranch(e._id,e.storeId,e.measure,s)}}})],1):t._e()])])})),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"success"},on:{click:function(e){t.modalAdminProduct.modal3=!0,t.selectLoad()}}},[t._v("Agregar un producto\n          ")]),a("base-button",{staticClass:"mr-auto",attrs:{type:"link"},on:{click:function(e){t.modalAdminProduct.modal2=!1}}},[t._v("Cerrar\n          ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-lg",show:t.modalAdminProduct.modal3},on:{"update:show":function(e){return t.$set(t.modalAdminProduct,"modal3",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Gestionar productos de sucursal ")]),0==t.productsForBranch.length?a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(" No existen productos en la bodega ")])]):t._e(),t.productsForBranch.length>0?a("a-select",{staticClass:"input-group-alternative w-100 mb-4 mt-2",attrs:{"default-value":"Seleccione un producto",size:"large"}},t._l(t.productsForBranch,(function(e){return a("a-select-option",{key:e,attrs:{value:e.name,disabled:e.disabled},on:{click:function(a){return t.selectProductForBranch(e.data)}}},[t._v("\n              "+t._s(e.name)+"\n          ")])})),1):t._e(),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"success"},on:{click:t.addProductToBranch}},[t._v("Agregar\n          ")]),a("base-button",{staticClass:"mr-auto",attrs:{type:"link"},on:{click:function(e){t.modalAdminProduct.modal3=!1}}},[t._v("Cerrar\n          ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-lg",show:t.modalAdminProduct.modal4},on:{"update:show":function(e){return t.$set(t.modalAdminProduct,"modal4",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Gestionar productos de sucursal ")]),a("div",{staticClass:"text-center text-muted mb-4"},[a("small",[t._v("Anexa mas productos.")])]),a("base-input",{attrs:{alternative:"",placeholder:"Numero para alerta","addon-left-icon":"fa fa-bell"},on:{keyup:function(e){return t.verifyDecimalBranch()}},model:{value:t.branchAlert,callback:function(e){t.branchAlert=e},expression:"branchAlert"}}),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"success"},on:{click:t.addAlertToBranch}},[t._v("Agregar\n          ")]),a("base-button",{staticClass:"mr-auto",attrs:{type:"link"},on:{click:function(e){t.modalAdminProduct.modal4=!1}}},[t._v("Cerrar\n          ")])],1)],2)],1)},n=[],i=(a("ac4d"),a("8a81"),a("a481"),a("96cf"),a("3b8d")),o=(a("ac6a"),a("7f7f"),a("6b54"),a("6762"),a("2fdb"),a("bc3a")),r=a.n(o),l=a("a5e9"),c=a.n(l),d=a("4b70"),u=a.n(d),m=a("e366"),p=a("c38f"),f=a.n(p),h=(a("0952"),a("4984")),g=a("04e1"),v=a.n(g),b=a("7bec"),y=a.n(b),C=(a("4413"),a("1146")),w=a.n(C),x=a("ef34"),_=a("bb36"),S={mixins:[x["a"],_["a"]],components:{flatPicker:f.a,vueCustomScrollbar:u.a,VuePhoneNumberInput:y.a},data:function(){var t=this;return{countProduct:[],usuario:localStorage.nombre+" "+localStorage.apellido,myId:null,historyClosed:[],validForm:0,branches:[],branchDataValid:!0,branchData:[],selectedBranchName:"",branchEntry:[],branchAlert:null,idForAlert:"",selectedBranch:"",productsForBranch:[],productForBranch:"",providerSup:{validProvider:!1,typeProvider:""},history:[],provider:{name:"No entender",document:"",contact:{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""},contactPlus:"",location:""},configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}},providers:[],providerTable:[],dateAdd:"",productState:!1,addValid:!0,configDatePicker:{allowInput:!0,dateFormat:"m-d-Y",locale:h["Spanish"]},auth:[],modals:{modal1:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1},modalAdminProduct:{modal1:!1,modal2:!1,modal3:!1,modal4:!1},dataProduct:{product:"",price:"",measure:"",quantity:"",entry:"",alertTotal:"",id:null},messageHistory:"",products:[],searchText:"",searchInput:null,searchedColumn:"",columnsBranchData:[{title:"Productos",dataIndex:"product",key:"product",sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Medida",dataIndex:"measure",width:120,key:"price",scopedSlots:{customRender:"price"},sorter:function(t,e){return t.price-e.price}},{title:"Total bodega",width:120,key:"_id",scopedSlots:{customRender:"totalStore"},sorter:function(t,e){return t.quantity+t.entry-t.consume-(e.quantity+e.entry-e.consume)}},{title:"Agregar / Restar cantidades",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"add"}},{title:"Total sucursal",width:120,key:"_id",scopedSlots:{customRender:"total"},sorter:function(t,e){return t.quantity+t.entry-t.consume-(e.quantity+e.entry-e.consume)}},{title:"Acciones",dataIndex:"_id",width:150,key:"_id",scopedSlots:{customRender:"actions"}}],columns:[{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Precio promedio",dataIndex:"price",key:"price",ellipsis:!0,scopedSlots:{customRender:"price"},sorter:function(t,e){return t.price-e.price}},{title:"Tipo de medida",dataIndex:"measure",key:"measure",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.measure.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Cantidad inicial",dataIndex:"quantity",key:"quantity",ellipsis:!0,scopedSlots:{customRender:"quantity"},sorter:function(t,e){return t.quantity-e.quantity}},{title:"Cantidad ingresada",dataIndex:"entry",key:"entry",ellipsis:!0,scopedSlots:{customRender:"entry"},sorter:function(t,e){return t.entry-e.entry}},{title:"Consumo",dataIndex:"consume",key:"consume",ellipsis:!0,scopedSlots:{customRender:"consume"},sorter:function(t,e){return t.consume-e.consume}},{title:"Total",key:"_id",ellipsis:!0,scopedSlots:{customRender:"total"},sorter:function(t,e){return t.quantity+t.entry-t.consume-(e.quantity+e.entry-e.consume)}},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"actions"}}],columnsProviders:[{title:"Nombre de la empresa",dataIndex:"name",key:"name",ellipsis:!0,sorter:function(t,e){return t.name>e.name?-1:e.name>t.name?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Documento",dataIndex:"document",key:"document",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.document.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Teléfono",dataIndex:"contact.formatInternational",key:"contact.formatInternational",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.contact.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Correo",dataIndex:"contactPlus",key:"contactPlus",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.contactPlus.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Ubicación",dataIndex:"location",key:"location",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.location.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"actions"}}],dateReport:"",columnsHistory:[{title:"Fecha",dataIndex:"date",key:"date",ellipsis:!0,defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()},scopedSlots:{customRender:"date"}},{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Anexado",dataIndex:"entry",key:"entry",ellipsis:!0},{title:"Medida",dataIndex:"measure",key:"measure",ellipsis:!0},{title:"Precio por medida",dataIndex:"price",key:"price",ellipsis:!0,scopedSlots:{customRender:"price"},sorter:function(t,e){return t.price-e.price}},{title:"Gasto total",dataIndex:"price",key:"price",ellipsis:!0,scopedSlots:{customRender:"priceTotal"},sorter:function(t,e){return t.price-e.price}},{title:"Provedor",dataIndex:"provider",key:"provider",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"provide"},onFilter:function(t,e){return e.provider.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Destino",dataIndex:"branchName",key:"branchName",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"branchName"},onFilter:function(t,e){return e.branchName.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}}],columnsHistoryClosed:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",ellipsis:!0,defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},scopedSlots:{customRender:"date"}},{title:"Encargado del cierre",dataIndex:"user",key:"user",ellipsis:!0,sorter:function(t,e){return t.user>e.user?-1:e.user>t.user?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"user"},onFilter:function(t,e){return e.user.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Productos totales",dataIndex:"totalProduct",key:"totalProduct",ellipsis:!0},{title:"Informe",dataIndex:"_id",scopedSlots:{customRender:"report"},key:"_id",ellipsis:!0}],columnsHistoryClosedReport:[{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"product"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Medida",dataIndex:"measure",key:"measure",ellipsis:!0,sorter:function(t,e){return t.measure>e.measure?-1:e.measure>t.measure?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"measure"},onFilter:function(t,e){return e.measure.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Total ideal",dataIndex:"ideal",key:"ideal",ellipsis:!0},{title:"Total real",dataIndex:"count",key:"count",ellipsis:!0},{title:"Diferencia",dataIndex:"difference",key:"difference",ellipsis:!0}],firstNameUser:"",lastNameUser:"",emailUser:"",idUser:"",dataHistory:"",branchName:"",branch:"",totalStock:0}},created:function(){this.getToken(),this.getProducts(),this.getProviders(),this.getHistoryClosed(),this.getUserData(),this.getHistory(),this.getBranches(),this.getBranch()},methods:{getUserData:function(){this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.emailUser=localStorage.email,this.idUser=localStorage._id},getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch},getToken:function(){var t=localStorage.userToken;if(t.length>0){var e=v()(t);this.auth=e.access}},getQuantity:function(t){var e=0;return this.products.forEach((function(a){a._id==t&&(e=a.entry+a.quantity-a.consume)})),e},getProducts:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.countProduct=[],t.prev=1,t.next=4,r.a.get(c.a.endpointTarget+"/stores/getstore",this.configHeader);case 4:if(e=t.sent,"ok"==e.data.status)for(this.products=e.data.data,a=0;a<this.products.length;a++)s=this.products[a].quantity+this.products[a].entry-this.products[a].consume,this.countProduct.push({id:this.products[a]._id,count:"",ideal:s,measure:this.products[a].measure,product:this.products[a].product,difference:""}),this.totalStock=this.totalStock+(this.products[a].quantity+this.products[a].entry-this.products[a].consume)*this.products[a].price;else this.products=[];t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),getProviders:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/stores/getproviders",this.configHeader);case 3:if(e=t.sent,"ok"==e.data.status)for(this.providerTable=e.data.data,this.providers=[],a=0;a<e.data.data.length;a++)this.providers.push(e.data.data[a].name);else this.providers=[],this.providerTable=[];t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getHistory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/stores/getstorehistory",this.configHeader);case 3:e=t.sent,this.validRoute("bodega","ver_historial_compras")?"ok"==e.data.status?this.dataHistory=e.data.data:(this.dataHistory=[],this.messageHistory="Sin historial registrado"):this.messageHistory="No tiene permisos para visualizar historial",t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getBranches:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/branches",this.configHeader);case 3:e=t.sent,e&&(this.branches=e.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getInventoryByBranch:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedBranch=e,this.selectedBranchName=a,this.branchEntry=[],this.branchData=[],this.branchDataValid=!1,this.productsForBranch=[],t.prev=6,t.next=9,r.a.get(c.a.endpointTarget+"/stores/getinventorybybranch/"+e,this.configHeader);case 9:if(s=t.sent,"ok"==s.data.status)for(this.branchData=s.data.data,n=0;n<this.branchData.length;n++)this.branchEntry.push({count:""});this.selectLoad(),this.productForBranch="",t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](6),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 19:case"end":return t.stop()}}),t,this,[[6,15]])})));function e(e,a){return t.apply(this,arguments)}return e}(),selectLoad:function(){console.log("aja"),this.productsForBranch=[];for(var t=0;t<this.products.length;t++){var e=!1,a=this.products[t];if(this.branchData)for(var s=0;s<this.branchData.length;s++){var n=this.branchData[s];if(n.product==a.product){e=!0;break}}e?this.productsForBranch.push({data:a,name:a.product,disabled:!0}):this.productsForBranch.push({data:a,name:a.product,disabled:!1})}},selectProductForBranch:function(t){this.productForBranch=t},addProductToBranch:function(){var t=this;this.$swal({title:"¿Registrar ".concat(this.productForBranch.product," a sucursal?"),text:"¡Recuerda! este producto se registrará en inventario de la sucursal",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?r.a.post(c.a.endpointTarget+"/stores/registertobranch",{branch:t.selectedBranch,storeId:t.productForBranch._id,product:t.productForBranch.product,measure:t.productForBranch.measure,price:t.productForBranch.price},t.configHeader).then((function(e){"product registered"==e.data.status&&(t.$swal({icon:"success",title:"El producto fue agregado a la sucursal",showConfirmButton:!1,timer:1500}),t.modalAdminProduct.modal3=!1,t.getInventoryByBranch(t.selectedBranch,t.selectedBranchName),t.getBranches(),t.productForBranch="",t.productsForBranch=[],setTimeout((function(){t.selectLoad()}),200))})).catch((function(e){t.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)})):t.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},removeProductsBranch:function(t,e,a,s,n){var i=this;r.a.get(c.a.endpointTarget+"/stores/getstorebyid/"+e,this.configHeader).then((function(e){i.branchEntry[a].count<=n?(i.productForBranch=e.data.data,console.log(i.productForBranch),i.$swal({title:"¿Está seguro que desea eliminar "+i.branchEntry[a].count+" "+s+" de este producto?",html:"¡Recuerda! se descontará de la sucursal: <b>"+i.selectedBranchName+"</b>",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?r.a.post(c.a.endpointTarget+"/stores/addtobranch",{branch:i.selectedBranch,branchName:i.selectedBranchName,id:t,storeId:i.productForBranch._id,product:i.productForBranch.product,measure:s,price:i.productForBranch.price,entry:-i.branchEntry[a].count,firstNameUser:i.firstNameUser,lastNameUser:i.lastNameUser,emailUser:i.emailUser,idUser:i.idUser,inv:!1},i.configHeader).then((function(t){"added"==t.data.status&&r.a.post(c.a.endpointTarget+"/expenses/",{branch:i.selectedBranch,detail:"Se ha restado ".concat(i.branchEntry[a].count," ").concat(s," de ").concat(i.productForBranch.product," del inventario"),amount:-i.productForBranch.price*i.branchEntry[a].count,type:"Inventario"},i.configHeader).then((function(t){if("ok"==t.data.status){i.$swal({icon:"success",title:"La cantidad fue restada",showConfirmButton:!1,timer:1500}),i.getInventoryByBranch(i.selectedBranch,i.selectedBranchName),i.branchEntry=[];for(var e=0;e<i.branchData.length;e++)i.branchEntry.push({count:""});i.getProducts(),i.getHistory()}})).catch((function(t){i.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)}))})).catch((function(t){i.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)})):i.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))):i.$swal({icon:"error",title:"La sucursal no dispone de la cantidad ingresada",showConfirmButton:!1,timer:2e3})}))},addToProductBranch:function(t,e,a,s){var n=this;r.a.get(c.a.endpointTarget+"/stores/getstorebyid/"+e,this.configHeader).then((function(e){var i=e.data.data.quantity+e.data.data.entry-e.data.data.consume;n.branchEntry[s].count<=i?(n.productForBranch=e.data.data,n.$swal({title:"¿Desea agregar "+n.branchEntry[s].count+" "+a+"?",text:"¡Recuerda! Se descontará de tu bodega",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?r.a.post(c.a.endpointTarget+"/stores/addtobranch",{branch:n.selectedBranch,branchName:n.selectedBranchName,id:t,storeId:n.productForBranch._id,product:n.productForBranch.product,measure:n.productForBranch.measure,price:n.productForBranch.price,entry:n.branchEntry[s].count,firstNameUser:n.firstNameUser,lastNameUser:n.lastNameUser,emailUser:n.emailUser,idUser:n.idUser},n.configHeader).then((function(t){"added"==t.data.status&&r.a.post(c.a.endpointTarget+"/expenses/",{branch:n.selectedBranch,detail:"Se agregaron ".concat(n.branchEntry[s].count+" "+a," de ").concat(n.productForBranch.product),amount:n.productForBranch.price*n.branchEntry[s].count,type:"Inventario"},n.configHeader).then((function(t){if("ok"==t.data.status){n.$swal({icon:"success",title:"La cantidad fue agregada a la sucursal",showConfirmButton:!1,timer:1500}),n.getInventoryByBranch(n.selectedBranch,n.selectedBranchName),n.branchEntry=[];for(var e=0;e<n.branchData.length;e++)n.branchEntry.push({count:""});n.getProducts(),n.getHistory()}})).catch((function(t){n.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)}))})).catch((function(t){n.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)})):n.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))):n.$swal({icon:"error",title:"La bodega no dispone de la cantidad ingresada",showConfirmButton:!1,timer:2e3})}))},deleteProductByBranch:function(t){var e=this;this.$swal({title:"¿Desea eliminar el producto?",html:"¡Recuerda! El producto se eliminará de la sucursal: <b>"+this.selectedBranchName+"</b>",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.post(c.a.endpointTarget+"/stores/deleteinventoryproduct",{id:t._id,storeId:t.storeId,branch:e.selectedBranch,branchName:e.selectedBranchName,firstNameUser:e.firstNameUser,lastNameUser:e.lastNameUser,emailUser:e.emailUser,idUser:e.idUser,price:"Descartamiento",product:t.product,entry:t.entry,measure:t.measure},e.configHeader).then((function(t){console.log(t),"product deleted"==t.data.status&&r.a.post(c.a.endpointTarget+"/expenses/",{branch:e.selectedBranch,detail:"Producto (".concat(t.data.product,") eliminado del inventario"),amount:-t.data.price*t.data.total,type:"Inventario"},e.configHeader).then((function(t){if("ok"==t.data.status){e.$swal({icon:"success",title:"El producto fue eliminado con éxito",showConfirmButton:!1,timer:1500}),e.getInventoryByBranch(e.selectedBranch,e.selectedBranchName),e.branchEntry=[];for(var a=0;a<e.branchData.length;a++)e.branchEntry.push({count:""});e.getProducts(),e.getHistory()}})).catch((function(t){e.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)}))})).catch((function(t){e.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)})):e.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},getHistoryClosed:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/stores/getstoreclosed",this.configHeader);case 3:e=t.sent,this.validRoute("bodega","ver_historial_compras")?"ok"==e.data.status?this.dataHistoryClosed=e.data.data:(this.dataHistoryClosed=[],this.messageHistory="Sin historial registrado"):this.messageHistory="No tiene permisos para visualizar historial",t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),validDataProduct:function(){return""!=this.dataProduct.product&&""!=this.dataProduct.measure&&null!=this.dataProduct.price&&""!=this.dataProduct.alertTotal&&0!=this.dataProduct.price},addAlertToBranch:function(){var t=this;r.a.put(c.a.endpointTarget+"/stores/editstockalarmfrominventory/"+this.idForAlert,{stock:this.branchAlert},this.configHeader).then((function(e){"ok"==e.data.status&&(t.$swal({icon:"success",title:"Alerta actualizada",showConfirmButton:!1,timer:1500}),t.getInventoryByBranch(t.selectedBranch),t.modalAdminProduct.modal4=!1)})).catch((function(e){t.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)}))},addProduct:function(){var t=this;r.a.post(c.a.endpointTarget+"/stores",{product:this.dataProduct.product,measure:this.dataProduct.measure,price:this.dataProduct.price,alertTotal:this.dataProduct.alertTotal},this.configHeader).then((function(e){"product registered"===e.data.status?(t.$swal({icon:"success",title:"¡Producto registrado con éxito!",showConfirmButton:!1,timer:1500}),t.getProducts(),t.initialState(3),t.modals.modal1=!1):t.$swal({icon:"error",title:"¡Producto ya existe!",showConfirmButton:!1,timer:1500})})).catch((function(e){t.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)}))},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},verifyDecimal:function(){""!=this.dataProduct.alertTotal&&(console.log("aqui no"),this.dataProduct.alertTotal=this.dataProduct.alertTotal.toString().replace(/\,/g,"."))},verifyDecimalBranch:function(){var t=this;setTimeout((function(){""!=t.branchAlert&&(console.log("aqui no"),t.branchAlert=parseFloat(t.branchAlert.toString().replace(/\,/g,".")))}),200)},addProvider:function(){var t=this;r.a.post(c.a.endpointTarget+"/stores/addprovider",{name:this.provider.name,document:this.provider.document,contact:this.provider.contact,contactPlus:this.provider.contactPlus,location:this.provider.location},this.configHeader).then((function(e){"provider registered"===e.data.status?(t.$swal({icon:"success",title:"Provedor registrado",showConfirmButton:!1,timer:1500}),t.provider={name:"",rut:"",contact:{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""},contactPlus:"",direction:""},t.modals.modal3=!1,0==t.modals.modal1&&document.getElementById("provedorBtn").click(),t.getProducts(),t.getProviders()):t.$swal({title:"Provedor existe",showConfirmButton:!1,timer:1500})})).catch((function(e){t.$swal({title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)}))},initialState:function(t,e){1==t&&(this.myId=e,this.dateAdd="",this.dataProduct.price=""),2==t&&(this.provider={name:"",rut:"",contact:{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""},contactPlus:"",direction:""},this.providerSup.validProvider=!0),3==t&&(this.dataProduct={product:"",price:0,measure:"",quantity:"",entry:"",alertTotal:"",id:null},this.unit="")},formatDate:function(t){var e=new Date(t);return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},formatPrice:function(t){if("Abastecimiento"==t||"Devolución"==t||"Descartamiento"==t)return t;var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},updateProvider:function(){var t=this;r.a.put(c.a.endpointTarget+"/stores/updateProvider/"+this.provider.id,{name:this.provider.name,document:this.provider.document,contact:this.provider.contact,contactPlus:this.provider.contactPlus,location:this.provider.location},this.configHeader).then((function(e){"provider edited"==e.data.status?(t.$swal({icon:"success",title:"Provedor Actualizado",showConfirmButton:!1,timer:1500}),t.getProviders(),t.modals.modal3=!1):t.$swal({icon:"error",title:"El nuevo documento del provedor ya se encuentra registrado",showConfirmButton:!1,timer:1500})})).catch((function(e){t.$swal({title:"El provedor no fue actualizado intente de nuevo",showConfirmButton:!1,timer:1500}),console.log(e)}))},addMore:function(){var t=this;r.a.put(c.a.endpointTarget+"/stores/add/"+this.myId,{entry:this.dataProduct.entry,history:{id:this.myId,date:this.dateAdd,product:this.dataProduct.product,entry:this.dataProduct.entry,measure:this.dataProduct.measure,price:this.dataProduct.price/this.dataProduct.entry,provider:this.provider.name,firstNameUser:this.firstNameUser,lastNameUser:this.lastNameUser,emailUser:this.emailUser,idUser:this.idUser}},this.configHeader).then((function(e){t.$swal({icon:"success",title:"¡Producto actualizado con éxito!",showConfirmButton:!1,timer:1500}),t.modals.modal1=!1,t.getProducts(),t.getHistory()})).catch((function(e){t.$swal({icon:"error",title:"El producto no fue actualizado",showConfirmButton:!1,timer:1500}),console.log(e)}))},selectProviderForProduct:function(t){this.provider.name=t},deleteProvider:function(t){var e=this;this.$swal({title:"¿Desea eliminar proveedor?",text:"¡Recuerda! No podrás revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.delete(c.a.endpointTarget+"/stores/deleteprovider/"+t,e.configHeader).then((function(t){"provider deleted"==t.data.status&&(e.$swal({icon:"success",title:"Provedor borrado con éxito",showConfirmButton:!1,timer:1500}),e.getProviders())})).catch((function(t){e.$swal({title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)})):e.$swal({icon:"error",title:"Accion cancelada",showConfirmButton:!1,timer:1500})}))},deleteItem:function(t){var e=this;this.$swal({title:"¿Desea eliminar productos?",text:"¡Recuerda! Se procederá a eliminar de todas las sucursales donde se encuentre registrado y no se podrá revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.post(c.a.endpointTarget+"/stores/deletestoreproduct",{id:t,firstNameUser:e.firstNameUser,lastNameUser:e.lastNameUser,emailUser:e.emailUser,idUser:e.idUser},e.configHeader).then((function(t){"product deleted"==t.data.status&&(e.$swal({icon:"success",title:"Producto borrado con éxito",showConfirmButton:!1,timer:1500}),e.getProducts(),e.getHistory())})):e.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},closeStore:function(){var t=this,e=!0;this.countProduct.forEach((function(t){""!=t.count&&null!=t.count||(e=!1)})),e?r.a.post(c.a.endpointTarget+"/stores/closestore",{firstNameUser:this.firstNameUser,lastNameUser:this.lastNameUser,emailUser:this.emailUser,idUser:this.idUser,products:this.countProduct},this.configHeader).then((function(e){"closed"===e.data.status?(t.$swal({icon:"success",title:"Cierre realizado con éxito",showConfirmButton:!1,timer:1500}),t.getProducts(),t.getHistoryClosed()):t.$swal({icon:"error",title:"Ya se hizo un cierre este mes",showConfirmButton:!1,timer:1500})})).catch((function(e){t.$swal({icon:"error",title:"Problemas tecnicos intente de nuevo",showConfirmButton:!1,timer:1500})})):this.$swal({icon:"error",title:"Debes llenar todos los campos",showConfirmButton:!1,timer:1500})},validProviders:function(){""!=this.provider.name&&this.provider.contact.isValid&&""!=this.provider.location?this.providerSup.validProvider=!1:this.providerSup.validProvider=!0},pushDataProvider:function(t,e,a,s,n,i){this.provider={name:t,document:e,contact:a,contactPlus:s,location:n,id:i}},providerFunction:function(){"Registrar"==this.providerSup.typeProvider?this.addProvider():this.updateProvider()},pushDataProduct:function(t,e,a,s,n){this.modals.modal6=!0,this.dataProduct={product:t,price:a,measure:e,quantity:"",entry:"",alertTotal:s,id:n}},printExcel:function(){var t=[],e=!0,a=!1,s=void 0;try{for(var n,i=this.dataHistoryClosedReport[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;t.push({Producto:o.product,Medida:o.measure,"En stock":o.count,"Total ideal":o.ideal,Diferencia:o.difference})}}catch(c){a=!0,s=c}finally{try{e||null==i.return||i.return()}finally{if(a)throw s}}var r=w.a.utils.json_to_sheet(t),l=w.a.utils.book_new();w.a.utils.book_append_sheet(l,r,"Datos"),w.a.writeFile(l,"Reporte del "+this.formatDate(this.dateReport)+".xlsx")},editProduct:function(){var t=this;this.$swal({title:"¿Desea editar el producto ".concat(this.dataProduct.product,"?"),text:"¡Recuerda! También se editara de todas las sucursales donde está registrado. No puedes revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?r.a.put(c.a.endpointTarget+"/stores/"+t.dataProduct.id,{product:t.dataProduct.product,measure:t.dataProduct.measure,price:t.dataProduct.price,alertTotal:t.dataProduct.alertTotal},t.configHeader).then((function(e){"store edited"==e.data.status?(t.$swal({icon:"success",title:"Producto editado correctamente",showConfirmButton:!1,timer:1500}),setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},t.getProducts()}),1500)):"product already in use"==e.data.status?t.$swal({icon:"error",title:"El nombre del producto ya se encuentra registrado en la bodega",showConfirmButton:!1,timer:1500}):t.$swal({icon:"error",title:"Hubo un problema",showConfirmButton:!1,timer:1500})})):t.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},formatRut:function(t){t.replace(/[-.]/g,"");for(var e=t.replace(/\./g,"").replace(/\-/g,"").trim().toLowerCase(),a=e.substr(-1,1),s=e.substr(0,e.length-1),n="",i=s.length;i>0;i--){var o=s.charAt(i-1);n=o.concat(n),i%3===0&&(n=".".concat(n))}this.provider.document=n.concat("-").concat(a)},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}}},mounted:function(){var t=this;m["a"].$on("changeBranch",(function(e){t.getBranch()}))},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:240}}}},k=S,A=(a("33e6"),a("2877")),P=Object(A["a"])(k,s,n,!1,null,null,null);e["default"]=P.exports},"2eee":function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;var s=a("91b6"),n=a("0a8d"),i={bTooltip:s.default},o={install:function(t){(0,n.registerDirectives)(t,i)}};e.default=o},"30ca":function(t,e,a){t.exports=a.p+"img/template-6.d272b05f.png"},"325b":function(t,e,a){},"33e6":function(t,e,a){"use strict";var s=a("673d"),n=a.n(s);n.a},4520:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAACWpJREFUeJzt3d1PVHcex/HPMDwMD4MMiBVX1kYbVzRGx9CUJkSNJrZEItrsTS+83D+if0vjhWmMF3pBFC8wpmarxofSurqsGBQTU8sOOIN2lIeZYTh7sSurAl9Hzg8ODO9XYmJmmDO/C96e33nwd0Ke53kCMK+SoAcArGQEAhhK339hKpPVk98SQYwFCFR9XVQb18feeW1OINP5GaXHJ5dtUMBKURmpmPMaUyzAQCCAgUAAA4EAhjkH6QupqqzQp5s2LOVYgGXx/EVaz8f+KOhnCw6kNBxWbU3VogcFrBQfc5aWKRZgIBDAQCCAgUAAQ8EH6fO5fX9Q3C2Play8rFT7dm5b9OfZgwAGAgEMvqZY8/n75R7XmwQKduBIp9PtOQ/k+ci/XW8SCAxTLMDgfA/iehcHBMl5II2fNLneJBAYpliAgUAAA4EABgIBDAQCGAgEMBAIYCAQwOD8QuH5H753vUmgYH89+Ten22MPAhgIBDA4n2K53sUBQWIPAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMrIuFouJ60RBWVkRR4WZFYBmxLhZgYGVFwMAUCzAQCGAgEMBAIICBQAADgQAGAgEMBAIYuBcLRYWn3ALLiCkWYHC+B2nZHXe9SSAwzgPZtbfV9SaBwDDFAgwEAhgIBDAQCGAgEMBAIICBQAADgQAGnnKLosLCccAyIhDAwMJxgIGlRwEDUyzAQCCAgUAAA4EABgIBDAQCGAgEMLAuFooKT7kFDNysCCwjAgEMzqdYrndxQJDYgwAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAg/MLhf/6R5/rTQIFc/2EM+eBDPzzrutNAgVzHQhTLMDAuliAgZUVAQNTLMBAIICBQAADgQAGAgEMBAIYCAQwEAhgYOE4FBXXF6pZehQwMMUCDNyLBRi4mxcwMMUCDAQCGAgEMBAIYCAQwEAggIFAAAOBAAbnFwrP//C9600CBeMpt8AyIhDAwFNuAQN7EMBAIICBQAADgQAGAgEMBAIYCAQwEAhgYF0sFBXXi4awsiKKCjcrAsuIdbEAAysrAgamWICBQAADgQAGAgEMBAIYCAQwEAhgYF0sFBVuNQGWEYEABtbFAgzsQQADgQAGX1Os2upKea5GAiyB0nDY3+f9fLhlW7OvLwdWOqZYgIFAAIPT07zJl2lNTWXnvL6hoU6jqZcuvwprWHl5mbLZ3LzvVVSUqzFW6+y7nAaSyeS0eeP6ed9b6HXApd9HUk635zsQT9LviaQkadOGBj3739+BIGzeuH72d9DFP8r+A/E8hcMlamqs1+8jKfYUCNSb38Hh0TEn23N+q0kxSr18pUdPh4MehlOf/ukTbVxfF/QwVjxfZ7EGhn5T4vkLVUYq9CyRVFkZvSFYVZUVejU+qdz0tIZHxzQw9Js8b/GXs/1dSa+p0sbGmEaSL9bE1GrThnr9uakx6GH48mwkVdTHibHaGknSq/FJbdpQL4X8bY/rIICBOdEKNjg4qIGBAZWXlysajaqpqUnbtm0LelhrCoGsUIODg0qn0+rq6pp97enTp7p165ba2toCHNnawhRrhXr8+LFaW1vfeW3Lli2amprSxMREQKNae3wFUltT5WoceEs2m1Vd3fynYLdu3apEIrHMI1q9olWVCoUWf6TuK5BX45N+Po4FlJeXa2pqat730um0ampqlnlEq9eriUlfp3mZYgXM8zz19vbq4sWLmpmZmX19enp6TiSe56m/v1+Njav7VPNqQiABu3r1qnbt2qUvv/xSZ86cUT6flyQdOnRIP/74o4aGhpTJZDQ8PKyzZ8+qvb3d15QBH4dAAvTzzz+rqalJDx8+1JUrV7R//351d3crn8+rtLRUHR0dymazunnzpkZGRvTNN99o8+bNkv57nIKlx2neAHiep1u3bikejysSiailpWX2vfr6enV3d6urq0ulpaVqaWl5531JyuVy6u3tVTgcVkdHB3uUJcQeZIkkk0mdPXtWjx8/fud1z/N0/fr12TjeF41GdeTIEZ0/f1653Nz/FDQ5OalTp04pGo2qra1NV69e9XUQCht7kCWQSqXU29urr7/+Wn19fcrlcmppadHMzIx++ukntbW1zRvHG9FoVB0dHerp6VFV1bun0jOZjE6cOKHq6mpduXJFlZWVunTpko4ePcqeZAkQiGOpVEp37tzRF198oXv37ikSiejly5fq7+9XIpFQe3u7Gccb69at04kTJ8yfOX78+Ox3XrhwQceOHSMSxwjEoVQqpZs3b87+a/7ZZ5/NvtfX16dIJFJQHG8kk0ldvnxZ8Xh8znHI2xoaGtTe3q6enh51dnYSiUMcgzgyOjr6Thzva21tVXV1tX799deCtpdMJnXjxg19++23mpiY0MDAgPnzb0fy9vUU+EMgDoyOjur27dsfPA6Ix+PK5/O6f/++ub2xsTFdunRJO3fu1Llz59Tc3KwHDx6ov7/f/FwsFlN7e7suXLhAJI74CiRaXelqHKtWIpHQL7/8UvDU5vPPP5+9tjE0NDTnz8OHD3Xt2jWdPHlS4+Pj6urq0oMHD7R7927l83k9evTI3H4sFtOBAwfmXJlfq7gXK0Bv4vjYaxGtra1qbp5/2daysjJ1dnaqpKREe/fuVUVFhQ4ePKjt27drz549ev36tZ48eWJuPxaL6eDBg+ru7l7zkfj9HeUgfZGGh4d19+5dHT16dFGff3NF/GPF43H19fUpHA5ry5YtC/7cunXrdPjwYXV3d+v48eMqKWE2vRgEsgie5+n06dPat2+fent7AxnD9evXtWPHjg/uufL5vO7cucN/slokAlmEUCik7777LtAxfPXVV4F+/6rBog3AwvxeEfK1B5nKZDUxmVGkolzp1xMKhUJFfWYr+SKt16v8xEQmNx30EJbUxFRG09N5RSrK9Gp8UlOZ+Re5LpSvQLY2b9SM52kkOTG79GgxB5LNTStb5L9gq11yLK262mrNzHjyPE8NPld65xikAA11UTXU/SXoYaAA4XCJamuqNDw6pvUOHoPgO5BQKKR8fkbPEkk11NUW9ap9WPneXt3dBf+B6P/LzLO6O4Lm+nfQ6RSruioyb708YQoufegJUy45DaQuWq26aPW877FnwWpUcCCZbI7jCxSF9Eecqv+4QBw//w1Y6biSDhgIBDAQCGAgEMAw5yC9NFyi2iK+nwpYSGVk7jWUkMeyfMCCmGIBBgIBDP8BSGazHOYt0FcAAAITaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pgo8eDp4bXBtZXRhIHhtbG5zOng9J2Fkb2JlOm5zOm1ldGEvJyB4OnhtcHRrPSdJbWFnZTo6RXhpZlRvb2wgMTAuODAnPgo8cmRmOlJERiB4bWxuczpyZGY9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMnPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6cGRmPSdodHRwOi8vbnMuYWRvYmUuY29tL3BkZi8xLjMvJz4KICA8cGRmOkF1dGhvcj5DYXJsb3MgQ2FwYWNobzwvcGRmOkF1dGhvcj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wPSdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvJz4KICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhPC94bXA6Q3JlYXRvclRvb2w+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0ncic/PkO0KfEAAAAASUVORK5CYII="},4565:function(t,e,a){"use strict";e.__esModule=!0,e.hasPointerEvent=e.hasTouchSupport=e.isServer=e.inBrowser=void 0;var s="undefined"!==typeof document&&"undefined"!==typeof window;e.inBrowser=s;var n=!s;e.isServer=n;var i=s&&("ontouchstart"in document.documentElement||navigator.maxTouchPoints>0);e.hasTouchSupport=i;var o=s&&Boolean(window.PointerEvent||window.MSPointerEvent);e.hasPointerEvent=o},"4a39":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-5 pt-2  d-flex align-items-center",staticStyle:{"min-height":"300px","background-image":"url(img/theme/profile.png)","background-size":"cover","background-position":"center 25%"}},[a("span",{staticClass:"mask bg-gradient-success opacity-7"}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-7 col-md-10"},[a("h1",{staticClass:"display-2 text-white"},[t._v("Hola "+t._s(t.model.first_name))]),a("p",{staticClass:"text-white mt-0 mb-2 hideText"},[t._v("Este es tu perfil, puedes ver tu progreso trabajando para KKPrettyNails, en las diferentes secciones. Tambien puedes editar tus datos.")]),a("base-button",{staticClass:"mb-2",attrs:{size:"sm",type:"info"},on:{click:function(e){t.inspector=!0}}},[t._v("Editar perfil")]),a("base-button",{staticClass:"mb-2",attrs:{size:"sm",type:"info"},on:{click:function(e){t.modals.modal2=!0}}},[t._v("Cambiar contraseña")])],1)])])]),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-4 order-xl-2 mb-5 mb-xl-0"},[a("div",{staticClass:"card card-profile shadow"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-3 order-lg-2"},[a("div",{staticClass:"card-profile-image responsiveImageProfile"},[a("a",{attrs:{href:"#"}},[""==t.haveImage?a("img",{staticClass:"rounded-circle",staticStyle:{width:"150px",height:"150px"},attrs:{src:"img/theme/profile-default.png"}}):a("img",{staticClass:"rounded-circle",staticStyle:{width:"150px",height:"150px"},attrs:{src:t.model.image}})])])])]),a("div",{staticClass:"card-body pt-0 pt-md-4"},[t._m(0),a("div",{staticClass:"text-center"},[a("h3",[t._v("\n                                "+t._s(t.model.first_name)+" "+t._s(t.model.last_name)+"\n                            ")]),a("div",{staticClass:"h5"},[a("p",[t._v(t._s(t.model.status))])])]),a("hr",{staticClass:"my-4"}),a("p",[t._v(t._s(t.model.email)+" "),""!=t.model.about?[t._v("—")]:t._e(),t._v(" "+t._s(t.model.about))],2)])]),""!=t.model.linkLender?a("card",{staticClass:"mt-3",attrs:{shadow:"",type:"secondary"}},[a("div",{staticClass:"bg-white border-0",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-8"},[a("h3",{staticClass:"mb-0"},[t._v("Datos del mes")])])])]),a("div",{staticClass:"card-profile-stats d-flex justify-content-center"},[a("div",[a("span",{staticClass:"heading"},[t._v(t._s(t.formatPrice(t.advancement)))]),a("span",{staticClass:"description"},[t._v("Adelantos")])]),a("div",[a("span",{staticClass:"heading"},[t._v(t._s(t.formatPrice(t.lenderBonus)))]),a("span",{staticClass:"description"},[t._v("Bonos")])]),a("div",[a("span",{staticClass:"heading"},[t._v(t._s(t.formatPrice(t.comision)))]),a("span",{staticClass:"description"},[t._v("Ingresos")])])]),a("div",{staticClass:"card-profile-stats d-flex justify-content-center",staticStyle:{padding:"0.18rem"}},[a("div",[a("span",{staticClass:"heading"},[t._v(t._s(t.formatPrice(t.totalForLender)))]),a("span",{staticClass:"description"},[t._v("Ingreso total")])])])]):t._e()],1),a("div",{staticClass:"col-xl-8"},[a("card",{attrs:{shadow:"",type:"secondary","body-classes":"p-0"}},[a("div",{staticClass:"bg-white border-0",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-2"},[a("h3",{staticClass:"mb-0 text-info",staticStyle:{cursor:"pointer"},style:"Profile"==t.selectType?"text-decoration: underline;":"text-decoration:none;",on:{click:function(e){return t.selectMenu("Profile")}}},[t._v("Mi perfil")])]),""!=t.model.linkLender?a("div",{staticClass:"col-8"},[a("h3",{staticClass:"mb-0 text-info",staticStyle:{cursor:"pointer"},style:"Sales"==t.selectType?"text-decoration: underline;":"text-decoration:none;",on:{click:function(e){return t.selectMenu("Sales")}}},[t._v("Servicios")])]):t._e()])]),"Profile"==t.selectType?[a("div",{staticClass:"p-2"},[a("form",{on:{submit:function(t){t.preventDefault()}}},[a("h6",{staticClass:"heading-small text-muted mb-4 mt-1"},[t._v("Información de usuario")]),a("div",{staticClass:"pl-lg-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[t.inspector?a("base-input",{attrs:{alternative:"",label:"Nombre",placeholder:"Username","input-classes":"form-control-alternative"},model:{value:t.model.first_name,callback:function(e){t.$set(t.model,"first_name",e)},expression:"model.first_name"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Nombre",placeholder:"Username","input-classes":"form-control-alternative"},model:{value:t.model.first_name,callback:function(e){t.$set(t.model,"first_name",e)},expression:"model.first_name"}})],1),a("div",{staticClass:"col-lg-6"},[t.inspector?a("base-input",{attrs:{alternative:"",label:"Apellido",placeholder:"jesse@example.com","input-classes":"form-control-alternative"},model:{value:t.model.last_name,callback:function(e){t.$set(t.model,"last_name",e)},expression:"model.last_name"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Apellido",placeholder:"jesse@example.com","input-classes":"form-control-alternative"},model:{value:t.model.last_name,callback:function(e){t.$set(t.model,"last_name",e)},expression:"model.last_name"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[t.inspector?a("base-input",{attrs:{alternative:"",label:"Correo",placeholder:"First name","input-classes":"form-control-alternative"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Correo",placeholder:"Last name","input-classes":"form-control-alternative"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}})],1),a("div",{staticClass:"col-lg-6 form-group"},[a("label",[a("strong",[t._v("Imagen de perfil")])]),t.inspector?a("input",{ref:"file",staticClass:"form-control mb-3",attrs:{type:"file",id:"fileProfile"},on:{change:function(e){return t.handleFileUpload()}}}):a("input",{ref:"file",staticClass:"form-control mb-3",attrs:{type:"file",id:"fileProfile",disabled:""}})])])]),a("hr",{staticClass:"my-4"}),a("h6",{staticClass:"heading-small text-muted mb-2"},[t._v("Sobre ti")]),a("div",{staticClass:"pl-lg-4"},[a("div",{staticClass:"form-group"},[a("base-input",{attrs:{alternative:"",label:"Sobre mi - proximamente"}},[t.inspector?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.about,expression:"model.about"}],staticClass:"form-control form-control-alternative",attrs:{rows:"4",placeholder:"Unas palabras sobre ti..."},domProps:{value:t.model.about},on:{input:function(e){e.target.composing||t.$set(t.model,"about",e.target.value)}}}):a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.about,expression:"model.about"}],staticClass:"form-control form-control-alternative",attrs:{disabled:"",rows:"4",placeholder:"Unas palabras sobre ti..."},domProps:{value:t.model.about},on:{input:function(e){e.target.composing||t.$set(t.model,"about",e.target.value)}}})])],1)]),t.inspector?a("base-button",{staticClass:"float-right",attrs:{type:"info"},on:{click:t.editProfile}},[t._v("Editar")]):t._e(),t.inspector?a("base-button",{staticClass:"float-left",attrs:{type:"danger"},on:{click:function(e){t.inspector=!1}}},[t._v("Cancelar")]):t._e()],1)])]:[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No posee ventas registradas")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,"data-source":t.sales,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                        Buscar\n                                    ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                        resetear\n                                    ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                                        "+t._s(e)+"\n                                    ")]]}},{key:"date-format",fn:function(e,a){return[t._v("\n                                    "+t._s(t._f("formatDate")(a.createdAt))+"\n                                ")]}},{key:"commission",fn:function(e,a){return[t._v("\n                                    "+t._s(t._f("formatPrice")(parseFloat(a.commission)))+"\n                                ")]}},{key:"total",fn:function(e,a){return[t._v("\n                                    "+t._s(t._f("formatPrice")(a.total))+"\n                                ")]}},{key:"reportSale",fn:function(e,s){return[t.validRoute("ventas","detalle")?[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Anular venta")])]),a("base-button",{attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.nullSale(s.saleData._id,s.id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"stop"}})],1)],2)]:t._e()]}}])})],1)]],2)],1)])]),a("modal",{attrs:{show:t.modals.modal1,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[t._v("Cambie su contraseña")])])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Antigua contraseña",type:"password","addon-left-icon":"ni ni-key-25"},on:{change:function(e){return t.validRegister()}},model:{value:t.pass.lastPass,callback:function(e){t.$set(t.pass,"lastPass",e)},expression:"pass.lastPass"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nuevo contraseña",type:"password","addon-left-icon":"ni ni-key-25"},model:{value:t.pass.newPass,callback:function(e){t.$set(t.pass,"newPass",e)},expression:"pass.newPass"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Repita la contraseña",valid:t.pass.valid,type:"password"},on:{keyup:t.validFields},model:{value:t.pass.newPassVerify,callback:function(e){t.$set(t.pass,"newPassVerify",e)},expression:"pass.newPassVerify"}}),t.pass.validAll?a("base-button",{attrs:{type:"default"},on:{click:t.EditPass}},[t._v("\n                        Cambiar\n                    ")]):a("base-button",{attrs:{type:"default",disabled:""}},[t._v("\n                        Cambiar\n                    ")])],1)]],2)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-profile-stats d-flex justify-content-center mt-md-5"})])])}],i=(a("7f7f"),a("6b54"),a("a481"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=a("41cb"),c=a("a5e9"),d=a.n(c),u=a("04e1"),m=a.n(u),p=a("e366"),f=a("12f9"),h=a("c1df"),g=(a("898b"),a("ef34")),v=a("bb36");h["locale"]("es");var b={mixins:[g["a"],v["a"]],name:"user-profile",components:{VueBootstrap4Table:f["a"]},data:function(){var t=localStorage.userToken,e=m()(t);return{id:e._id,selectType:"Profile",model:{first_name:"",last_name:"",email:"",access:"",image:"",about:""},modals:{modal1:!1,modal2:!1,message:"",icon:"",type:""},inspector:!1,monthLender:0,gainLender:0,file:"",pass:{newPass:"",lastPass:"",newPassVerify:"",valid:null,validAll:null},columns:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"date-format"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},ellipsis:!0},{title:"UUID de venta",dataIndex:"saleData.uuid",key:"saleData.uuid",scopedSlots:{customRender:"uuid-format"}},{title:"Cliente",dataIndex:"client",key:"client",ellipsis:!0,scopedSlots:{customRender:"client-slot"}},{title:"Servicio",dataIndex:"service",key:"service",ellipsis:!0,scopedSlots:{customRender:"service-slot"}},{title:"Comisión",dataIndex:"commission",key:"commission",ellipsis:!0,scopedSlots:{customRender:"commission"},defaultSortOrder:"descend",sorter:function(t,e){return t.commission-e.commission}},{title:"Total",dataIndex:"total",key:"totals.total",ellipsis:!0,scopedSlots:{customRender:"total"},defaultSortOrder:"descend",sorter:function(t,e){return t.total-e.total}}],haveImage:"",lenderBonus:0,advancement:0,totalForLender:0,sales:[],comision:0,fecha:"",configHeader:{headers:{"x-database-connect":d.a.database,"x-access-token":localStorage.userToken}}}},created:function(){this.getData(),this.getYourSales(),this.getDataLender()},methods:{validFields:function(){this.pass.valid=this.pass.newPass==this.pass.newPassVerify,this.validRegister()},validRegister:function(){this.pass.validAll=!(!this.pass.lastPass||1!=this.pass.valid)},selectMenu:function(t){this.selectType=t},getData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/users/"+this.id,this.configHeader);case 3:e=t.sent,console.log(e),this.model.first_name=e.data.data.first_name,this.model.last_name=e.data.data.last_name,this.model.email=e.data.data.email,this.model.status=e.data.data.status,this.model.access=e.data.data.LastAccess,this.model.about=e.data.data.about,this.model.image=e.data.data.userImage,this.model.linkLender=e.data.data.linkLender,this.haveImage=e.data.data.userImage,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),this.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),EditPass:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.pass.newPassVerify!=this.pass.newPass){t.next=13;break}return t.prev=1,t.next=4,r.a.put(d.a.endpointTarget+"/users/changePass/"+this.id,{newPass:this.pass.newPass,lastPass:this.pass.lastPass},this.configHeader);case 4:e=t.sent,"ok"==e.data.status?(this.$swal({type:"success",title:"Contraseña editada con éxito.",showConfirmButton:!1,timer:1500}),this.pass.newPass="",this.pass.lastPass="",this.pass.newPassVerify="",this.modals.modal2=!1,this.inspector=!1):(this.$swal({type:"error",title:"Contraseña incorrecta.",showConfirmButton:!1,timer:1500}),this.pass.newPass="",this.pass.lastPass="",this.pass.newPassVerify=""),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:t.next=14;break;case 13:this.$swal({icon:"error",title:"Las contraseñas deben conincidir",showConfirmButton:!1,timer:2500});case 14:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),getYourSales:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.userToken,a=m()(e),s=a.linkLender,this.link=a.linkLender,""==s){t.next=18;break}return t.prev=5,t.next=8,r.a.get(d.a.endpointTarget+"/employes/salesbyemploye/"+s,this.configHeader);case 8:for(n=t.sent,console.log(n),this.sales=n.data.data,this.monthLender=n.data.data.length,i=0;i<n.data.data.length;i++)this.gainLender=this.gainLender+n.data.data[i].commission;t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](5),console.log(t.t0);case 18:case"end":return t.stop()}}),t,this,[[5,15]])})));function e(){return t.apply(this,arguments)}return e}(),getDataLender:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.userToken,a=m()(e),s=a.linkLender,this.link=a.linkLender,""==s){t.next=20;break}return t.prev=5,t.next=8,r.a.get(d.a.endpointTarget+"/employes/justonebyid/"+s,this.configHeader);case 8:n=t.sent,console.log(n),this.advancement=n.data.data.advancement,this.lenderBonus=n.data.data.bonus,this.comision=n.data.data.commission,i=this.advancement+this.lenderBonus,this.totalForLender=this.comision-i,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),console.log(t.t0);case 20:case"end":return t.stop()}}),t,this,[[5,17]])})));function e(){return t.apply(this,arguments)}return e}(),formatPrice:function(t){var e=t/1;return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(t){new Date(t);return h().format("DD-MM-YYYY")},handleFileUpload:function(){this.file=this.$refs.file.files[0],console.log(this.file)},editProfile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,e.append("image",this.file),e.append("first_name",this.model.first_name),e.append("last_name",this.model.last_name),e.append("email",this.model.email),e.append("about",this.model.about),a={name:this.model.first_name,lastname:this.model.last_name,image:""},t.prev=7,t.next=10,r.a.post(d.a.endpointTarget+"/users/editData/"+this.id,e,{headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken,"x-database-connect":d.a.database}});case 10:s=t.sent,this.$swal({icon:"success",title:"Usuario editado con éxito",showConfirmButton:!1,timer:1500}),this.inspector=!1,localStorage.setItem("firstname",a.name),localStorage.setItem("lastname",a.lastname),""!=s.data.image&&(localStorage.setItem("imageUser",s.data.image),a.image=s.data.image),p["a"].$emit("dataChange",a),this.getData(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](7),console.log(t.t0);case 23:case"end":return t.stop()}}),t,this,[[7,20]])})));function e(){return t.apply(this,arguments)}return e}()}},y=b,C=a("2877"),w=Object(C["a"])(y,s,n,!1,null,null,null);e["default"]=w.exports},"4cab":function(t,e,a){"use strict";var s=a("1e9c"),n=a.n(s);n.a},"4d8a":function(t,e,a){"use strict";var s=a("1d37"),n=a.n(s);n.a},"4eb5":function(t,e,a){var s=a("6981"),n={autoSetContainer:!1,appendToBody:!0},i={install:function(t){t.prototype.$clipboardConfig=n,t.prototype.$copyText=function(t,e){return new Promise((function(a,i){var o=document.createElement("button"),r=new s(o,{text:function(){return t},action:function(){return"copy"},container:"object"===typeof e?e:document.body});r.on("success",(function(t){r.destroy(),a(t)})),r.on("error",(function(t){r.destroy(),i(t)})),n.appendToBody&&document.body.appendChild(o),o.click(),n.appendToBody&&document.body.removeChild(o)}))},t.directive("clipboard",{bind:function(t,e,a){if("success"===e.arg)t._vClipboard_success=e.value;else if("error"===e.arg)t._vClipboard_error=e.value;else{var i=new s(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"},container:n.autoSetContainer?t:void 0});i.on("success",(function(e){var a=t._vClipboard_success;a&&a(e)})),i.on("error",(function(e){var a=t._vClipboard_error;a&&a(e)})),t._vClipboard=i}},update:function(t,e){"success"===e.arg?t._vClipboard_success=e.value:"error"===e.arg?t._vClipboard_error=e.value:(t._vClipboard.text=function(){return e.value},t._vClipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){"success"===e.arg?delete t._vClipboard_success:"error"===e.arg?delete t._vClipboard_error:(t._vClipboard.destroy(),delete t._vClipboard)}})},config:n};t.exports=i},"50dc":function(t,e,a){},"58f3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/clients.png)","background-size":"cover","background-position":"center 45%"}},[s("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"text-absolute"},[s("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Clientes")]),s("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a la administración de sus clientes, podrá enviar correos electrónicos y exportar en excel la base de datos de sus clientes.")])]),s("base-button",{staticClass:"float-right mt-7 mr-0",attrs:{size:"sm",disabled:!t.validRoute("clientes","correos"),type:"primary"},on:{click:function(e){t.modals.modal3=!0}}},[s("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"mail"}}),t._v("\n                    Correos\n                ")],1),s("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:!t.validRoute("clientes","registrar"),type:"success"},on:{click:t.generateExcel}},[s("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"file-excel"}}),t._v("\n                    Excel\n                ")],1),s("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:!t.validRoute("clientes","registrar"),type:"success"},on:{click:function(e){t.modals.modal1=!0,t.initialState(2)}}},[s("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                    Registrar\n                ")],1)],1)])]),s("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[s("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),s("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[s("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[t._v("\n                    Datos del cliente\n                ")])],[1==t.registerClient.valid2?s("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[s("card",{attrs:{shadow:""}},[s("tab-pane",[1==t.registerClient.valid2?s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"ni ni-collection"}),t._v("\n                                Basicos\n                            ")]):t._e(),s("form",{attrs:{role:"form"}},[s("div",{staticClass:"row mt-4"},[s("base-input",{staticClass:"mb-2 col-6",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.firstName,callback:function(e){t.$set(t.registerClient,"firstName",e)},expression:"registerClient.firstName"}}),s("base-input",{staticClass:"mb-2 col-6",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.lastName,callback:function(e){t.$set(t.registerClient,"lastName",e)},expression:"registerClient.lastName"}})],1),s("base-input",{staticClass:"mb-2",attrs:{alternative:"",type:"text",placeholder:"Correo","addon-left-icon":"fa fa-address-card","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.email,callback:function(e){t.$set(t.registerClient,"email",e)},expression:"registerClient.email"}}),s("div",{staticClass:"col-12 mb-2 p-0"},[s("VuePhoneNumberInput",{attrs:{"default-phoner-number":t.registerClient.phone.nationalNumber,"default-country-code":t.registerClient.phone.countryCode,translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un país",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.registerClient.phone=e,t.validRegister()}},model:{value:t.registerClient.phone.formatNational,callback:function(e){t.$set(t.registerClient.phone,"formatNational",e)},expression:"registerClient.phone.formatNational"}})],1),s("base-input",{attrs:{alternative:"",type:"text",placeholder:"Instagram","addon-left-icon":"fa fa-address-card","addon-right-icon":"fas fa-plus text-default"},model:{value:t.registerClient.instagram,callback:function(e){t.$set(t.registerClient,"instagram",e)},expression:"registerClient.instagram"}}),s("div",{staticClass:"text-center"},[0==t.registerClient.valid?s("base-button",{staticClass:"my-1",attrs:{type:"primary",disabled:""}},[t._v(t._s(t.tipeForm))]):s("base-button",{staticClass:"my-1",attrs:{type:"primary"},on:{click:function(e){return t.clientEdit()}}},[t._v(t._s(t.tipeForm))])],1)],1)]),1==t.registerClient.valid2?s("tab-pane",[s("span",{attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"ni ni-chart-bar-32"}),t._v("\n                                Avanzados\n                            ")]),s("div",{staticClass:"row"},[t.registerClient.birthday?s("base-button",{staticClass:"col-12 mt-3",attrs:{type:"secondary"}},[s("span",{staticClass:"text-left"},[t._v("Fecha de nacimiento")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t._f("formatDate")(t.registerClient.birthday)))])],1):t._e(),s("base-button",{staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[s("span",[t._v("Participación")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t.registerClient.attends))])],1),s("base-button",{staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[s("span",{staticClass:"text-left"},[t._v("Recomendaciones")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t.registerClient.recommendations))])],1),s("base-button",{staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[s("span",{staticClass:"text-left"},[t._v("Recomendador")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t.registerClient.recommender))])],1),s("base-button",{staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[s("span",[t._v("Cliente desde")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t._f("formatDate")(t.registerClient.createdAt)))])],1),s("base-button",{staticClass:"col-12 mt-1",attrs:{type:"secondary"}},[s("span",[t._v("Ultima atención")]),s("badge",{staticClass:"text-default",attrs:{type:"success"}},[t._v(t._s(t._f("formatDate")(t.registerClient.lastAttend)))])],1)],1)]):t._e()],1)],1):s("form",{attrs:{role:"form"}},[s("div",{staticClass:"row"},[s("base-input",{staticClass:"mb-3 col-6",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.firstName,callback:function(e){t.$set(t.registerClient,"firstName",e)},expression:"registerClient.firstName"}}),s("base-input",{staticClass:"mb-3 col-6",attrs:{alternative:"",placeholder:"Apellido","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.lastName,callback:function(e){t.$set(t.registerClient,"lastName",e)},expression:"registerClient.lastName"}})],1),s("base-input",{attrs:{alternative:"",type:"text",placeholder:"Correo","addon-left-icon":"fa fa-address-card","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerClient.email,callback:function(e){t.$set(t.registerClient,"email",e)},expression:"registerClient.email"}}),s("div",{staticClass:"col-12 mb-4 p-0"},[s("VuePhoneNumberInput",{attrs:{"default-phoner-number":t.registerClient.phone.nationalNumber,"default-country-code":t.registerClient.phone.countryCode,translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un país",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.registerClient.phone=e,t.validRegister()}},model:{value:t.registerClient.phone.nationalNumber,callback:function(e){t.$set(t.registerClient.phone,"nationalNumber",e)},expression:"registerClient.phone.nationalNumber"}})],1),s("span",{staticStyle:{color:"red",position:"absolute",right:"60px",top:"160px","z-index":"1","font-size":"20px"}},[t._v("*")]),s("base-input",{attrs:{alternative:"",type:"text",placeholder:"Instagram","addon-left-icon":"fa fa-address-card","addon-right-icon":"fas fa-plus text-default"},model:{value:t.registerClient.instagram,callback:function(e){t.$set(t.registerClient,"instagram",e)},expression:"registerClient.instagram"}}),s("base-input",{attrs:{"addon-left-icon":"ni ni-calendar-grid-58"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.focus,n=e.blur;return s("flat-picker",{staticClass:"form-control datepicker",attrs:{config:t.configDate,placeholder:"Seleccione una fecha de nacimiento"},on:{"on-open":a,"on-close":n},model:{value:t.registerClient.birthday,callback:function(e){t.$set(t.registerClient,"birthday",e)},expression:"registerClient.birthday"}})}}])}),s("base-checkbox",{staticClass:"mb-3",model:{value:t.registerClient.discount,callback:function(e){t.$set(t.registerClient,"discount",e)},expression:"registerClient.discount"}},[t._v("\n                        Descuento de nuevo cliente\n                    ")]),s("vue-single-select",{attrs:{options:t.clientsNames,placeholder:"Recomendador"},model:{value:t.registerClient.recommender,callback:function(e){t.$set(t.registerClient,"recommender",e)},expression:"registerClient.recommender"}}),s("div",{staticClass:"text-center"},[0==t.registerClient.valid?s("base-button",{staticClass:"my-4",attrs:{type:"primary",disabled:""}},[t._v(t._s(t.tipeForm))]):s("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:function(e){return t.registerClients()}}},[t._v(t._s(t.tipeForm))])],1)],1)]],2)],1),s("modal",{attrs:{show:t.modals.modal2,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[s("div",{staticClass:"py-3 text-center"},[s("i",{class:t.modals.icon}),s("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),s("modal",{attrs:{show:t.modals.modal3,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[s("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),s("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[s("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[t._v("\n                    Elija la plantilla de diseño para su correo\n                ")])],[s("div",{staticClass:"row p-3"},[s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(1)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("1e9e"),alt:""}})])]),s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(2)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("f17b"),alt:""}})])]),s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(3)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("e609"),alt:""}})])]),s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(4)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("6b73"),alt:""}})])]),s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(5)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("4520"),alt:""}})])]),s("div",{staticClass:"col-4 p-1"},[s("div",{staticClass:"template",on:{click:function(e){return t.selectTemplate(6)}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("30ca"),alt:""}})])])])]],2)],1),t.successRegister?s("base-alert",{staticClass:"positionAlert",attrs:{type:"success"}},[s("strong",[t._v("Registrado!")]),t._v(" Has registrado al cliente con exito!\n    ")]):t._e(),[s("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[s("div",{staticStyle:{"text-align":"center"}},[s("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),s("h2",[t._v("No hay ningún cliente registrado")])],1)]},proxy:!0}])},[s("a-table",{attrs:{columns:t.columns,loading:t.clientState,"data-source":t.clients,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var a=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return s("div",{staticStyle:{padding:"8px"}},[s("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),s("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                    Buscar\n                ")]),s("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                    Restablecer\n                ")])],1)}},{key:"filterIcon",fn:function(t){return s("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"birthday",fn:function(e){return[s("span",e?[t._v(t._s(t._f("formatDate")(e)))]:[t._v("Sin fecha de nacimiento")])]}},{key:"actions",fn:function(e,a){return[s("b",[s("a-tooltip",{attrs:{placement:"top"}},[s("template",{slot:"title"},[s("span",[t._v("Detalles / Editar")])]),t.validRoute("clientes","detalle")?s("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(e){t.modals.modal1=!0,t.initialState(3),t.pushData(a.firstName,a.lastName,a.email,a.phone,a.instagram,a.attends,a.recommender,a.recommendations,a.lastAttend,a.createdAt,a._id,a.birthday)}}}):s("base-button",{attrs:{disabled:"",size:"sm",type:"default",icon:"ni ni-bullet-list-67"}})],2),s("a-tooltip",{attrs:{placement:"top"}},[s("template",{slot:"title"},[s("span",[t._v("Eliminar")])]),t.validRoute("clientes","eliminar")?s("base-button",{attrs:{size:"sm",type:"warning",icon:"fas fa-trash"},on:{click:function(e){return t.deleteClient(a._id)}}}):s("base-button",{attrs:{disabled:"",size:"sm",type:"warning",icon:"fas fa-trash"}})],2)],1)]}}])})],1)]],2)},n=[],i=(a("a481"),a("28a5"),a("96cf"),a("3b8d")),o=(a("6b54"),a("6762"),a("2fdb"),a("bc3a")),r=a.n(o),l=a("a5e9"),c=a.n(l),d=a("12f9"),u=a("e366"),m=a("04e1"),p=a.n(m),f=a("41cb"),h=a("1146"),g=a.n(h),v=a("8e27"),b=a.n(v),y=a("c38f"),C=a.n(y),w=(a("0952"),a("4984")),x=a("7bec"),_=a.n(x),S=(a("4413"),a("ef34")),k=a("bb36"),A={mixins:[S["a"],k["a"]],components:{VueBootstrap4Table:d["a"],flatPicker:C.a,VuePhoneNumberInput:_.a},data:function(){var t=this;return{progress:!1,auth:[],successRegister:!1,clientsNames:[],clientIds:[],tipeForm:"",configDate:{allowInput:!0,dateFormat:"d-m-Y",locale:w["Spanish"]},socket:b()(c.a.endpointTarget),clientState:!0,phoneData:{isValid:!1},registerClient:{firstName:"",lastName:"",email:"",phone:{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""},instagram:"",birthday:"",recommender:null,discount:!1,valid:!1,valid2:!1,recommendations:"",lastAttend:"",createdAt:"",attends:0,_id:""},modals:{modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}},clients:[],searchText:"",searchInput:null,searchedColumn:"",columns:[{title:"Nombre",dataIndex:"firstName",key:"firstName",width:"15%",ellipsis:!0,sorter:function(t,e){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.firstName.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Apellido",dataIndex:"lastName",key:"lastName",width:"15%",ellipsis:!0,sorter:function(t,e){return t.lastName>e.lastName?-1:e.lastName>t.lastName?1:0},scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.lastName.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Correo electrónico",dataIndex:"email",key:"email",width:"25%",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.email.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Número telefónico",dataIndex:"phone.formatInternational",key:"phone",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.phone.formattedNumber.toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Fecha de cumpleaños",dataIndex:"birthday",key:"birthday",ellipsis:!0,scopedSlots:{customRender:"birthday"}},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"actions"}}],firstNameUser:"",lastNameUser:"",branch:""}},created:function(){this.getClients(),this.getToken(),$(document).ready((function(){$(".page-link").click((function(){$("html, body").animate({scrollTop:0},"slow")}))}))},methods:{getToken:function(){var t=localStorage.userToken,e=p()(t);this.auth=e.access,this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.branch=localStorage.branch},getClients:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.progress=!1,t.prev=1,t.next=4,r.a.get(c.a.endpointTarget+"/clients",this.configHeader);case 4:if(e=t.sent,e.data.data.length>0){for(this.clients=e.data.data,a=0;a<e.data.data.length;a++)this.clientsNames.push(e.data.data[a].firstName+" / "+e.data.data[a].email),this.clientIds.push(e.data.data[a].firstName+" / "+e.data.data[a].email+"-"+e.data.data[a]._id);this.progress=!0,this.clientState=!1}else this.clientState=!1;t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),res.send(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},generateExcel:function(){for(var t=[],e=0;e<this.clients.length;e++){var a=this.clients[e];t.push({Nombres:a.firstName+" "+a.lastName,Email:a.email,"Número de teléfono":a.phone.formatInternational,Instagram:a.instagram,Atenciones:a.attends,Recomendador:a.recommender,Recomendaciones:a.recommendations,"Ultima atencion":this.$options.filters.formatDate(a.lastAttend),"Cliente desde":this.$options.filters.formatDate(a.createdAt)})}var s=g.a.utils.json_to_sheet(t),n=g.a.utils.book_new();g.a.utils.book_append_sheet(n,s,"Datos"),g.a.writeFile(n,"Clientes.xlsx")},registerClients:function(){var t=this,e=this.registerClient.discount?0:1,a="";if(null!=this.registerClient.recommender)for(var s=0;s<this.clientIds.length;s++){var n=this.clientIds[s].split("-");n[0]==this.registerClient.recommender&&(a=n[1])}var i=this.registerClient.birthday,o=!0;if(""!=this.registerClient.birthday)if(this.registerClient.birthday.split("-")[1]){o=!0;var l=this.registerClient.birthday.split("-");i=l[1]+"-"+l[0]+"-"+l[2]}else o=!1,this.$swal({icon:"error",title:"Fecha invalida",showConfirmButton:!1,timer:1500});o&&r.a.post(c.a.endpointTarget+"/clients",{firstName:this.registerClient.firstName,lastName:this.registerClient.lastName,email:this.registerClient.email,recommender:this.registerClient.recommender,idRecomender:a,phone:this.registerClient.phone,birthday:i,instagram:this.registerClient.instagram,ifCheck:e},this.configHeader).then((function(e){"client create"==e.data.status?(t.$swal({icon:"success",title:"Se registro el cliente con éxito",showConfirmButton:!1,timer:1500}),t.initialState(1),t.getClients(),u["a"].$emit("reloadClients","reload")):t.$swal({icon:"error",title:"El cliente ya existe",showConfirmButton:!1,timer:1500})}))},validRegister:function(){""==this.registerClient.phone.nationalNumber?""!=this.registerClient.firstName&&""!=this.registerClient.lastName&&""!=this.registerClient.email&&2==this.registerClient.email.split("@").length&&2==this.registerClient.email.split("@")[1].split(".").length?this.registerClient.valid=!0:this.registerClient.valid=!1:(console.log("entre"),this.registerClient.valid=!1,""!=this.registerClient.firstName&&""!=this.registerClient.lastName&&""!=this.registerClient.email&&this.registerClient.phone.isValid&&2==this.registerClient.email.split("@").length&&2==this.registerClient.email.split("@")[1].split(".").length?this.registerClient.valid=!0:this.registerClient.valid=!1)},formatPhone:function(){var t=this.registerClient.contactOne.replace(/[^\d]/g,"");9==t.length?t=t.replace(/(\d{1})(\d{4})/,"$1-$2-"):10==t.length&&(t=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")),this.registerClient.contactOne=t},MaysPrimera:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},initialState:function(t){this.registerClient={firstName:"",lastName:"",email:"",phone:{countryCode:"CL",isValid:!1,phoneNumber:"",countryCallingCode:"",formattedNumber:"",nationalNumber:"",formatInternational:"",formatNational:"",uri:"",e164:""},instagram:"",birthday:"",recommender:null,discount:!1,valid:!1,valid2:!1,recommendations:"",lastAttend:"",createdAt:"",attends:0,_id:""},1==t&&(this.modals={modal1:!1,modal2:!1,modal3:!1}),2==t&&(this.tipeForm="Registrar"),3==t&&(this.tipeForm="Editar")},pushData:function(t,e,a,s,n,i,o,r,l,c,d,u){console.log("entro"),this.registerClient={firstName:t,lastName:e,email:a,phone:s,instagram:n,birthday:u,recommender:o,valid:!0,valid2:!0,recommendations:r,lastAttend:l,createdAt:c,attends:i,_id:d},console.log(this.registerClient)},deleteClient:function(t){var e=this;this.$swal({title:"¿Está seguro de borrar el cliente?",text:"No puedes revertir esta acción",type:"warning",icon:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.delete(c.a.endpointTarget+"/clients/"+t,e.configHeader).then((function(t){"ok"==t.data.status&&(e.$swal({icon:"success",title:"Cliente borrado con éxito",showConfirmButton:!1,timer:1500}),u["a"].$emit("reloadClients","reload"))})):e.$swal({icon:"info",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},clientEdit:function(){var t=this;r.a.put(c.a.endpointTarget+"/clients/"+this.registerClient._id,{firstName:this.registerClient.firstName,lastName:this.registerClient.lastName,email:this.registerClient.email,phone:this.registerClient.phone,instagram:this.registerClient.instagram},this.configHeader).then((function(e){"update client"==e.data.status?(t.$swal({icon:"success",title:"El cliente ha sido editado con éxito",showConfirmButton:!1,timer:1500}),t.getClients(),t.initialState(1),u["a"].$emit("reloadClients","reload")):t.$swal({icon:"error",title:"El email ya existe",showConfirmButton:!1,timer:1500})}))},showFilter:function(){$(".tableClient .vbt-table-tools").toggle()},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},selectTemplate:function(t){this.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},setTimeout((function(){localStorage.setItem("selectTemplate",t),f["a"].push({path:"Correo"})}),200)}},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},P=A,D=(a("7677"),a("2877")),E=Object(D["a"])(P,s,n,!1,null,null,null);e["default"]=E.exports},"673d":function(t,e,a){},6981:function(t,e,a){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
!function(e,a){t.exports=a()}(0,(function(){return function(t){var e={};function a(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=l(a(1)),o=l(a(3)),r=l(a(4));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.resolveOptions(a),s.listenClick(t),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===s(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,r.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,a=!!document.queryCommandSupported;return e.forEach((function(t){a=a&&!!document.queryCommandSupported(t)})),a}}]),e}();function d(t,e){var a="data-clipboard-"+t;if(e.hasAttribute(a))return e.getAttribute(a)}t.exports=c},function(t,e,a){"use strict";var s,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(2),r=(s=o)&&s.__esModule?s:{default:s},l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=a+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":n(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),e}();t.exports=l},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var a=t.hasAttribute("readonly");a||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),a||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var s=window.getSelection(),n=document.createRange();n.selectNodeContents(t),s.removeAllRanges(),s.addRange(n),e=s.toString()}return e}},function(t,e){function a(){}a.prototype={on:function(t,e,a){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:e,ctx:a}),this},once:function(t,e,a){var s=this;function n(){s.off(t,n),e.apply(a,arguments)}return n._=e,this.on(t,n,a)},emit:function(t){for(var e=[].slice.call(arguments,1),a=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=a.length;s<n;s++)a[s].fn.apply(a[s].ctx,e);return this},off:function(t,e){var a=this.e||(this.e={}),s=a[t],n=[];if(s&&e)for(var i=0,o=s.length;i<o;i++)s[i].fn!==e&&s[i].fn._!==e&&n.push(s[i]);return n.length?a[t]=n:delete a[t],this}},t.exports=a},function(t,e,a){var s=a(5),n=a(6);t.exports=function(t,e,a){if(!t&&!e&&!a)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(a))throw new TypeError("Third argument must be a Function");if(s.node(t))return m=e,p=a,(u=t).addEventListener(m,p),{destroy:function(){u.removeEventListener(m,p)}};if(s.nodeList(t))return l=t,c=e,d=a,Array.prototype.forEach.call(l,(function(t){t.addEventListener(c,d)})),{destroy:function(){Array.prototype.forEach.call(l,(function(t){t.removeEventListener(c,d)}))}};if(s.string(t))return i=t,o=e,r=a,n(document.body,i,o,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var i,o,r,l,c,d,u,m,p}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var a=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,a){var s=a(7);function n(t,e,a,n,i){var o=function(t,e,a,n){return function(a){a.delegateTarget=s(a.target,e),a.delegateTarget&&n.call(t,a)}}.apply(this,arguments);return t.addEventListener(a,o,i),{destroy:function(){t.removeEventListener(a,o,i)}}}t.exports=function(t,e,a,s,i){return"function"==typeof t.addEventListener?n.apply(null,arguments):"function"==typeof a?n.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return n(t,e,a,s,i)})))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}])}))},"6b73":function(t,e,a){t.exports=a.p+"img/template-4.9c22984e.png"},"73cf":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-5 col-md-7"},[a("div",{staticClass:"card bg-secondary shadow border-0"},[t._m(0),a("div",{staticClass:"card-body px-lg-5 py-lg-5"},[t._m(1),a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"input-group-alternative mb-3",attrs:{placeholder:"Name","addon-left-icon":"ni ni-hat-3"},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),a("base-input",{staticClass:"input-group-alternative mb-3",attrs:{placeholder:"Email","addon-left-icon":"ni ni-email-83"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}}),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Password",type:"password","addon-left-icon":"ni ni-lock-circle-open"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}}),t._m(2),a("div",{staticClass:"row my-4"},[a("div",{staticClass:"col-12"},[a("base-checkbox",{staticClass:"custom-control-alternative"},[a("span",{staticClass:"text-muted"},[t._v("I agree with the "),a("a",{attrs:{href:"#!"}},[t._v("Privacy Policy")])])])],1)]),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"}},[t._v("Create account")])],1)],1)])]),a("div",{staticClass:"row mt-3"},[t._m(3),a("div",{staticClass:"col-6 text-right"},[a("router-link",{staticClass:"text-light",attrs:{to:"/login"}},[a("small",[t._v("Login into your account")])])],1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-muted text-center mt-2 mb-3"},[a("small",[t._v("Sign up with")])]),a("div",{staticClass:"btn-wrapper text-center"},[a("a",{staticClass:"btn btn-neutral btn-icon",attrs:{href:"#"}},[a("span",{staticClass:"btn-inner--icon"},[a("img",{attrs:{src:"img/icons/common/github.svg"}})]),a("span",{staticClass:"btn-inner--text"},[t._v("Github")])]),a("a",{staticClass:"btn btn-neutral btn-icon",attrs:{href:"#"}},[a("span",{staticClass:"btn-inner--icon"},[a("img",{attrs:{src:"img/icons/common/google.svg"}})]),a("span",{staticClass:"btn-inner--text"},[t._v("Google")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center text-muted mb-4"},[a("small",[t._v("Or sign up with credentials")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-muted font-italic"},[a("small",[t._v("password strength: "),a("span",{staticClass:"text-success font-weight-700"},[t._v("strong")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("a",{staticClass:"text-light",attrs:{href:"#"}},[a("small",[t._v("Forgot password?")])])])}],i={name:"register",data:function(){return{model:{name:"",email:"",password:""}}}},o=i,r=a("2877"),l=Object(r["a"])(o,s,n,!1,null,null,null);e["default"]=l.exports},7677:function(t,e,a){"use strict";var s=a("2992"),n=a.n(s);n.a},"829a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-3 pt-1  d-flex align-items-center",staticStyle:{"min-height":"250px","background-image":"url(img/theme/configuration.png)","background-size":"cover","background-position":"center"}},[a("span",{staticClass:"mask bg-gradient-success opacity-4"}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white"},[t._v("Configuración de "+t._s(t.configData.businessName))])])])])]),a("a-modal",{attrs:{title:"Edite el adicional",width:"30%",closable:!0},model:{value:t.modals.modal1,callback:function(e){t.$set(t.modals,"modal1",e)},expression:"modals.modal1"}},[t.configData.microServices[t.selectedMicroService]?[a("base-input",{attrs:{placeholder:"Nombre del adicional"},model:{value:t.configData.microServices[t.selectedMicroService].microService,callback:function(e){t.$set(t.configData.microServices[t.selectedMicroService],"microService",e)},expression:"configData.microServices[selectedMicroService].microService"}}),a("currency-input",{staticClass:"form-control w-100",attrs:{locale:"de",placeholder:"Precio del adicional"},model:{value:t.configData.microServices[t.selectedMicroService].price,callback:function(e){t.$set(t.configData.microServices[t.selectedMicroService],"price",e)},expression:"configData.microServices[selectedMicroService].price"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.configData.microServices[t.selectedMicroService].duration,expression:"configData.microServices[selectedMicroService].duration"}],staticClass:"form-control mt-4",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.configData.microServices[t.selectedMicroService],"duration",e.target.multiple?a:a[0])}}},[a("option",{staticStyle:{color:"black"},attrs:{value:"0"}},[t._v("0 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"15"}},[t._v("15 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"30"}},[t._v("30 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"45"}},[t._v("45 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"60"}},[t._v("60 Minutos (1 Hr)")])])]:t._e(),a("template",{slot:"footer"},[a("base-button",{staticClass:"mt-4",attrs:{size:"sm",type:"default"},on:{click:function(e){return t.updateconfig()}}},[t._v("\n          Editar\n        ")])],1)],2),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-8 col-sm-12 order-xl-2 mb-5 mb-xl-0"},[a("div",{staticClass:"card card-profile shadow"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"60px"},attrs:{type:"info-circle"}}),a("h1",[t._v("Selecciona una seccion para configurar")])],1)]},proxy:!0}])},[""==t.selectedConfig?a("a-list"):t._e()],1),"typePay"==t.selectedConfig?a("div",{staticClass:"row p-4"},[t._m(0),a("div",{staticClass:"col-md-4"},[a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Efectivo","addon-left-icon":"fa fa-plus"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.insertTypePay(e)}},model:{value:t.typePay,callback:function(e){t.typePay=e},expression:"typePay"}}),a("base-button",{staticClass:"w-50",attrs:{outline:"",type:"default",size:"sm"},on:{click:t.insertTypePay}},[t._v("\n                              Ingresar\n                          ")]),a("label",{staticClass:"mt-4",attrs:{for:"currency"}},[t._v("\n                              Seleccione su moneda local\n                          ")]),"typePay"==t.selectedConfig?a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%"},attrs:{"default-value":t.configData.currency,size:"large"},on:{change:t.selectCurrency}},[a("a-select-option",{attrs:{value:"USD"}},[t._v("\n                                  USD\n                              ")]),a("a-select-option",{attrs:{value:"EUR"}},[t._v("\n                                  EUR\n                              ")]),a("a-select-option",{attrs:{value:"CLP"}},[t._v("\n                                  CLP\n                              ")]),a("a-select-option",{attrs:{value:"COP"}},[t._v("\n                                  COP\n                              ")]),a("a-select-option",{attrs:{value:"ARG"}},[t._v("\n                                  ARG\n                              ")]),a("a-select-option",{attrs:{value:"VES"}},[t._v("\n                                  VES\n                              ")])],1):t._e()],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("p",[t._v("No se han agregado metodos de pago")])],1)]},proxy:!0}],null,!1,1870219394)},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[0==t.configData.typesPay.lenght?a("span",[t._v("Para ingresar un método de pago debes escribirlo en el cuadro de texto y darle click en "),a("b",[t._v("Ingresar")]),t._v(" o presionar la tecla "),a("b",[t._v("Enter")])]):t._e()]),a("div",{staticClass:"col-md-8"},[a("a-list",{attrs:{bordered:"","data-source":t.configData.typesPay},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{},[t._v("\n                                          "+t._s(e)+" \n                                          "),"Efectivo"!=e?a("base-button",{staticClass:"float-right",attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){return t.removeTypePay(s)}}},[a("i",{staticClass:"fa fa-times"})]):t._e()],1)}}],null,!1,2186173800)})],1)],2)],1)],1):t._e(),"agend"==t.selectedConfig?a("div",[a("h1",{staticClass:" text-center my-2"},[t._v("\n                        Configura tu agenda\n                    ")]),a("hr",{staticClass:"w-50 mb-0 mt-0"}),a("div",{staticClass:"row p-4 pt-0 pl-5"},[a("div",{staticClass:"col-12 row mb-3"},[a("p",{staticClass:"mx-auto"},[a("strong",{staticClass:"mr-2"},[t._v("Agendamiento online ")]),a("a-switch",{staticClass:"mr-3",attrs:{checked:t.configData.datesPolitics.onlineDates},on:{click:function(e){return t.changeDatePolitic("onlineDates")}}})],1),a("p",{staticClass:"mx-auto"},[a("strong",{staticClass:"mr-2"},[t._v("Permitir eliminar citas")]),a("a-switch",{attrs:{checked:t.configData.datesPolitics.deleteDates},on:{click:function(e){return t.changeDatePolitic("deleteDates")}}})],1),a("p",{staticClass:"mx-auto"},[a("strong",{staticClass:"mr-2"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Esto permite visualizar y seleccionar los adicionales creado.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Adicionales \n                          ")],1),a("a-switch",{staticClass:"mr-3",attrs:{checked:t.configData.datesPolitics.microServices},on:{click:function(e){return t.changeDatePolitic("microServices")}}})],1)]),t._m(1),t._m(2),t._m(3),a("div",{staticClass:"col-4"},[a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[1].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("monday")}}},[t._v("\n                              Lunes\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[2].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("tuesday")}}},[t._v("\n                              Martes\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[3].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("wednesday")}}},[t._v("\n                              Miércoles\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[4].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("thursday")}}},[t._v("\n                              Jueves\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[5].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("friday")}}},[t._v("\n                              Viernes\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[6].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("saturday")}}},[t._v("\n                              Sábado\n                          ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:1==t.configData.blockHour[0].status?"success":"danger",size:"sm"},on:{click:function(e){return t.salectDay("sunday")}}},[t._v("\n                              Domingo\n                          ")])],1),a("div",{staticClass:"col-8 row"},[a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[1].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(1)}},model:{value:t.configData.blockHour[1].start,callback:function(e){t.$set(t.configData.blockHour[1],"start",e)},expression:"configData.blockHour[1].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[1].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(1)}},model:{value:t.configData.blockHour[1].end,callback:function(e){t.$set(t.configData.blockHour[1],"end",e)},expression:"configData.blockHour[1].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[2].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(2)}},model:{value:t.configData.blockHour[2].start,callback:function(e){t.$set(t.configData.blockHour[2],"start",e)},expression:"configData.blockHour[2].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[2].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(2)}},model:{value:t.configData.blockHour[2].end,callback:function(e){t.$set(t.configData.blockHour[2],"end",e)},expression:"configData.blockHour[2].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[3].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(3)}},model:{value:t.configData.blockHour[3].start,callback:function(e){t.$set(t.configData.blockHour[3],"start",e)},expression:"configData.blockHour[3].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[3].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(3)}},model:{value:t.configData.blockHour[3].end,callback:function(e){t.$set(t.configData.blockHour[3],"end",e)},expression:"configData.blockHour[3].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[4].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(4)}},model:{value:t.configData.blockHour[4].start,callback:function(e){t.$set(t.configData.blockHour[4],"start",e)},expression:"configData.blockHour[4].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[4].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(4)}},model:{value:t.configData.blockHour[4].end,callback:function(e){t.$set(t.configData.blockHour[4],"end",e)},expression:"configData.blockHour[4].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[5].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(5)}},model:{value:t.configData.blockHour[5].start,callback:function(e){t.$set(t.configData.blockHour[5],"start",e)},expression:"configData.blockHour[5].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[5].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(5)}},model:{value:t.configData.blockHour[5].end,callback:function(e){t.$set(t.configData.blockHour[5],"end",e)},expression:"configData.blockHour[5].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[6].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(6)}},model:{value:t.configData.blockHour[6].start,callback:function(e){t.$set(t.configData.blockHour[6],"start",e)},expression:"configData.blockHour[6].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[6].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(6)}},model:{value:t.configData.blockHour[6].end,callback:function(e){t.$set(t.configData.blockHour[6],"end",e)},expression:"configData.blockHour[6].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[0].status,placeholder:"Desde"},on:{change:function(e){return t.updateconfigForTime(0)}},model:{value:t.configData.blockHour[0].start,callback:function(e){t.$set(t.configData.blockHour[0],"start",e)},expression:"configData.blockHour[0].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1),a("a-select",{staticClass:"mx-auto mt-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=t.configData.blockHour[0].status,placeholder:"Hasta"},on:{change:function(e){return t.updateconfigForTime(0)}},model:{value:t.configData.blockHour[0].end,callback:function(e){t.$set(t.configData.blockHour[0],"end",e)},expression:"configData.blockHour[0].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                  "+t._s(e)+"\n                              ")])})),1)],1),a("div",{staticClass:"col-12 row mt-4"},[a("div",{staticClass:"col-4"},[t._m(4),a("a-input-number",{staticClass:"w-100",attrs:{size:"large",min:1,max:20},on:{change:t.changeTime},model:{value:t.configData.datesPolitics.reminderDate,callback:function(e){t.$set(t.configData.datesPolitics,"reminderDate",e)},expression:"configData.datesPolitics.reminderDate"}})],1),a("div",{staticClass:"col-4"},[t._m(5),a("a-input-number",{staticClass:"w-100",attrs:{size:"large",min:1,max:20},on:{change:t.changeTime},model:{value:t.configData.datesPolitics.minTypeDate,callback:function(e){t.$set(t.configData.datesPolitics,"minTypeDate",e)},expression:"configData.datesPolitics.minTypeDate"}})],1),a("div",{staticClass:"col-4"},[t._m(6),a("a-input-number",{staticClass:"w-100",attrs:{size:"large",min:1,max:20},on:{change:t.changeTime},model:{value:t.configData.datesPolitics.limitTimeDate,callback:function(e){t.$set(t.configData.datesPolitics,"limitTimeDate",e)},expression:"configData.datesPolitics.limitTimeDate"}})],1),a("div",{staticClass:"col-4"},[t._m(7),a("a-input-number",{staticClass:"w-100",attrs:{size:"large",min:1,max:20},on:{change:t.changeTime},model:{value:t.configData.datesPolitics.minEditDate,callback:function(e){t.$set(t.configData.datesPolitics,"minEditDate",e)},expression:"configData.datesPolitics.minEditDate"}})],1),a("div",{staticClass:"col-4"},[t._m(8),a("a-input-number",{staticClass:"w-100",attrs:{size:"large",min:1,max:20},on:{change:t.changeTime},model:{value:t.configData.datesPolitics.editQuantity,callback:function(e){t.$set(t.configData.datesPolitics,"editQuantity",e)},expression:"configData.datesPolitics.editQuantity"}})],1)]),t._m(9)])]):t._e(),"blackList"==t.selectedConfig?a("div",{staticClass:"row p-3"},[t._m(10),a("div",{staticClass:"col-md-4"},["blackList"==t.selectedConfig?a("a-select",{staticClass:"input-group-alternative w-100 mb-4 mt-2",attrs:{"default-value":"Seleccione un cliente",size:"large"}},t._l(t.clients,(function(e){return a("a-select-option",{key:e._id,attrs:{value:e.firstName+" "+e.lastName+" - "+e.email},on:{click:function(a){return t.selectClient(e)}}},[t._v("\n                                  "+t._s(e.firstName+" "+e.lastName+" - "+e.email)+"\n                              ")])})),1):t._e(),a("base-button",{staticClass:"w-50",attrs:{outline:"",type:"default",size:"sm"},on:{click:t.insertClient}},[t._v("\n                              Ingresar\n                          ")])],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("p",[t._v("No se han agregado clientes a la lista negra")])],1)]},proxy:!0}],null,!1,1289124430)},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[0==t.configData.typesPay.lenght?a("span",[t._v("Para ingresar un cliente a la lista debes seleccionarlo en la izquierda y darle click en "),a("b",[t._v("Ingresar")])]):t._e()]),a("div",{staticClass:"col-md-8"},[a("a-list",{attrs:{bordered:"","data-source":t.configData.blackList},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{},[t._v("\n                                          "+t._s(e.name+" - "+e.email)+" \n                                          "),a("base-button",{staticClass:"float-right",attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){return t.removeClient(s)}}},[a("i",{staticClass:"fa fa-times"})])],1)}}],null,!1,1878101349)})],1)],2)],1)],1):t._e(),"information"==t.selectedConfig?a("div",[a("div",{staticClass:"row mb-3"},[t._m(11),a("div",{staticClass:"col-4"},[a("img",{staticClass:"mt-1 float-right mr-4",staticStyle:{widht:"80px",height:"80px"},attrs:{src:t.configData.bussinessLogo,alt:""}})]),a("hr",{staticClass:"w-50"})]),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2",attrs:{for:"credentials"}},[t._v("\n                                Nombre de la sucursal\n                            ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Nombre de la sucursal","addon-left-icon":"ni ni-shop",valid:t.configData.businessName.length>=4},model:{value:t.configData.businessName,callback:function(e){t.$set(t.configData,"businessName",e)},expression:"configData.businessName"}})],1),a("div",{staticClass:"col-md-6 col-sm-12 row pr-0"},[a("label",{staticClass:"ml-4 mb-0 pb-0 w-100",staticStyle:{"margin-bottom":"-20px !important"},attrs:{for:"credentials"}},[t._v("\n                                Número de contacto\n                            ")]),a("div",{staticClass:"col-12 pl-3 pr-0 mt-0 pt-0"},[a("VuePhoneNumberInput",{attrs:{"default-phoner-number":t.configData.businessPhone.nationalNumber,"default-country-code":t.configData.businessPhone.countryCode,translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un pais",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.configData.businessPhone=e}},model:{value:t.configData.businessPhone.formatNational,callback:function(e){t.$set(t.configData.businessPhone,"formatNational",e)},expression:"configData.businessPhone.formatNational"}})],1)]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("a-tooltip",[a("template",{slot:"title"},[t._v("\n                                    Debe ser un correo valido\n                                ")]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.05em"},attrs:{type:"question-circle"}})],2),a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                Correo\n                            ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Correo de la sucursal","addon-left-icon":"ni ni-email-83"},on:{keyup:function(e){return t.verifyEmail()}},model:{value:t.configData.businessEmail,callback:function(e){t.$set(t.configData,"businessEmail",e)},expression:"configData.businessEmail"}})],1),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                Logo de la sucursal\n                            ")]),a("br"),a("input",{ref:"file",staticClass:"form-control input-group-alternative",attrs:{type:"file",id:"fileProfile",placeholder:"seleccione logo"},on:{change:function(e){return t.handleFileUpload()}}})]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"credentials"}},[t._v("\n                                Dirección del local\n                            ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Dirección","addon-left-icon":"fa fa-location-arrow",valid:t.configData.businessLocation.length>=4},model:{value:t.configData.businessLocation,callback:function(e){t.$set(t.configData,"businessLocation",e)},expression:"configData.businessLocation"}})],1),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"credentials"}},[t._v("\n                                Tipo de negocio\n                            ")]),a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"Seleccionar negocio","option-filter-prop":"children",size:"large",defaultValue:t.configData.businessType,"filter-option":t.filterOption},on:{change:t.handleChange}},[a("a-select-option",{attrs:{value:"Spa de uñas"}},[t._v("\n                                    Spa de uñas\n                                ")]),a("a-select-option",{attrs:{value:"Barberia"}},[t._v("\n                                    Barberia\n                                ")]),a("a-select-option",{attrs:{value:"Peluqueria"}},[t._v("\n                                    Peluquería\n                                ")])],1)],1),a("base-button",{staticClass:"mx-auto mt-2",attrs:{disabled:!(t.configData.businessName.length>4&&t.configData.businessPhone.isValid&&""!=t.configData.businessLocation),outline:"",type:"default"},on:{click:t.updateconfig}},[t._v("Actualizar información")])],1)]):t._e(),"microServices"==t.selectedConfig?a("div",{staticClass:"row p-4"},[t._m(12),a("div",{staticClass:"col-md-4"},[a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Nombre del adicional","addon-left-icon":"fa fa-plus"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.insertMicroService(e)}},model:{value:t.microService,callback:function(e){t.microService=e},expression:"microService"}}),a("base-button",{staticClass:"w-50",attrs:{outline:"",type:"default",size:"sm"},on:{click:t.insertMicroService}},[t._v("\n                              Ingresar\n                          ")])],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("p",[t._v("No se han agregado Adicional")])],1)]},proxy:!0}],null,!1,1460877531)},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[0==t.configData.typesPay.lenght?a("span",[t._v("Para ingresar un adicional debes escribirlo en el cuadro de texto y darle click en "),a("b",[t._v("Ingresar")]),t._v(" o presionar la tecla "),a("b",[t._v("Enter")])]):t._e()]),a("div",{staticClass:"col-md-8"},[a("a-list",{attrs:{bordered:"","data-source":t.configData.microServices},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{},[t._v("\n                                          "+t._s(e.microService)+"\n                                          "),"Efectivo"!=e?a("base-button",{staticClass:"float-right",attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){return t.removeMicroService(s)}}},[a("i",{staticClass:"fa fa-times"})]):t._e(),a("base-button",{staticClass:"float-right mr-2",attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){t.modals.modal1=!0,t.selectedMicroService=s}}},[a("i",{staticClass:"fa fa-edit"})])],1)}}],null,!1,871250839)})],1)],2)],1)],1):t._e()],1)]),a("div",{staticClass:"col-xl-2 col-sm-12 order-xl-1"},[a("card",{attrs:{shadow:"",type:"secondary"}},[a("div",{staticClass:"bg-white border-0",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"row align-items-center"},[a("h3",{staticClass:"mb-2 w-100 text-center"},[t._v("Secciones")]),a("base-button",{staticClass:"w-100 mt-2 mx-auto",attrs:{outline:"typePay"!=t.selectedConfig,type:"primary"},on:{click:function(e){t.fixed("typePay"),t.getConfiguration()}}},[t._v("Tipos de pago")]),a("base-button",{staticClass:"w-100 mt-2 mx-auto",attrs:{outline:"agend"!=t.selectedConfig,type:"primary"},on:{click:function(e){t.selectedConfig="agend",t.getConfiguration()}}},[t._v("Agendamiento")]),a("base-button",{staticClass:"w-100 mt-2 mx-auto",attrs:{outline:"blackList"!=t.selectedConfig,type:"primary"},on:{click:function(e){t.fixed("blackList"),t.getConfiguration()}}},[t._v("Lista negra")]),a("base-button",{staticClass:"w-100 mt-2 mx-auto",attrs:{outline:"information"!=t.selectedConfig,type:"primary"},on:{click:function(e){t.selectedConfig="information",t.getConfiguration()}}},[t._v("Información")]),a("base-button",{staticClass:"w-100 mt-2 mx-auto",attrs:{outline:"microServices"!=t.selectedConfig,type:"primary"},on:{click:function(e){t.selectedConfig="microServices",t.getConfiguration()}}},[t._v("Adicionales")])],1)])])],1)])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 mb-3"},[a("h1",{staticClass:" text-center w-100 my-2"},[t._v("\n                            Tipos de pago\n                        ")]),a("hr",{staticClass:"w-50 mb-0 mt-0"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4"},[a("h5",{staticClass:"text-center"},[t._v("Días")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4"},[a("h5",{staticClass:"mr-3 text-center"},[t._v("Apertura")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4"},[a("h5",{staticClass:"mr-5 text-center"},[t._v("Cierre")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center"},[t._v("\n                            Recordatorio "),a("br"),a("small",{staticClass:"text-muted text-center mx-auto"},[t._v("Dias antes para recordar una cita")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center"},[t._v("\n                            Límite de reserva "),a("br"),a("small",{staticClass:"text-muted text-center mx-auto"},[t._v("Horas antes para poder reservar")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center"},[t._v("\n                            Máximo tiempo de reserva "),a("br"),a("small",{staticClass:"text-muted text-center mx-auto"},[t._v("Límite de meses futuros para reservar ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center"},[t._v("\n                            Límite de edición "),a("br"),a("small",{staticClass:"text-muted text-center mx-auto"},[t._v("Horas previas para editar una cita")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"text-center"},[t._v("\n                            Cantidad de edición "),a("br"),a("small",{staticClass:"text-muted text-center mx-auto"},[t._v("Veces que se puede editar una cita")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 mt-2 mb-0"},[a("p",{staticClass:"text-center mx-auto mb-0"},[a("small",{staticClass:"text-muted"},[t._v("Los valores no pueden ser mayores a 20")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 mb-3"},[a("h1",{staticClass:" text-center w-100 my-2"},[t._v("\n                            Lista negra de clientes\n                        ")]),a("hr",{staticClass:"w-50 mb-0 mt-0"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 mt-1"},[a("h1",{staticClass:"display-4 ml-4 mt-4"},[t._v("\n                            Información de la sucursal\n                        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 mb-3"},[a("h1",{staticClass:" text-center w-100 my-2"},[t._v("\n                            Adicionales\n                        ")]),a("hr",{staticClass:"w-50 mb-0 mt-0"})])}],i=(a("28a5"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=(a("41cb"),a("a5e9")),c=a.n(l),d=a("12f9"),u=a("4b70"),m=a.n(u),p=(a("04e1"),a("e366")),f=a("7bec"),h=a.n(f),g=(a("4413"),a("ef34")),v=a("bb36"),b={mixins:[g["a"],v["a"]],components:{VueBootstrap4Table:d["a"],vueCustomScrollbar:m.a,VuePhoneNumberInput:h.a},data:function(){return{commission:!1,selectedConfig:"",selectedMicroService:0,selectedRoute:"",selectedClient:"",clients:[],configData:{},typePay:"",microService:"",validTime:!1,configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}},modals:{modal1:!1,modal2:!1},functions:[],routes:[{route:"procesar",valid:!1,functions:[{function:"editar",name:"Editar cliente",valid:!1},{function:"nuevo_cliente",name:"Registrar cliente",valid:!1},{function:"nuevo_servicio",name:"Registrar servicio",valid:!1},{function:"descuento",name:"Ingresar descuento",valid:!1}]},{route:"metricas",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1}]},{route:"usuarios",valid:!1,functions:[{function:"registrar",name:"Registar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1}]},{route:"ventas",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"anular",name:"Anular",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1}]},{route:"servicios",valid:!1,functions:[{function:"ingresar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"activaciones",name:"Activar o Desactivar",valid:!1}]},{route:"empleados",valid:!1,functions:[{function:"registrar",name:"Registrar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"reportes",name:"Ver reporte",valid:!1},{function:"cerrar ventas",name:"Cerrar ventas",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"adelantos",name:"Adelantos o Bonos",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]},{route:"clientes",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]},{route:"inventario",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1}]},{route:"gastos",valid:!1,functions:[{function:"registrar",name:"Registrar",valid:!1}]},{route:"agendamiento",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"agendar",name:"Agendar",valid:!1},{function:"todas",name:"Ver todas las agendas",valid:!1},{function:"editar",name:"Editar cita",valid:!1},{function:"eliminar",name:"Eliminar cita",valid:!1},{function:"cerrar",name:"Cerrar cita",valid:!1},{function:"finalizar",name:"Finalizar cita",valid:!1},{function:"procesar",name:"Procesar",valid:!1}]},{route:"caja",valid:!1,functions:[{function:"visualizar",name:"Ver cierres",valid:!1},{function:"filtrar",name:"Filtrar",valid:!1},{function:"cerrar",name:"hacer cierre",valid:!1},{function:"fondo",name:"Ingresar fondos",valid:!1},{function:"reporte",name:"Ver reporte del cierre",valid:!1},{function:"editar",name:"Editar cierre",valid:!1}]},{route:"pedidos",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]},{route:"bodega",valid:!1,functions:[]},{route:"sucursales",valid:!1,functions:[]}],columnsRoutes:[{label:"Rutas",name:"route",slot_name:"name",sort:!1},{label:"",name:"valid",slot_name:"active",sort:!1},{label:"",name:"valid",slot_name:"validation",sort:!1}],columnsFunctions:[{label:"functions",name:"name",sort:!1},{label:"",name:"valid",slot_name:"validation",sort:!1}],configRoutes:{card_title:"Tabla de rutas",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",global_search:{placeholder:"Filtre por nombre",visibility:!0,case_sensitive:!1},show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!1,pagination_info:!1,pagination:!1},configFunctions:{card_title:"Tabla de funciones",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",global_search:{placeholder:"Filtre por nombre",visibility:!0,case_sensitive:!1},show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!1,pagination_info:!1,pagination:!1},classes:{table:"table-bordered table-striped"},fromArray:["6:00","6:30","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00"],toArray:["12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00"],file:"",validImage:!0}},created:function(){this.getBranch(),this.getClients()},methods:{getBranch:function(){this.branchName=localStorage.branchName,this.branch=this.$route.query.id,this.getConfiguration()},getClients:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/clients",this.configHeader);case 3:e=t.sent,e.data.data.length>0&&(this.clients=e.data.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getConfiguration:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/configurations/"+this.branch,this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&(this.configData=e.data.data,console.log(this.configData)),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({type:"error",icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),changeDatePolitic:function(t){"onlineDates"==t?this.configData.datesPolitics.onlineDates=1!=this.configData.datesPolitics.onlineDates:"microServices"==t?this.configData.datesPolitics.microServices=1!=this.configData.datesPolitics.microServices:"editDates"==t?this.configData.datesPolitics.editDates=1!=this.configData.datesPolitics.editDates:"deleteDates"==t&&(this.configData.datesPolitics.deleteDates=1!=this.configData.datesPolitics.deleteDates),this.updateconfig()},changeCommission:function(){this.configData.accessProfiles[this.selectedProfile].commission=1!=this.configData.accessProfiles[this.selectedProfile].commission,this.configData.accessProfiles[this.selectedProfile].commission?this.commission=!0:this.commission=!1,this.updateconfig()},handleChange:function(t){this.configData.businessType=t},calculatedHour:function(){var t=!0,e=!1,a=void 0;try{for(var s,n=this.configData.blockHour[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var i,o,r,l=s.value;l.status&&(i=60*parseInt(l.end.split(":")[0]-parseInt(l.start.split(":")[0])),o=parseInt(l.start.split(":")[1])-parseInt(l.end.split(":")[1]),r=i+o,l.time=r)}}catch(c){e=!0,a=c}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}console.log(this.configData.blockHour)},updateconfig:function(){var t=this;this.calculatedHour(),r.a.post(c.a.endpointTarget+"/configurations/editConfiguration/"+this.configData._id,{blockHour:this.configData.blockHour,blackList:this.configData.blackList,businessName:this.configData.businessName,businessPhone:this.configData.businessPhone,businessType:this.configData.businessType,businessLocation:this.configData.businessLocation,businessEmail:this.configData.businessEmail,bussinessLogo:this.configData.bussinessLogo,currency:this.configData.currency,typesPay:this.configData.typesPay,datesPolitics:this.configData.datesPolitics,microServices:this.configData.microServices},this.configHeader).then((function(e){"ok"==e.data.status&&(t.$swal({type:"success",icon:"success",toast:!0,position:"top-end",title:"Cambio exitoso",showConfirmButton:!1,timer:1500}),t.modals.modal1=!1,p["a"].$emit("reloadMicroservices","reload"))})).catch((function(e){t.$swal({type:"error",title:"Problemas tecnicos intente nuevamente",showConfirmButton:!1,timer:1500}),console.log(e)}))},updateconfigForTime:function(t){var e=this;console.log("fino"),this.calculatedHour(),this.updateconfig(),r.a.post(c.a.endpointTarget+"/configurations/editblockhour",{blockHour:this.configData.blockHour[t],branch:this.configData.branch},this.configHeader).then((function(t){console.log(t)})).catch((function(t){e.$swal({type:"error",title:"Problemas tecnicos intente nuevamente",showConfirmButton:!1,timer:1500}),console.log(t)}))},removeTypePay:function(t){this.configData.typesPay.splice(t,1),this.updateconfig()},removeClient:function(t){this.configData.blackList.splice(t,1),this.updateconfig()},removeMicroService:function(t){var e=this;this.$swal({title:"¿Está seguro de borrar el microservicio? Se eliminara toda su configuración",text:"No puedes revertir esta acción",type:"warning",icon:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?(e.configData.microServices.splice(t,1),e.updateconfig()):e.$swal({type:"error",icon:"error",title:"Accion cancelada",showConfirmButton:!1,timer:1500})}))},insertTypePay:function(){var t=this,e=!0;this.configData.typesPay.forEach((function(a){a==t.typePay&&(t.$swal({icon:"error",title:"Este tipo de pago ya se encuentra registrado",showConfirmButton:!1,timer:1500}),e=!1)})),e&&(this.typePay.length>4?(this.configData.typesPay.push(this.typePay),this.typePay="",this.updateconfig()):this.typePay.length<=4?this.$swal({icon:"error",title:"El método de pago debe estar compuesto por mas de 4 caracteres",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Debe llenar el tipo de pago",showConfirmButton:!1,timer:1500}))},insertMicroService:function(){var t=this,e=!0;this.configData.microServices.forEach((function(a){a==t.microService&&(t.$swal({icon:"error",title:"Este microservicio ya se encuentra registrado",showConfirmButton:!1,timer:1500}),e=!1)})),e&&(this.microService.length>2?(this.configData.microServices.push({microService:this.microService,price:0,duration:0}),this.microService="",this.updateconfig()):this.microService.length<=2?this.$swal({icon:"error",title:"El nombre del adicional debe estar compuesto por mas de 2 caracteres",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Debe llenar el campo",showConfirmButton:!1,timer:1500}))},selectCurrency:function(t){this.configData.currency=t,this.updateconfig()},salectDay:function(t){"monday"==t?this.configData.blockHour[1].status=1!=this.configData.blockHour[1].status:"tuesday"==t?this.configData.blockHour[2].status=1!=this.configData.blockHour[2].status:"wednesday"==t?this.configData.blockHour[3].status=1!=this.configData.blockHour[3].status:"thursday"==t?this.configData.blockHour[4].status=1!=this.configData.blockHour[4].status:"friday"==t?this.configData.blockHour[5].status=1!=this.configData.blockHour[5].status:"saturday"==t?this.configData.blockHour[6].status=1!=this.configData.blockHour[6].status:"sunday"==t&&(this.configData.blockHour[0].status=1!=this.configData.blockHour[0].status),this.updateconfig()},changeTime:function(){var t=this;this.configData.datesPolitics.editQuantity>20&&(this.configData.datesPolitics.editQuantity=20),this.configData.datesPolitics.reminderDate>20&&(this.configData.datesPolitics.reminderDate=20),this.configData.datesPolitics.minTypeDate>20&&(this.configData.datesPolitics.minTypeDate=20),this.configData.datesPolitics.limitTimeDate>20&&(this.configData.datesPolitics.limitTimeDate=20),this.configData.datesPolitics.minEditDate>20&&(this.configData.datesPolitics.minEditDate=20),0==this.validTime&&(this.validTime=!0,setTimeout((function(){t.updateconfig(),t.validTime=!1}),3e3))},selectClient:function(t){this.selectedClient=t},handleFileUpload:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.validImage=!1,this.file=this.$refs.file.files[0],""==this.file){t.next=16;break}return e=new FormData,e.append("image",this.file),a={headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken,"x-database-connect":c.a.database}},t.prev=6,t.next=9,r.a.post(c.a.endpointTarget+"/configurations/uploadLogo",e,a);case 9:s=t.sent,"ok"==s.data.status?(this.configData.bussinessLogo=s.data.file,this.validImage=!0,this.updateconfig()):this.$swal({icon:"error",title:"Problemas al subir imagen",showConfirmButton:!1,timer:1500}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),alert(t.t0);case 16:case"end":return t.stop()}}),t,this,[[6,13]])})));function e(){return t.apply(this,arguments)}return e}(),insertClient:function(){var t=this,e=!0;this.configData.blackList.forEach((function(a){a.clientId==t.selectedClient._id&&(t.$swal({icon:"error",title:"Este cliente ya se encuentra en la lista negra",showConfirmButton:!1,timer:1500}),e=!1)})),e&&(this.configData.blackList.push({clientId:this.selectedClient._id,name:this.selectedClient.firstName+" "+this.selectedClient.lastName,email:this.selectedClient.email}),this.updateconfig())},fixed:function(t){var e=this;this.selectedConfig="",setTimeout((function(){e.selectedConfig=t}),100)},addRoute:function(t){this.configData.accessProfiles[this.selectedProfile].routes.push({ruta:t,validaciones:[]}),this.updateconfig()},removeRoute:function(t){for(var e=0;e<this.configData.accessProfiles[this.selectedProfile].routes.length;e++){var a=this.configData.accessProfiles[this.selectedProfile].routes[e];a.ruta==t&&this.configData.accessProfiles[this.selectedProfile].routes.splice(e,1)}this.updateconfig()},editFunctions:function(t,e){for(var a=this,s=function(s){var n=a.configData.accessProfiles[a.selectedProfile].routes[s];n.ruta==t&&(a.selectedRoute=s,e.forEach((function(t,a){e[a].valid=!1,n.validaciones.forEach((function(s){t.function==s&&(e[a].valid=!0)}))})))},n=0;n<this.configData.accessProfiles[this.selectedProfile].routes.length;n++)s(n);this.functions=e,this.modals.modal2=!0},addFunction:function(t){this.configData.accessProfiles[this.selectedProfile].routes[this.selectedRoute].validaciones.push(t),this.updateconfig()},removeFunction:function(t){for(var e=0;e<this.configData.accessProfiles[this.selectedProfile].routes[this.selectedRoute].validaciones.length;e++){var a=this.configData.accessProfiles[this.selectedProfile].routes[this.selectedRoute].validaciones[e];a==t&&this.configData.accessProfiles[this.selectedProfile].routes[this.selectedRoute].validaciones.splice(e,1)}this.updateconfig()}}},y=b,C=(a("e377"),a("2877")),w=Object(C["a"])(y,s,n,!1,null,null,null);e["default"]=w.exports},"8840d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total traffic",type:"gradient-red","sub-title":"350,897",icon:"ni ni-active-40"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 3.48%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total traffic",type:"gradient-orange","sub-title":"2,356",icon:"ni ni-chart-pie-35"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 12.18%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Sales",type:"gradient-green","sub-title":"924",icon:"ni ni-money-coins"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-danger mr-2"},[a("i",{staticClass:"fa fa-arrow-down"}),t._v(" 5.72%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Performance",type:"gradient-info","sub-title":"49,65%",icon:"ni ni-chart-bar-32"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 54.8%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1)])]),a("div",{staticClass:"container-fluid mt--7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("projects-table",{attrs:{title:"Light Table"}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col"},[a("projects-table",{attrs:{type:"dark",title:"Dark Table"}})],1)])])],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card shadow",class:"dark"===t.type?"bg-default":""},[a("div",{staticClass:"card-header border-0",class:"dark"===t.type?"bg-transparent":""},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"mb-0",class:"dark"===t.type?"text-white":""},[t._v("\n          "+t._s(t.title)+"\n        ")])]),a("div",{staticClass:"col text-right"},[a("base-button",{attrs:{type:"primary",size:"sm"}},[t._v("See all")])],1)])]),a("div",{staticClass:"table-responsive"},[a("base-table",{staticClass:"table align-items-center table-flush",class:"dark"===t.type?"table-dark":"",attrs:{"thead-classes":"dark"===t.type?"thead-dark":"thead-light","tbody-classes":"list",data:t.tableData},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("th",{attrs:{scope:"row"}},[a("div",{staticClass:"media align-items-center"},[a("a",{staticClass:"avatar rounded-circle mr-3",attrs:{href:"#"}},[a("img",{attrs:{alt:"Image placeholder",src:s.img}})]),a("div",{staticClass:"media-body"},[a("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(s.title))])])])]),a("td",{staticClass:"budget"},[t._v("\n          "+t._s(s.budget)+"\n        ")]),a("td",[a("badge",{staticClass:"badge-dot mr-4",attrs:{type:s.statusType}},[a("i",{class:"bg-"+s.statusType}),a("span",{staticClass:"status"},[t._v(t._s(s.status))])])],1),a("td",[a("div",{staticClass:"avatar-group"},[a("a",{staticClass:"avatar avatar-sm rounded-circle",attrs:{href:"#","data-toggle":"tooltip","data-original-title":"Ryan Tompson"}},[a("img",{attrs:{alt:"Image placeholder",src:"img/theme/team-1-800x800.jpg"}})]),a("a",{staticClass:"avatar avatar-sm rounded-circle",attrs:{href:"#","data-toggle":"tooltip","data-original-title":"Romina Hadid"}},[a("img",{attrs:{alt:"Image placeholder",src:"img/theme/team-2-800x800.jpg"}})]),a("a",{staticClass:"avatar avatar-sm rounded-circle",attrs:{href:"#","data-toggle":"tooltip","data-original-title":"Alexander Smith"}},[a("img",{attrs:{alt:"Image placeholder",src:"img/theme/team-3-800x800.jpg"}})]),a("a",{staticClass:"avatar avatar-sm rounded-circle",attrs:{href:"#","data-toggle":"tooltip","data-original-title":"Jessica Doe"}},[a("img",{attrs:{alt:"Image placeholder",src:"img/theme/team-4-800x800.jpg"}})])])]),a("td",[a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"completion mr-2"},[t._v(t._s(s.completion)+"%")]),a("div",[a("base-progress",{staticClass:"pt-0",attrs:{type:s.statusType,"show-percentage":!1,value:s.completion}})],1)])]),a("td",{staticClass:"text-right"},[a("base-dropdown",{staticClass:"dropdown",attrs:{position:"right"}},[a("a",{staticClass:"btn btn-sm btn-icon-only text-light",attrs:{slot:"title",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},slot:"title"},[a("i",{staticClass:"fas fa-ellipsis-v"})]),[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])]],2)],1)]}}])},[a("template",{slot:"columns"},[a("th",[t._v("Project")]),a("th",[t._v("Budget")]),a("th",[t._v("Status")]),a("th",[t._v("Users")]),a("th",[t._v("Completion")]),a("th")])],2)],1),a("div",{staticClass:"card-footer d-flex justify-content-end",class:"dark"===t.type?"bg-transparent":""},[a("base-pagination",{attrs:{total:"30"}})],1)])},o=[],r={name:"projects-table",props:{type:{type:String},title:String},data:function(){return{tableData:[{img:"img/theme/bootstrap.jpg",title:"Argon Design System",budget:"$2500 USD",status:"pending",statusType:"warning",completion:60},{img:"img/theme/angular.jpg",title:"Angular Now UI Kit PRO",budget:"$1800 USD",status:"completed",statusType:"success",completion:100},{img:"img/theme/sketch.jpg",title:"Black Dashboard",budget:"$3150 USD",status:"delayed",statusType:"danger",completion:72},{img:"img/theme/react.jpg",title:"React Material Dashboard",budget:"$4400 USD",status:"on schedule",statusType:"info",completion:90},{img:"img/theme/vue.jpg",title:"Vue Paper UI Kit PRO",budget:"$2200 USD",status:"completed",statusType:"success",completion:100}]}}},l=r,c=a("2877"),d=Object(c["a"])(l,i,o,!1,null,null,null),u=d.exports,m={name:"tables",components:{ProjectsTable:u}},p=m,f=Object(c["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},"91b6":function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;var s=a("f0bd"),n=a("16ae"),i=a("24e2"),o=a("93e0");function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),s.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var d="undefined"!==typeof window&&"undefined"!==typeof document,u="__BV_ToolTip__",m={focus:!0,hover:!0,click:!0,blur:!0};function p(t){var e={};"string"===typeof t.value||"function"===typeof t.value?e.title=t.value:"object"===c(t.value)&&(e=r({},e,t.value)),t.arg&&(e.container="#".concat(t.arg)),(0,i.keys)(t.modifiers).forEach((function(t){if(/^html$/.test(t))e.html=!0;else if(/^nofade$/.test(t))e.animation=!1;else if(/^(auto|top(left|right)?|bottom(left|right)?|left(top|bottom)?|right(top|bottom)?)$/.test(t))e.placement=t;else if(/^(window|viewport)$/.test(t))e.boundary=t;else if(/^d\d+$/.test(t)){var a=parseInt(t.slice(1),10)||0;a&&(e.delay=a)}else if(/^o-?\d+$/.test(t)){var s=parseInt(t.slice(1),10)||0;s&&(e.offset=s)}}));var a={},s="string"===typeof e.trigger?e.trigger.trim().split(/\s+/):[];return s.forEach((function(t){m[t]&&(a[t]=!0)})),(0,i.keys)(m).forEach((function(e){t.modifiers[e]&&(a[e]=!0)})),e.trigger=(0,i.keys)(a).join(" "),"blur"===e.trigger&&(e.trigger="focus"),e.trigger||delete e.trigger,e}function f(t,e,a){d&&(s.default?t[u]?t[u].updateConfig(p(e)):t[u]=new n.default(t,p(e),a.context.$root):(0,o.default)("v-b-tooltip: Popper.js is required for tooltips to work"))}function h(t){d&&t[u]&&(t[u].destroy(),t[u]=null,delete t[u])}var g={bind:function(t,e,a){f(t,e,a)},inserted:function(t,e,a){f(t,e,a)},update:function(t,e,a){e.value!==e.oldValue&&f(t,e,a)},componentUpdated:function(t,e,a){e.value!==e.oldValue&&f(t,e,a)},unbind:function(t){h(t)}};e.default=g},"92fe":function(t,e,a){},"93e0":function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;var s=function(t){console.warn("[BootstrapVue warn]: ".concat(t))},n=s;e.default=n},9782:function(t,e,a){"use strict";var s=a("9911"),n=a.n(s);n.a},9911:function(t,e,a){},"9c21":function(t,e,a){"use strict";var s=a("92fe"),n=a.n(s);n.a},"9cc6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total traffic",type:"gradient-red","sub-title":"350,897",icon:"ni ni-active-40"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 3.48%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total traffic",type:"gradient-orange","sub-title":"2,356",icon:"ni ni-chart-pie-35"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 12.18%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Sales",type:"gradient-green","sub-title":"924",icon:"ni ni-money-coins"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-danger mr-2"},[a("i",{staticClass:"fa fa-arrow-down"}),t._v(" 5.72%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1),a("div",{staticClass:"col-xl-3 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Performance",type:"gradient-info","sub-title":"49,65%",icon:"ni ni-chart-bar-32"}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-success mr-2"},[a("i",{staticClass:"fa fa-arrow-up"}),t._v(" 54.8%")]),a("span",{staticClass:"text-nowrap"},[t._v("Since last month")])])],2)],1)])]),a("div",{staticClass:"container-fluid mt--7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card shadow"},[t._m(0),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row icon-examples"},t._l(t.icons,(function(e,s){return a("div",{key:e.name+s,staticClass:"col-lg-3 col-md-6"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}},{name:"clipboard",rawName:"v-clipboard:copy",value:e.name,expression:"icon.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"btn-icon-clipboard",attrs:{type:"button",title:e.name,"data-clipboard-text":"air-baloon"}},[a("div",[a("i",{class:e.name}),a("span",[t._v(t._s(e.name.substring(6)))])])])])})),0)])])])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header bg-transparent"},[a("h3",{staticClass:"mb-0"},[t._v("Icons")])])}],i=a("2b0e"),o=a("4eb5"),r=a.n(o),l=a("2eee"),c=a.n(l);i["default"].use(r.a);var d={directives:{"b-tooltip":c.a},data:function(){return{icons:[{name:"ni ni-active-40"},{name:"ni ni-air-baloon"},{name:"ni ni-album-2"},{name:"ni ni-align-center"},{name:"ni ni-align-left-2"},{name:"ni ni-ambulance"},{name:"ni ni-app"},{name:"ni ni-archive-2"},{name:"ni ni-atom"},{name:"ni ni-badge"},{name:"ni ni-bag-17"},{name:"ni ni-basket"},{name:"ni ni-bell-55"},{name:"ni ni-bold-down"},{name:"ni ni-bold-left"},{name:"ni ni-bold-right"},{name:"ni ni-bold-up"},{name:"ni ni-bold"},{name:"ni ni-book-bookmark"},{name:"ni ni-books"},{name:"ni ni-box-2"},{name:"ni ni-briefcase-24"},{name:"ni ni-building"},{name:"ni ni-bulb-61"},{name:"ni ni-bullet-list-67"},{name:"ni ni-bus-front-12"},{name:"ni ni-button-pause"},{name:"ni ni-button-play"},{name:"ni ni-button-power"},{name:"ni ni-calendar-grid-58"},{name:"ni ni-camera-compact"},{name:"ni ni-caps-small"},{name:"ni ni-cart"},{name:"ni ni-chart-bar-32"},{name:"ni ni-chart-pie-35"},{name:"ni ni-chat-round"},{name:"ni ni-check-bold"},{name:"ni ni-circle-08"},{name:"ni ni-cloud-download-95"},{name:"ni ni-cloud-upload-96"},{name:"ni ni-compass-04"},{name:"ni ni-controller"},{name:"ni ni-credit-card"},{name:"ni ni-curved-next"},{name:"ni ni-delivery-fast"},{name:"ni ni-diamond"},{name:"ni ni-email-83"},{name:"ni ni-fat-add"},{name:"ni ni-fat-delete"},{name:"ni ni-fat-remove"},{name:"ni ni-favourite-28"},{name:"ni ni-folder-17"},{name:"ni ni-glasses-2"},{name:"ni ni-hat-3"},{name:"ni ni-headphones"},{name:"ni ni-html5"},{name:"ni ni-istanbul"},{name:"ni ni-circle-08"},{name:"ni ni-key-25"},{name:"ni ni-laptop"},{name:"ni ni-like-2"},{name:"ni ni-lock-circle-open"},{name:"ni ni-map-big"},{name:"ni ni-mobile-button"},{name:"ni ni-money-coins"},{name:"ni ni-note-03"},{name:"ni ni-notification-70"},{name:"ni ni-palette"},{name:"ni ni-paper-diploma"},{name:"ni ni-pin-3"},{name:"ni ni-planet"},{name:"ni ni-ruler-pencil"},{name:"ni ni-satisfied"},{name:"ni ni-scissors"},{name:"ni ni-send"},{name:"ni ni-settings-gear-65"},{name:"ni ni-settings"},{name:"ni ni-single-02"},{name:"ni ni-single-copy-04"},{name:"ni ni-sound-wave"},{name:"ni ni-spaceship"},{name:"ni ni-square-pin"},{name:"ni ni-support-16"},{name:"ni ni-tablet-button"},{name:"ni ni-tag"},{name:"ni ni-tie-bow"},{name:"ni ni-time-alarm"},{name:"ni ni-trophy"},{name:"ni ni-tv-2"},{name:"ni ni-umbrella-13"},{name:"ni ni-user-run"},{name:"ni ni-vector"},{name:"ni ni-watch-time"},{name:"ni ni-world"},{name:"ni ni-zoom-split-in"},{name:"ni ni-collection"},{name:"ni ni-image"},{name:"ni ni-shop"},{name:"ni ni-ungroup"},{name:"ni ni-world-2"},{name:"ni ni-ui-04"}]}},methods:{onCopy:function(){this.$notify({type:"success",title:"Copied to clipboard"})}}},u=d,m=a("2877"),p=Object(m["a"])(u,s,n,!1,null,null,null);e["default"]=p.exports},"9dc9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/box.png)","background-size":"cover","background-position":"center 40%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Caja")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a la administración de sus empleados. Donde podrá obtener detalle de sus ventas y comisiones correspondientes.")])]),t.cashFunds.inspector?[a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:!t.validRoute("caja","fondo"),type:"success"},on:{click:function(e){t.modals.modal2=!0}}},[a("i",{staticClass:"fa fa-archive mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"}}),t._v("\n                        Fondo\n                    ")])]:[a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:!t.validRoute("caja","cerrar"),type:"success"},on:{click:t.daySalesClose}},[a("i",{staticClass:"fa fa-archive mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"}}),t._v("\n                        Cierre\n                    ")])]],2)])]),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),t.validRoute("caja","visualizar")?a("h2",[t._v("Sucursal sin cierres registrados.")]):a("h2",[t._v("No tiene los permisos para visualizar cierres.")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.progress,"data-source":t.closing,scroll:t.getScreen},scopedSlots:t._u([{key:"manual-total",fn:function(e,a){return[t._v("\n                "+t._s(t.formatPrice(t.totalFind(a.manual)))+"\n            ")]}},{key:"system-total",fn:function(e,a){return[t._v("\n                "+t._s(t.formatPrice(t.totalFind(a.system)))+"\n            ")]}},{key:"diff-total",fn:function(e,a){return[t._v("\n                "+t._s(t.formatPrice(t.totalFind(a.system)-t.totalFind(a.manual)))+"\n            ")]}},{key:"format-date",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatDate")(a.createdAt))+"\n            ")]}},{key:"Admin",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Reporte")])]),t.validRoute("caja","reporte")?a("base-button",{attrs:{size:"sm",type:"default",icon:"fas fa-clipboard"},on:{click:function(e){return t.dataReport(s._id)}}}):a("base-button",{attrs:{size:"sm",type:"default",icon:"fas fa-clipboard",disabled:""}})],2)]}}])})],1),a("modal",{attrs:{show:t.modals.modal1,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("h4",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("\n               Registrar monto de apertura\n           ")]),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white","body-classes":"px-lg-2 py-lg-2"}},[[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre el cajero","addon-left-icon":"ni ni-circle-08"},on:{keyup:function(e){return t.validRegister(3)}},model:{value:t.cashFunds.cashName,callback:function(e){t.$set(t.cashFunds,"cashName",e)},expression:"cashFunds.cashName"}}),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-money-coins"},on:{keyup:function(e){return t.validRegister(3)}},model:{value:t.cashFunds.cashAmount,callback:function(e){t.$set(t.cashFunds,"cashAmount",e)},expression:"cashFunds.cashAmount"}}),t.cashFunds.valid?a("base-button",{attrs:{type:"default"},on:{click:t.registerFund}},[t._v("\n                        Ingresar fondo\n                    ")]):a("base-button",{attrs:{type:"default",disabled:""}},[t._v("\n                        Ingresar fondo\n                    ")])],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal3,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("h4",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("\n               Monto de egreso de la caja\n           ")]),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white","body-classes":"px-lg-2 py-lg-2"}},[[a("form",{attrs:{role:"form"}},[a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-money-coins"},on:{keyup:function(e){return t.validRegister(1)}},model:{value:t.egressManual,callback:function(e){t.egressManual=e},expression:"egressManual"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre el cajero","addon-left-icon":"ni ni-circle-08"},on:{keyup:function(e){return t.validRegister(1)}},model:{value:t.closeIdentification,callback:function(e){t.closeIdentification=e},expression:"closeIdentification"}}),t.validEgress?a("base-button",{attrs:{type:"default"},on:{click:function(e){t.modals.modal4=!0}}},[t._v("Continuar")]):a("base-button",{attrs:{type:"default",disabled:""},on:{click:function(e){t.modals.modal4=!0}}},[t._v("Continuar")])],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal4,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal4",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Ingrese los montos de las ventas del dia")])])],[a("form",{staticClass:"row",attrs:{role:"form"}},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-group"},[t._v("Fondo de caja")]),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-money-coins",readonly:""},model:{value:t.getFund,callback:function(e){t.getFund=e},expression:"getFund"}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"form-group"},[t._v("Efectivo")]),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-money-coins"},model:{value:t.cash,callback:function(e){t.cash=e},expression:"cash"}})],1),t._l(t.typesPayManual,(function(e){return["Efectivo"!=e.type?a("div",{key:e.type,staticClass:"col-6"},[a("label",{staticClass:"form-group"},[t._v(t._s(e.type))]),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-money-coins"},model:{value:e.total,callback:function(a){t.$set(e,"total",a)},expression:"type.total"}})],1):t._e()]}))],2),a("base-button",{staticClass:"float-right",attrs:{type:"default"},on:{click:t.closeFinally}},[t._v("Finalizar cierre")])]],2)],1)],1)},n=[],i=(a("ac6a"),a("7514"),a("6b54"),a("a481"),a("96cf"),a("3b8d")),o=a("bd86"),r=a("bc3a"),l=a.n(r),c=a("41cb"),d=a("a5e9"),u=a.n(d),m=a("04e1"),p=a.n(m),f=a("8e27"),h=a.n(f),g=a("e366"),v=a("12f9"),b=a("ef34"),y=a("bb36"),C={mixins:[b["a"],y["a"]],components:{VueBootstrap4Table:v["a"]},data:function(){var t,e=this;return{auth:[],socket:h()(u.a.endpointTarget),configHeader:{headers:{"x-database-connect":u.a.database,"x-access-token":localStorage.userToken}},cash:0,modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,message:"",icon:"",type:""},columns:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"format-date"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},ellipsis:!0},{title:"Encargado del cierre",dataIndex:"closerName",key:"closerName",ellipsis:!0},{title:"Total manual",dataIndex:"manual",key:"manual",scopedSlots:{customRender:"manual-total"},sorter:function(t,a){return e.totalFind(t.manual)-e.totalFind(a.manual)},ellipsis:!0},{title:"Total sistema",dataIndex:"system",key:"system",scopedSlots:{customRender:"system-total"},sorter:function(t,a){return e.totalFind(t.system)-e.totalFind(a.system)},ellipsis:!0},{title:"Diferencia",dataIndex:"branch",key:"branch",scopedSlots:{customRender:"diff-total"},sorter:function(t,a){return e.totalFind(t.system)-e.totalFind(t.manual)-(e.totalFind(a.system)-e.totalFind(a.manual))},ellipsis:!0},{title:"Reportes",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"Admin"},ellipsis:!0}],config:(t={card_title:"Tabla de cierres",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(o["a"])(t,"rows_selectable",!0),Object(o["a"])(t,"per_page_options",[5,10,20,30,40,50,80,100]),Object(o["a"])(t,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(o["a"])(t,"show_refresh_button",!1),Object(o["a"])(t,"show_reset_button",!1),Object(o["a"])(t,"selected_rows_info",!0),Object(o["a"])(t,"preservePageOnDataChange",!0),Object(o["a"])(t,"pagination_info",!0),t),classes:{table:"table-bordered table-striped"},closing:[],fund:0,checker:"",cashFunds:{inspector:!1,cashName:"",cashAmount:0,valid:!1},getFund:0,egressSystem:0,cashSystem:0,debitSystem:0,creditSystem:0,transferSystem:0,otherSystem:0,totalSystem:0,egressManual:0,fundManual:0,cashManual:0,debitManual:0,creditManual:0,transferManual:0,othersManual:0,closeIdentification:"",validFinally:!1,validEgress:!1,branch:"",branchName:"",typesPaySystem:[],typesPayManual:[]}},created:function(){this.getToken(),this.getBranch()},methods:{getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.imgUser=localStorage.imgUser,this.idUser=localStorage._id,this.getClosing(),this.getFunds()},getToken:function(){var t=localStorage.userToken;if(t.length>0){var e=p()(t);this.auth=e.access}},getClosing:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(u.a.endpointTarget+"/sales/Closing/"+this.branch,this.configHeader);case 3:e=t.sent,console.log(e),"ok"==e.data.status&&(this.validRoute("caja","visualizar")?this.closing=e.data.data:this.closing=[]),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),c["a"].push({name:"login"});case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},validRegister:function(t){3==t?this.cashFunds.valid=""!=this.cashFunds.cashName:this.validEgress=""!=this.closeIdentification},totalFind:function(t){var e=t.find((function(t){return"Total"==t.type}));return e.total},registerFund:function(){var t=this;l.a.post(u.a.endpointTarget+"/sales/registerFund",{userRegister:this.cashFunds.cashName,amount:this.cashFunds.cashAmount,branch:this.branch},this.configHeader).then((function(e){"ok"==e.data.status&&(t.modals.modal2=!1,t.$swal({icon:"success",title:"Ya puede ingresar ventas",showConfirmButton:!1,timer:1500}),t.cashFunds.cashName="",t.cashFunds.cashAmount="",t.getFunds(),t.cashFunds.inspector=!1,l.a.post(u.a.endpointTarget+"/notifications",{branch:t.branch,userName:t.firstNameUser+" "+t.lastNameUser,userImage:t.imgUser,detail:"Registro un fondo de caja",link:"Caja"},t.configHeader).then((function(e){t.socket.emit("sendNotification",e.data.data)})))}))},dataReport:function(t){localStorage.setItem("reportID",t),c["a"].push({path:"/reporteCierre"})},getFunds:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(u.a.endpointTarget+"/sales/getFund/"+this.branch,this.configHeader);case 3:e=t.sent,"ok"==e.data.status?(this.fund=e.data.data.amount,this.checker=e.data.data.userRegister,this.getFund=e.data.data.amount,this.egressSystem=e.data.data.amount,""==this.checker&&(this.cashFunds.inspector=!0,this.fund=0,this.checker="No hay cajero registrado")):(this.cashFunds.inspector=!0,this.fund=0,this.checker="No hay cajero registrado"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),c["a"].push({name:"login"});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),daySalesClose:function(){var t=this;l.a.get(u.a.endpointTarget+"/sales/getClosingDay/"+this.branch,this.configHeader).then((function(e){"bad"==e.data.status?t.$swal({icon:"error",title:"No puede hacer cierre sin ventas.",showConfirmButton:!1,timer:1500}):(t.typesPaySystem=e.data.data.totals,t.typesPayManual=e.data.data.types,t.modals.modal3=!0)}))},closeFinally:function(){var t=this,e=this.typesPayManual.find((function(t){return null==t.total}));if(void 0==e){var a=0;this.typesPayManual.forEach((function(t){a+=t.total})),a+=this.cash,this.typesPayManual.push({type:"Total",total:a}),l.a.post(u.a.endpointTarget+"/sales/closeDay/"+this.closeIdentification,{system:this.typesPaySystem,manual:this.typesPayManual,entryFund:this.getFund,cash:this.cash,egressManual:this.egressManual,branch:this.branch},this.configHeader).then((function(e){"ok"==e.data.status?(t.modals.modal4=!1,t.$swal({icon:"success",title:"Cierre hecho con éxito",showConfirmButton:!1,timer:1500}),t.getClosing(),t.modals.modal3=!1,t.modals.modal4=!1,t.cashFunds.inspector=!0,l.a.post(u.a.endpointTarget+"/notifications",{branch:t.branch,userName:t.firstNameUser+" "+t.lastNameUser,userImage:t.imgUser,detail:"Hizo un cierre de caja",link:"Caja"}).then((function(e){t.socket.emit("sendNotification",e.data.data)}))):t.$swal({icon:"error",title:"Problemas al hacer cierre.",showConfirmButton:!1,timer:1500})}))}else this.$swal({icon:"error",title:"No puede dejar campos en blanco",showConfirmButton:!1,timer:1500})},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}}},mounted:function(){var t=this;g["a"].$on("changeBranch",(function(e){t.getBranch()}))},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},w=C,x=a("2877"),_=Object(x["a"])(w,s,n,!1,null,null,null);e["default"]=_.exports},a55b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[t.ifStart?a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card bg-secondary shadow border-0"},[a("div",{staticClass:"card-body px-lg-5 pt-0 pb-4"},[t._m(0),a("div",{staticClass:"stepsBar"},[a("a-steps",[a("a-step",{attrs:{status:t.status.branch,title:"Sucursal"}},[a("a-icon",{attrs:{slot:"icon",type:"process"==t.status.branch?"loading":"shop"},slot:"icon"})],1),a("a-step",{attrs:{status:t.status.date,title:"Agenda"}},[a("a-icon",{attrs:{slot:"icon",type:"process"==t.status.date?"loading":"calendar"},slot:"icon"})],1),a("a-step",{attrs:{status:t.status.sale,title:"Ventas"}},[a("a-icon",{attrs:{slot:"icon",type:"process"==t.status.sale?"loading":"credit-card"},slot:"icon"})],1),a("a-step",{attrs:{status:t.status.final,title:"Paso final"}},[a("a-icon",{attrs:{slot:"icon",type:"process"==t.status.final?"loading":"smile-o"},slot:"icon"})],1)],1)],1),a("div",{staticClass:"stepsBox"},["branch"==t.process?a("div",{staticClass:"branch"},[a("h1",{staticClass:"text-uppercase text-center mb-4 mt-1"},[t._v("\n                            ¡Bienvenido!\n                        ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Este sería el nombre de su primera sucursal, de tener mas puede registrarla ya pasado este registro inicial.")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.05em"},attrs:{type:"question-circle"}})],2),a("label",{staticClass:"ml-2",attrs:{for:"credentials"}},[t._v("\n                                    Nombre de la sucursal\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Nombre de la sucursal","addon-left-icon":"ni ni-shop",valid:t.modelStart.businessName.length>=4},model:{value:t.modelStart.businessName,callback:function(e){t.$set(t.modelStart,"businessName",e)},expression:"modelStart.businessName"}})],1),a("div",{staticClass:"col-md-6 col-sm-12 row pr-0"},[a("label",{staticClass:"ml-4 mb-0 pb-0 w-100",staticStyle:{"margin-bottom":"-20px !important"},attrs:{for:"credentials"}},[t._v("\n                                    Número de contacto\n                                ")]),a("div",{staticClass:"col-12 pl-3 pr-0 mt-0 pt-0"},[a("VuePhoneNumberInput",{attrs:{"default-country-code":"CL",translations:{countrySelectorLabel:"Código de país",countrySelectorError:"Elije un país",phoneNumberLabel:"Número de teléfono",example:"Ejemplo :"}},on:{update:function(e){t.phoneData=e}},model:{value:t.modelStart.businessPhone,callback:function(e){t.$set(t.modelStart,"businessPhone",e)},expression:"modelStart.businessPhone"}})],1)]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("a-tooltip",[a("template",{slot:"title"},[t._v("\n                                        Debe ser un correo valido\n                                    ")]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.05em"},attrs:{type:"question-circle"}})],2),a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                    Correo\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Correo de la sucursal","addon-left-icon":"ni ni-email-83",valid:t.verifyEmailVar},on:{keyup:function(e){return t.verifyEmail()}},model:{value:t.modelStart.email,callback:function(e){t.$set(t.modelStart,"email",e)},expression:"modelStart.email"}})],1),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Luego de crear la sucursal podras agregar tu logo en configuraciones")])]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2",attrs:{for:"branch"}},[t._v("\n                                        Logo de la sucursal\n                                    ")]),a("br"),a("input",{ref:"file",staticClass:"form-control input-group-alternative",attrs:{type:"file",id:"fileProfile",disabled:"",placeholder:"seleccione logo"},on:{change:function(e){return t.handleFileUpload()}}})])],2),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"credentials"}},[t._v("\n                                    Dirección del local\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Dirección","addon-left-icon":"fa fa-location-arrow",valid:t.modelStart.businessLocation.length>=2},model:{value:t.modelStart.businessLocation,callback:function(e){t.$set(t.modelStart,"businessLocation",e)},expression:"modelStart.businessLocation"}})],1),a("div",{staticClass:"col-md-6 col-sm-12"},[a("label",{staticClass:"ml-2 w-100",attrs:{for:"credentials"}},[t._v("\n                                    Tipo de negocio\n                                ")]),a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%",height:"43px"},attrs:{"show-search":"",placeholder:"Seleccionar negocio","option-filter-prop":"children",size:"large","filter-option":t.filterOption},on:{change:t.handleChange},model:{value:t.modelStart.businessType,callback:function(e){t.$set(t.modelStart,"businessType",e)},expression:"modelStart.businessType"}},[a("a-select-option",{attrs:{value:"Spa de uñas"}},[t._v("\n                                        Spa de uñas\n                                    ")]),a("a-select-option",{attrs:{value:"Barberia"}},[t._v("\n                                        Barberia\n                                    ")]),a("a-select-option",{attrs:{value:"Peluqueria"}},[t._v("\n                                        Peluquería\n                                    ")])],1)],1)],1),a("base-button",{staticClass:"float-right mt-2",attrs:{outline:"",type:"default"},on:{click:function(e){return t.nextStep("branch")}}},[t._v("\n                            Siguiente\n                        ")])],1):"date"==t.process?a("div",{staticClass:"data"},[a("h1",{staticClass:"text-uppercase text-center"},[t._v("\n                            Horario\n                        ")]),a("hr",{staticClass:"w-50"}),a("h3",{staticClass:"text-weigth-bold text-center"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Seleccione los días y horarios de apertura y cierre de su negocio.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Configura tu horario\n                        ")],1),a("div",{staticClass:"row pl-8 pr-4"},[a("div",{staticClass:"col-2"},[a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.monday,size:"sm"},on:{click:function(e){return t.salectDay("monday")}}},[t._v("\n                                    Lunes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.tuesday,size:"sm"},on:{click:function(e){return t.salectDay("tuesday")}}},[t._v("\n                                    Martes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.wednesday,size:"sm"},on:{click:function(e){return t.salectDay("wednesday")}}},[t._v("\n                                    Miércoles\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.thursday,size:"sm"},on:{click:function(e){return t.salectDay("thursday")}}},[t._v("\n                                    Jueves\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.friday,size:"sm"},on:{click:function(e){return t.salectDay("friday")}}},[t._v("\n                                    Viernes\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.saturday,size:"sm"},on:{click:function(e){return t.salectDay("saturday")}}},[t._v("\n                                    Sábado\n                                ")]),a("base-button",{staticClass:"mt-2 w-100",attrs:{type:t.days.sunday,size:"sm"},on:{click:function(e){return t.salectDay("sunday")}}},[t._v("\n                                    Domingo\n                                ")])],1),a("div",{staticClass:"col-10"},[a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[1].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[1].start,callback:function(e){t.$set(t.modelStart.blockHour[1],"start",e)},expression:"modelStart.blockHour[1].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[1].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[1].end,callback:function(e){t.$set(t.modelStart.blockHour[1],"end",e)},expression:"modelStart.blockHour[1].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[2].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[2].start,callback:function(e){t.$set(t.modelStart.blockHour[2],"start",e)},expression:"modelStart.blockHour[2].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[2].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[2].end,callback:function(e){t.$set(t.modelStart.blockHour[2],"end",e)},expression:"modelStart.blockHour[2].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[3].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[3].start,callback:function(e){t.$set(t.modelStart.blockHour[3],"start",e)},expression:"modelStart.blockHour[3].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[3].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[3].end,callback:function(e){t.$set(t.modelStart.blockHour[3],"end",e)},expression:"modelStart.blockHour[3].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[4].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[4].start,callback:function(e){t.$set(t.modelStart.blockHour[4],"start",e)},expression:"modelStart.blockHour[4].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[4].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[4].end,callback:function(e){t.$set(t.modelStart.blockHour[4],"end",e)},expression:"modelStart.blockHour[4].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[5].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[5].start,callback:function(e){t.$set(t.modelStart.blockHour[5],"start",e)},expression:"modelStart.blockHour[5].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[5].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[5].end,callback:function(e){t.$set(t.modelStart.blockHour[5],"end",e)},expression:"modelStart.blockHour[5].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[6].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[6].start,callback:function(e){t.$set(t.modelStart.blockHour[6],"start",e)},expression:"modelStart.blockHour[6].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[6].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[6].end,callback:function(e){t.$set(t.modelStart.blockHour[6],"end",e)},expression:"modelStart.blockHour[6].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[0].status,placeholder:"Desde"},model:{value:t.modelStart.blockHour[0].start,callback:function(e){t.$set(t.modelStart.blockHour[0],"start",e)},expression:"modelStart.blockHour[0].start"}},t._l(t.fromArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1),a("a-select",{staticClass:"mx-2 mt-1 input-group-alternative",staticStyle:{width:"40%"},attrs:{disabled:1!=t.modelStart.blockHour[0].status,placeholder:"Hasta"},model:{value:t.modelStart.blockHour[0].end,callback:function(e){t.$set(t.modelStart.blockHour[0],"end",e)},expression:"modelStart.blockHour[0].end"}},t._l(t.toArray,(function(e){return a("a-select-option",{key:e},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),1)],1)]),a("base-button",{staticClass:"float-left mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.prevStep("date")}}},[t._v("\n                            Anterior\n                        ")]),a("base-button",{staticClass:"float-right mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.nextStep("date")}}},[t._v("\n                            Siguiente\n                        ")])],1):"sale"==t.process?a("div",{staticClass:"data"},[a("h1",{staticClass:"text-uppercase text-center"},[t._v("\n                            Tipos de pago\n                        ")]),a("hr",{staticClass:"w-50"}),a("h3",{staticClass:"text-weigth-bold text-center"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Para registrar un método de pago debes escribirlo, darle click en "),a("b",[t._v("ingresar")]),t._v(" o presionando la tecla "),a("b",[t._v("enter")]),t._v(".")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Crea tus tipos de pago\n                        ")],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("label",{attrs:{for:"currency"}},[t._v("\n                                    Escriba su tipo de pago\n                                ")]),a("div",{staticClass:"row pr-2"},[a("div",{staticClass:"col-10 pr-0"},[a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Tipo de pago","addon-left-icon":"fa fa-plus"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.insertTypePay(e)}},model:{value:t.typePay,callback:function(e){t.typePay=e},expression:"typePay"}})],1),a("div",{staticClass:"col-2"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Ingresar método de pago.")])]),a("base-button",{staticClass:"p-2 px-3 mt-1",attrs:{outline:"",type:"default"},on:{click:t.insertTypePay}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"plus"}})],1)],2)],1)]),a("label",{staticClass:"mt-4",attrs:{for:"currency"}},[t._v("\n                                    Seleccione su moneda local\n                                ")]),a("a-select",{staticClass:"input-group-alternative",staticStyle:{width:"100%",height:"43px"},attrs:{"default-value":"CLP",size:"large"},on:{change:t.selectCurrency}},[a("a-select-option",{attrs:{value:"USD"}},[t._v("\n                                        USD\n                                    ")]),a("a-select-option",{attrs:{value:"EUR"}},[t._v("\n                                        EUR\n                                    ")]),a("a-select-option",{attrs:{value:"CLP"}},[t._v("\n                                        CLP\n                                    ")]),a("a-select-option",{attrs:{value:"COP"}},[t._v("\n                                        COP\n                                    ")]),a("a-select-option",{attrs:{value:"ARG"}},[t._v("\n                                        ARG\n                                    ")]),a("a-select-option",{attrs:{value:"VES"}},[t._v("\n                                        VES\n                                    ")])],1)],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("p",[t._v("No se han agregado metodos de pago")])],1)]},proxy:!0}],null,!1,1870219394)},[a("div",{staticClass:"col-md-8 mt-4",staticStyle:{overflow:"hidden","overflow-y":"scroll","max-height":"200px"}},[a("a-list",{attrs:{size:"small",bordered:"","data-source":t.modelStart.typesPay},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{},[t._v("\n                                            "+t._s(e)+" \n                                            "),"Efectivo"!=e?a("base-button",{staticClass:"float-right",staticStyle:{"margin-top":"-3px"},attrs:{outline:"",type:"default",size:"sm"},on:{click:function(e){return t.removeTypePay(s)}}},[a("i",{staticClass:"fa fa-times"})]):t._e()],1)}}],null,!1,3305845955)})],1)])],1),a("base-button",{staticClass:"float-left mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.prevStep("sale")}}},[t._v("\n                            Anterior\n                        ")]),a("base-button",{staticClass:"float-right mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.nextStep("sale")}}},[t._v("\n                            Siguiente\n                        ")])],1):"final"==t.process?a("div",{staticClass:"data"},[a("h1",{staticClass:"text-uppercase text-center"},[t._v("\n                            Usuario de ingreso\n                        ")]),a("hr",{staticClass:"w-50"}),a("h3",{staticClass:"text-weigth-bold text-center"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Registra los datos con los que accederas al sistema.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                            Crear usuario de ingreso\n                        ")],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("label",{attrs:{for:"first_name"}},[t._v("\n                                    Nombres\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Nombres","addon-left-icon":"ni ni-circle-08",valid:t.modelStart.first_name.length>=3},model:{value:t.modelStart.first_name,callback:function(e){t.$set(t.modelStart,"first_name",e)},expression:"modelStart.first_name"}})],1),a("div",{staticClass:"col-md-4"},[a("label",{attrs:{for:"last_name"}},[t._v("\n                                    Apellidos\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Apellidos","addon-left-icon":"ni ni-circle-08",valid:t.modelStart.last_name.length>=3},model:{value:t.modelStart.last_name,callback:function(e){t.$set(t.modelStart,"last_name",e)},expression:"modelStart.last_name"}})],1),a("div",{staticClass:"col-md-4"},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Introducir las credenciales otorgadas. De no poseerse, comuníquese con soporte técnico.")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),a("label",{staticClass:"ml-2",attrs:{for:"credentials"}},[t._v("\n                                    Credencial de ingreso\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Credencial","addon-left-icon":"ni ni-key-25",valid:20==t.modelStart.credential.length},model:{value:t.modelStart.credential,callback:function(e){t.$set(t.modelStart,"credential",e)},expression:"modelStart.credential"}})],1),a("div",{staticClass:"col-md-6"},[a("label",{attrs:{for:"email"}},[t._v("\n                                    Correo\n                                ")]),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Correo",autocomplete:"off","addon-left-icon":"ni ni-email-83",valid:t.validEmail()},model:{value:t.modelStart.email,callback:function(e){t.$set(t.modelStart,"email",e)},expression:"modelStart.email"}})],1),a("div",{staticClass:"col-md-6 row pr-0"},[a("div",{staticClass:"col-10 pr-0"},[a("label",{attrs:{for:"password"}},[a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Su contraseña debe contener más de 8 caracteres.")])]),a("a-icon",{staticClass:"mr-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em"},attrs:{type:"question-circle"}})],2),t._v("\n                                        Contraseña\n                                    ")],1),a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Contraseña",autocomplete:"off",type:t.typePass,"addon-left-icon":"fa fa-unlock-alt",valid:t.modelStart.password.length>8},model:{value:t.modelStart.password,callback:function(e){t.$set(t.modelStart,"password",e)},expression:"modelStart.password"}})],1),a("div",{staticClass:"col-2 pr-0"},[a("base-button",{staticStyle:{"margin-top":"30px",float:"right"},attrs:{outline:"",type:"default"},on:{click:t.viewPass}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"eye"}})],1)],1)])]),a("base-button",{staticClass:"float-left mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.prevStep("final")}}},[t._v("\n                            Anterior\n                        ")]),a("base-button",{staticClass:"float-right mt-3",attrs:{outline:"",type:"default"},on:{click:function(e){return t.finishProcess()}}},[t._v("\n                            Finalizar\n                        ")])],1):t._e()])])]),t._m(1)]):a("div",{staticClass:"col-lg-5 col-md-7"},[a("div",{staticClass:"card bg-secondary shadow border-0"},[a("div",{staticClass:"card-body px-lg-5 py-lg-5"},[t._m(2),0==t.loading?a("form",{staticClass:"mt-3",attrs:{role:"form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 p-1"},[a("base-input",{staticClass:"input-group-alternative w-100 mt-4 mb-3",attrs:{placeholder:"Correo","addon-left-icon":"ni ni-email-83"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}})],1),a("div",{staticClass:"col-10 p-1"},[a("base-input",{staticClass:"input-group-alternative",attrs:{placeholder:"Contraseña",type:t.typePass,"addon-left-icon":"ni ni-lock-circle-open"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),a("div",{staticClass:"col-2 p-1"},[a("base-button",{staticStyle:{float:"right"},attrs:{outline:"",type:"default"},on:{click:t.viewPass}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.4em"},attrs:{type:"eye"}})],1)],1)]),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-2",attrs:{type:"default"},on:{click:function(e){return t.login()}}},[t._v("Ingresar")]),a("br"),a("a",{on:{click:function(e){t.modals.modal2=!0}}},[a("dt",[t._v("¿Has olvidado la contraseña?")])])],1)]):a("center",[a("a-spin",{staticClass:"mx-auto my-5 py-5"})],1)],1)]),t._m(3)]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-4","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("a-icon",{staticStyle:{"font-size":"10em","margin-bottom":"30px"},attrs:{type:"lock"}}),a("h3",[t._v("¿Tienes problemas para entrar?")]),a("p",[a("em",[t._v("Introduce tu correo y te enviaremos un enlace para que vuelvas a entrar a tu cuenta.")])])],1)],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Correo electronico registrado","addon-left-icon":"ni ni-single-copy-04"},model:{value:t.emailRenew,callback:function(e){t.emailRenew=e},expression:"emailRenew"}}),a("div",{staticClass:"text-center"},[a("base-button",{attrs:{type:"primary",disabled:!t.emailRenew.includes("@")},on:{click:t.SendNewPass}},[t._v("Enviar enlace de acceso")])],1)],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-wrapper text-center"},[a("span",{staticClass:"mb-1"},[a("img",{staticStyle:{width:"30%"},attrs:{src:"img/brand/syswa-gestion.png"}})]),a("br"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-6"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-wrapper text-center mb-4"},[a("span",{staticClass:"mb-5"},[a("img",{staticStyle:{width:"30%"},attrs:{src:"img/brand/syswa-isotipo.png"}})]),a("br"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-6"})])}],i=(a("a481"),a("7514"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("bc3a")),r=a.n(o),l=a("41cb"),c=a("a5e9"),d=a.n(c),u=a("e366"),m=a("04e1"),p=a.n(m),f=a("7bec"),h=a.n(f),g=(a("4413"),a("bb36")),v={mixins:[g["a"]],name:"login",components:{VuePhoneNumberInput:h.a},data:function(){return{ifStart:!1,phoneData:{isValid:!1},days:{monday:"danger",tuesday:"danger",wednesday:"danger",thursday:"danger",friday:"danger",saturday:"danger",sunday:"danger"},status:{branch:"process",date:"wait",sale:"wait",final:"wait"},verifyEmailVar:!1,process:"branch",typePass:"password",typePay:"",modelStart:{email:"",password:"",first_name:"",last_name:"",credential:"",branch:"",businessName:"",businessPhoneCode:"+56",businessPhone:"",businessType:"Seleccione",businessLocation:"",blockHour:[{day:0,start:"10:00",end:"20:00",status:!1,time:0},{day:1,start:"10:00",end:"20:00",status:!1,time:0},{day:2,start:"10:00",end:"20:00",status:!1,time:0},{day:3,start:"10:00",end:"20:00",status:!1,time:0},{day:4,start:"10:00",end:"20:00",status:!1,time:0},{day:5,start:"10:00",end:"20:00",status:!1,time:0},{day:6,start:"10:00",end:"20:00",status:!1,time:0}],currency:"CLP",typesPay:["Efectivo"]},fromArray:["6:00","6:30","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00"],toArray:["12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00"],model:{email:"",password:""},configHeader:{headers:{"x-database-connect":d.a.database}},modals:{modal:!1,modal2:!1,message:"",icon:"",type:""},emailRenew:"",loading:!1}},beforeCreate:function(){localStorage.removeItem("userToken"),localStorage.removeItem("firstname"),localStorage.removeItem("lastname"),localStorage.removeItem("image"),localStorage.removeItem("email"),localStorage.removeItem("imageUser"),localStorage.removeItem("status")},created:function(){this.getBranches()},methods:{selectCurrency:function(t){this.currency=t},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},viewPass:function(){this.typePass="password"==this.typePass?"":"password"},verifyEmail:function(){this.modelStart.email.split("@")[1]&&this.modelStart.email.split("@")[1].split(".")[0]?this.verifyEmailVar=!0:this.verifyEmailVar=!1,console.log(this.verifyEmailVar)},calculatedHour:function(){var t=!0,e=!1,a=void 0;try{for(var s,n=this.modelStart.blockHour[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var i,o,r,l=s.value;l.status&&(i=60*parseInt(l.end.split(":")[0]-parseInt(l.start.split(":")[0])),o=parseInt(l.start.split(":")[1])-parseInt(l.end.split(":")[1]),r=i+o,l.time=r)}}catch(c){e=!0,a=c}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}},handleFileUpload:function(){this.file=this.$refs.file.files[0]},finishProcess:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.calculatedHour(),!(this.modelStart.first_name.length>=4&&this.modelStart.last_name.length>=4&&20==this.modelStart.credential.length&&this.validEmail()&&this.modelStart.password.length>8)){t.next=52;break}return t.prev=2,t.next=5,r.a.post(d.a.endpointTarget+"/branches/createBranchCertificate",{branch:this.modelStart.businessName,secretKey:this.modelStart.credential},this.configHeader);case 5:if(e=t.sent,console.log(e.data.status),"ok"!=e.data.status){t.next=45;break}return t.prev=8,a=new FormData,a.append("image",this.file),{headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken,"x-database-connect":d.a.database}},t.prev=12,t.next=15,r.a.post(d.a.endpointTarget+"/configurations/createConfigCertificate",{branch:e.data.data._id,secretKey:this.modelStart.credential,blockHour:this.modelStart.blockHour,businessName:this.modelStart.businessName,businessPhone:this.phoneData,email:this.modelStart.email,route:d.a.url,file:"",businessType:this.modelStart.businessType,businessLocation:this.modelStart.businessLocation,typesPay:this.modelStart.typesPay,currency:this.modelStart.currency},this.configHeader);case 15:if(s=t.sent,"ok"!=s.data.status){t.next=35;break}return t.next=19,r.a.post(d.a.endpointTarget+"/users/createUserCertificate",{branch:e.data.data._id,secretKey:this.modelStart.credential,first_name:this.modelStart.first_name,last_name:this.modelStart.last_name,email:this.modelStart.email,password:this.modelStart.password},this.configHeader);case 19:if(n=t.sent,!n){t.next=35;break}return t.next=23,r.a.post(d.a.endpointTarget+"/configurations/addFirstProfile",{secretKey:this.modelStart.credential},this.configHeader);case 23:return t.sent,this.$swal({type:"success",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:1500}),t.prev=25,t.next=28,r.a.post(d.a.endpointTarget+"/mails/welcome",{firstName:this.modelStart.first_name,email:this.modelStart.email},this.configHeader);case 28:t.sent,t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](25),console.log(t.t0);case 34:setTimeout((function(){location.reload()}),2e3);case 35:t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](12),console.log(t.t1);case 40:t.next=45;break;case 42:t.prev=42,t.t2=t["catch"](8),console.log(t.t2);case 45:t.next=50;break;case 47:t.prev=47,t.t3=t["catch"](2),console.log(t.t3);case 50:t.next=53;break;case 52:this.$swal({type:"error",icon:"error",title:"Debe llenar los campos correctamente.",showConfirmButton:!1,timer:1500});case 53:case"end":return t.stop()}}),t,this,[[2,47],[8,42],[12,37],[25,31]])})));function e(){return t.apply(this,arguments)}return e}(),validEmail:function(){var t=this.modelStart.email.split("@");return t.length>1&&(console.log(t[1].includes(".")),t[1].includes("."))},handleChange:function(t){this.modelStart.businessType=t},insertTypePay:function(){var t=this;if(this.modelStart.typesPay.length<8)if(this.typePay.length>4){var e=this.modelStart.typesPay.find((function(e){return e==t.typePay}));console.log(e),void 0==e?(this.modelStart.typesPay.push(this.typePay),this.typePay=""):this.$swal({icon:"error",title:"Tipo de pago duplicado.",showConfirmButton:!1,timer:1500})}else this.typePay.length<4?this.$swal({icon:"error",title:"El método de pago debe estar compuesto por mas de 4 caracteres",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Debe llenar el tipo de pago",showConfirmButton:!1,timer:1500});else this.$swal({icon:"error",title:"No puede ingresar mas de 8 métodos de pago.",showConfirmButton:!1,timer:1500})},alertsMessages:function(t){this.$swal({icon:"info",title:t,showConfirmButton:!0})},removeTypePay:function(t){this.modelStart.typesPay.splice(t,1)},salectDay:function(t){"monday"==t?(this.modelStart.blockHour[1].status="success"!=this.days.monday,this.days.monday="success"==this.days.monday?"danger":"success"):"tuesday"==t?(this.modelStart.blockHour[2].status="success"!=this.days.tuesday,this.days.tuesday="success"==this.days.tuesday?"danger":"success"):"wednesday"==t?(this.modelStart.blockHour[3].status="success"!=this.days.wednesday,this.days.wednesday="success"==this.days.wednesday?"danger":"success"):"thursday"==t?(this.modelStart.blockHour[4].status="success"!=this.days.thursday,this.days.thursday="success"==this.days.thursday?"danger":"success"):"friday"==t?(this.modelStart.blockHour[5].status="success"!=this.days.friday,this.days.friday="success"==this.days.friday?"danger":"success"):"saturday"==t?(this.modelStart.blockHour[6].status="success"!=this.days.saturday,this.days.saturday="success"==this.days.saturday?"danger":"success"):"sunday"==t&&(this.modelStart.blockHour[0].status="success"!=this.days.sunday,this.days.sunday="success"==this.days.sunday?"danger":"success")},nextStep:function(t){if("branch"==t)this.modelStart.businessName.length>=4&&this.phoneData.isValid&&this.modelStart.businessLocation.length>=2&&"Seleccione"!=this.modelStart.businessType&&this.verifyEmailVar?(this.status.branch="finish",this.status.date="process",this.process="date"):this.verifyEmailVar?0==this.phoneData.isValid?this.$swal({icon:"error",title:"Debe escribir un número de teléfono valido",showConfirmButton:!1,timer:1500}):this.modelStart.businessLocation.length<2?this.$swal({icon:"error",title:"La dirección debe contener más de 2 caractéres",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"Llene todos los campos.",showConfirmButton:!1,timer:1500}):this.$swal({icon:"error",title:"El correo es invalido",showConfirmButton:!1,timer:1500}),console.log(this.modelStart.businessType);else if("date"==t){var e=this.modelStart.blockHour.find((function(t){return 1==t.status}));console.log(e),void 0!=e?(this.status.date="finish",this.status.sale="process",this.process="sale"):this.$swal({icon:"error",title:"Debe seleccionar mínimo un día.",showConfirmButton:!1,timer:1500})}else"sale"==t?this.modelStart.typesPay.length>0?(this.status.sale="finish",this.status.final="process",this.process="final"):this.$swal({icon:"error",title:"Debe crear mínimo un tipo de pago.",showConfirmButton:!1,timer:1500}):"final"==t&&(this.status.branch="finish")},formatPhone:function(){var t=this.modelStart.businessPhone.replace(/[^\d]/g,"");9==t.length&&(t=t.replace(/(\d{1})(\d{4})/,"$1-$2-")),this.modelStart.businessPhone=t},prevStep:function(t){"date"==t?(this.status.branch="process",this.status.date="wait",this.process="branch"):"sale"==t?(this.status.date="process",this.status.sale="wait",this.process="date"):"final"==t&&(this.status.sale="process",this.status.final="wait",this.process="sale")},getBranches:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/branches/count",this.configHeader);case 3:e=t.sent,0==e.data.data&&(this.ifStart=!0),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),login:function(){var t=this;this.loading=!0,r.a.post(d.a.endpointTarget+"/users/login",{email:this.model.email,password:this.model.password},this.configHeader).then((function(e){if("pass incorrecto"==e.data.error||"User does not exist"==e.data.error)t.$swal({type:"error",title:"Usuario o Contraseña incorrecta",showConfirmButton:!1,timer:1500}),t.loading=!1;else{localStorage.setItem("userToken",e.data.token),t.email="",t.password="";var a=localStorage.userToken,s=p()(a);localStorage.setItem("firstname",s.first_name),localStorage.setItem("_id",s._id),localStorage.setItem("lastname",s.last_name),localStorage.setItem("email",s.email),localStorage.setItem("imageUser",s.userImage),localStorage.setItem("showNav",!0),localStorage.setItem("status",s.status),l["a"].push({path:"/Agendamiento"}),t.emitMethod(s.status)}})).catch((function(e){t.$swal({type:"error",title:"Problemas de conexión",showConfirmButton:!1,timer:1500}),t.loading=!1}))},emitMethod:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:u["a"].$emit("loggedin",e),localStorage.setItem("logged-in",e);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),SendNewPass:function(){var t=this;""==this.emailRenew?(this.modals={modal:!0,message:"Debe llenar el dato de correo",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal:!1,modal2:!0,message:"",icon:"",type:""}}),1500)):r.a.post(d.a.endpointTarget+"/users/sendNewPass",{email:this.emailRenew}).then((function(e){"ok"==e.data.status?(t.modals={modal:!0,message:"Se le envio un correo, con la contraseña provicional",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal:!1,modal2:!1,message:"",icon:"",type:""}}),2500),t.emailRenew=""):(t.modals={modal:!0,message:"El correo no esta registrado",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal:!1,modal2:!0,message:"",icon:"",type:""}}),2e3))}))}}},b=v,y=a("2877"),C=Object(y["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},ac52:function(t,e,a){"use strict";var s=a("17d3"),n=a.n(s);n.a},af7c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/sales.png)","background-size":"cover","background-position":"center 65%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Ventas")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada al registro de las ventas de su negocio, podrás filtrar y exportar en excel dichas ventas.")])]),a("div",{staticClass:"float-right mt-6"},[a("div",{staticClass:"float-right widthDiv"},[a("label",{staticClass:"text-white",attrs:{for:"date"}},[t._v("Busque por fecha")]),a("br"),a("a-range-picker",{ref:"datePick",staticClass:"rangeInput",staticStyle:{width:"60%"},attrs:{disabled:1!=t.validRoute("ventas","filtrar"),ranges:{Hoy:[t.moment(),t.moment()],"Este mes":[t.moment(),t.moment().endOf("month")]},locale:t.es_ES,placeholder:["Desde","Hasta"]},on:{change:t.selectDate}}),t.validRoute("ventas","filtrar")?a("base-button",{staticClass:"mr-2 ml-2",staticStyle:{"margin-top":"-5px"},attrs:{disabled:!(t.dateFind.length>0),size:"sm",type:"success"},on:{click:t.filterSale}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.8em"},attrs:{type:"search"}})],1):a("base-button",{staticClass:"mr-2 ml-2",staticStyle:{"margin-top":"-5px"},attrs:{disabled:"",size:"sm",type:"success"}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.8em"},attrs:{type:"search"}})],1),a("base-button",{staticClass:"mr-2",staticStyle:{"margin-top":"-5px"},attrs:{disabled:!t.inspectorFilter,size:"sm",type:"secondary"},on:{click:t.getSales}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.8em"},attrs:{type:"undo"}})],1),t.validRoute("ventas","filtrar")?a("base-button",{staticClass:"excel-generate",staticStyle:{"margin-top":"-5px"},attrs:{title:"Generar excel",size:"sm",type:"primary"},on:{click:function(e){t.modals.modal3=!0}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.8em"},attrs:{type:"file-excel"}})],1):t._e()],1)])])])]),a("a-modal",{staticClass:"modalReport",attrs:{width:"70%",footer:null,closable:!0},model:{value:t.modals.modal1,callback:function(e){t.$set(t.modals,"modal1",e)},expression:"modals.modal1"}},[a("div",{staticClass:"mx-2",attrs:{id:"htmlPrint"}},[null!=t.dataSale?[a("h2",[t._v("Detalle de la venta (ID: "+t._s(t.dataSale.uuid)+") "),t.dataSale.status?t._e():a("b",[t._v("# Anulada")])]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Anular venta")])]),t.dataSale.status?a("base-button",{staticClass:"mr-2 float-right",attrs:{disabled:!t.validRoute("ventas","anular"),size:"sm",type:"warning"},on:{click:function(e){return t.cancelSale(t.dataSale._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.5em"},attrs:{type:"close-circle"}})],1):t._e()],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Imprimir reporte")])]),a("base-button",{staticClass:"mr-2 float-right",attrs:{disabled:!t.validRoute("ventas","reporte"),size:"sm",type:"secondary"},on:{click:function(e){return t.printReport(t.dataSale._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.5em"},attrs:{type:"printer"}})],1)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Enviar correo")])]),a("base-button",{staticClass:"mr-2 float-right",attrs:{disabled:!t.validRoute("ventas","correo"),size:"sm",type:"secondary"},on:{click:function(e){return t.sendSale(t.dataSale._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.5em"},attrs:{type:"mail"}})],1)],2)]:t._e(),null!=t.dataSale?[a("h3",[t._v("Resumen de pago")]),a("hr",{staticClass:"mt-0 mb-0"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Fecha")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatDate")(t.dataSale.createdAt)))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Cliente")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t.dataSale.client.firstName)+" "+t._s(t.dataSale.client.lastName))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Correo cliente")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t.dataSale.client.email))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Monto total")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatPrice")(t.dataSale.totals.total)))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Monto pagado")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatPrice")(t.dataSale.totals.totalPay)))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Vuelto")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatPrice")(-1*(t.dataSale.totals.total-t.dataSale.totals.totalPay))))])])]),a("h3",{staticClass:"mt-3"},[t._v("Abonos")]),a("hr",{staticClass:"mt-0 mb-0"}),t._l(t.dataSale.typesPay,(function(e){return a("div",{key:e.type,staticClass:"row"},[a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Fecha")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatDate")(t.dataSale.createdAt)))])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Medio de pago")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v("\n                            "+t._s(e.type)+"\n                        ")])]),a("div",{staticClass:"col-md-4 mt-2"},[a("label",{staticStyle:{"margin-bottom":"0px"},attrs:{for:"date"}},[a("b",[t._v("Total")])]),a("br"),a("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatPrice")(e.total)))])])])})),a("hr",{staticClass:"mt-3 mb-1"}),a("h3",{staticClass:"mt-3"},[t._v("ítems")]),a("hr",{staticClass:"mt-1 mb-0"}),a("a-table",{attrs:{columns:t.columnsReport,loading:t.progress,"data-source":t.dataSale.items,scroll:t.getScreen},scopedSlots:t._u([{key:"total-slot",fn:function(e,a){return[t._v("\n                        "+t._s(t._f("formatPrice")(a.totalItem))+"\n                    ")]}},{key:"dicount-slot",fn:function(e,a){return[t._v("\n                        "+t._s(a.discount)+" %\n                    ")]}},{key:"price-slot",fn:function(e,a){return[t._v("\n                        "+t._s(t._f("formatPrice")(a.price))+"\n                    ")]}},{key:"add-slot",fn:function(e,a){return["service"==a.type?[t._v("\n                            "+t._s(t._f("formatPrice")(a.additionalsTotal))+"\n                        ")]:[t._v("\n                            "+t._s(a.quantityProduct)+"\n                        ")]]}},{key:"type-slot",fn:function(e,s){return["service"==s.type?a("span",[t._v("Servicio, "+t._s(s.employe.name))]):a("span",[t._v("Producto")])]}}],null,!1,3451414057)})]:t._e()],2)]),a("modal",{attrs:{show:t.modals.modal3,"body-classes":"p-4","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Aplica filtros para tu reporte")])])],[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-2"},[a("label",{attrs:{for:"date"}},[t._v("Filtra por fecha")]),a("a-range-picker",{staticClass:"rangeInput",attrs:{locale:t.es_ES,disabled:1!=t.validRoute("ventas","filtrar"),ranges:{Hoy:[t.moment(),t.moment()],"Este mes":[t.moment(),t.moment().endOf("month")]}},on:{change:t.selectDateExcel}})],1),a("div",{staticClass:"col-md-12 mt-2"},[a("label",{attrs:{for:"lender"}},[t._v("¿Filtrar por cliente?")]),a("div",{on:{click:t.chooseClient}},[t.validLender?a("vue-single-select",{attrs:{options:t.clientNames,placeholder:"Clientes"},model:{value:t.clientSelect,callback:function(e){t.clientSelect=e},expression:"clientSelect"}}):a("vue-single-select",{staticClass:"bgcolor-danger",attrs:{options:t.clientNames,placeholder:"Clientes",disabled:""},model:{value:t.clientSelect,callback:function(e){t.clientSelect=e},expression:"clientSelect"}})],1)]),a("div",{staticClass:"col-md-12"},[a("center",[a("base-button",{attrs:{type:"default"},on:{click:function(e){return t.generateExcel()}}},[t._v(" Generar\n                        ")])],1)],1)])]],2),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Sucursal sin ventas registradas")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.progress,"data-source":t.sales,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                    Buscar\n                ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                    resetear\n                ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                    "+t._s(e)+"\n                ")]]}},{key:"client-slot",fn:function(e,a){return[t._v("\n                "+t._s(a.client.firstName)+" "+t._s(a.client.lastName)+"\n            ")]}},{key:"date-format",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatDate")(a.createdAt))+"\n            ")]}},{key:"localGain",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatPrice")(a.localGain))+"\n            ")]}},{key:"total",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatPrice")(a.totals.total))+"\n            ")]}},{key:"reportSale",fn:function(e,s){return[t.validRoute("ventas","detalle")?[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Ver detalles")])]),s.status?a("base-button",{attrs:{size:"sm",type:"default"},on:{click:function(e){return t.dataReport(s)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"file-pdf"}})],1):a("base-button",{attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.dataReport(s)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"file-pdf"}})],1)],2)]:[s.status?a("base-button",{attrs:{disabled:"",size:"sm",type:"default"}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"file-pdf"}})],1):a("base-button",{attrs:{disabled:"",size:"sm",type:"danger"}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"file-pdf"}})],1)]]}}])})],1),a("modal",{attrs:{show:t.modals.modal2,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])])],1)},n=[],i=(a("28a5"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=a("41cb"),c=a("a5e9"),d=a.n(c),u=a("e366"),m=a("12f9"),p=a("c38f"),f=a.n(p),h=(a("0952"),a("4984")),g=a("8e27"),v=a.n(g),b=a("04e1"),y=a.n(b),C=a("1146"),w=a.n(C),x=a("ef34"),_=a("feb7"),S=a.n(_),k=a("c1df"),A=a.n(k),P=(a("898b"),a("bb36")),D=new Date;A.a.locale("es");var E={mixins:[x["a"],P["a"]],components:{flatPicker:f.a,VueBootstrap4Table:m["a"]},data:function(){return{configHeader:{headers:{"x-database-connect":d.a.database,"x-access-token":localStorage.userToken}},progress:!0,auth:[],moment:A.a,socket:v()(d.a.endpointTarget),modals:{modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""},dates:{range:D.getDate()+"-"+(D.getMonth()+1)+"-"+D.getFullYear(),rangeExcel:D.getDate()+"-"+(D.getMonth()+1)+"-"+D.getFullYear()},configDatePicker:{allowInput:!0,mode:"range",dateFormat:"d-m-Y",locale:h["Spanish"]},es_ES:S.a,columnsReport:[{title:"Nombre",dataIndex:"item.name",key:"item.name",width:"15%"},{title:"Tipo",dataIndex:"type",key:"type",scopedSlots:{customRender:"type-slot"},width:"25%"},{title:"Precio",dataIndex:"price",key:"price",scopedSlots:{customRender:"price-slot"},width:"15%"},{title:"Adicional/Cantidad",dataIndex:"additionalsTotal",key:"additionalsTotal",scopedSlots:{customRender:"add-slot"},width:"20%"},{title:"Descuento",dataIndex:"discount",key:"discount",width:"10%",scopedSlots:{customRender:"dicount-slot"}},{title:"Total",dataIndex:"totalItem",key:"totalItem",scopedSlots:{customRender:"total-slot"},width:"15%"}],columns:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"date-format"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},ellipsis:!0},{title:"Cliente",dataIndex:"client",key:"client",ellipsis:!0,scopedSlots:{customRender:"client-slot"}},{title:"Ganacia local",dataIndex:"localGain",key:"localGain",ellipsis:!0,scopedSlots:{customRender:"localGain"},defaultSortOrder:"descend",sorter:function(t,e){return t.localGain-e.localGain}},{title:"Total",dataIndex:"totals.total",key:"totals.total",ellipsis:!0,scopedSlots:{customRender:"total"},defaultSortOrder:"descend",sorter:function(t,e){return t.total-e.total}},{title:"Detalle",dataIndex:"_id",key:"_id",ellipsis:!0,scopedSlots:{customRender:"reportSale"}}],sales:[],dataSale:null,inspectorFilter:!1,lenderSelect:"",lenderNames:[],clientSelect:"",clientNames:[],validLender:!0,validClient:!0,branch:"",branchName:"",dateFind:[],dateFindExcel:[]}},created:function(){this.getToken(),this.getBranch(),console.log(this.es_ES)},methods:{getToken:function(){var t=localStorage.userToken,e=y()(t);this.auth=e.access,this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.imgUser=localStorage.imgUser},getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.getClient(),this.getEmployes(),this.getSales()},selectDate:function(t,e){console.log(t,e),this.dateFind=t?e:[]},selectDateExcel:function(t,e){console.log(t,e),this.dateFindExcel=t?e:[]},sendSale:function(t){var e=this;r.a.get(d.a.endpointTarget+"/mails/salemail/"+t,this.configHeader).then((function(t){t&&e.$swal({icon:"success",title:"Enviado con éxito",showConfirmButton:!1,timer:1500})}))},getClient:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/clients",this.configHeader);case 3:for(e=t.sent,this.clientNames=[],a=0;a<e.data.data.length;a++)this.clientNames.push(e.data.data[a].firstName+" / "+e.data.data[a].email);t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),getEmployes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/employes/employesbybranch/"+this.branch,this.configHeader);case 3:if(e=t.sent,"ok"==e.data.status)for(this.lenderNames=[],a=0;a<e.data.data.length;a++)this.lenderNames.push(e.data.data[a].firstName);t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),filterSale:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.progress=!0,this.inspectorFilter=!0,t.prev=2,t.next=5,r.a.post(d.a.endpointTarget+"/sales/findSalesByDate",{branch:this.branch,dates:this.dateFind},this.configHeader);case 5:e=t.sent,console.log(e),"sales does exist"==e.data.status?(this.progress=!1,this.sales=[],this.$swal({icon:"error",title:"No se encontraron ventas",showConfirmButton:!1,timer:1500})):(this.progress=!1,this.sales=e.data.data),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}(),getSales:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.progress=!0,this.inspectorFilter=!1,$(".rangeInput .ant-calendar-picker-clear").click(),this.dateFind=[],t.prev=4,t.next=7,r.a.get(d.a.endpointTarget+"/sales/"+this.branch,this.configHeader);case 7:e=t.sent,"ok"==e.data.status?(this.sales=e.data.data,this.progress=!1):(this.sales=[],this.progress=!1),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](4),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 15:case"end":return t.stop()}}),t,this,[[4,11]])})));function e(){return t.apply(this,arguments)}return e}(),justName:function(t){if(t){for(var e=t.split(" / "),a="",s=0;s<e.length;s++)a=a+"\n "+e[s];return a}},dataReport:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.dataSale=e,console.log(this.dataSale),this.modals.modal1=!0;case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelSale:function(t){var e=this;this.$swal({title:"¿Desea anular la venta?",text:"No puede revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?r.a.put(d.a.endpointTarget+"/sales/"+t,{branch:e.branch},e.configHeader).then((function(t){"ok"==t.data.status?(e.$swal({icon:"success",title:"Venta anulada",showConfirmButton:!1,timer:1500}),e.getSales(),e.dataSale.status=!1,r.a.post(d.a.endpointTarget+"/notifications",{branch:e.branch,userName:e.firstNameUser+" "+e.lastNameUser,userImage:e.imgUser,detail:"Anuló una venta del día "+e.formatDate(e.dataSale.createdAt),link:"Ventas"},e.configHeader).then((function(t){console.log(t),"ok"==t.data.status&&e.socket.emit("sendNotification",t.data.data)}))):e.$swal({icon:"error",title:"Error para anular la venta",text:"Si persiste, contacte a soporte técnico",showConfirmButton:!0})})):e.$swal({icon:"info",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},generateExcel:function(){var t=this,e=this.dateFindExcel[0]+" a "+this.dateFindExcel[1];null==this.clientSelect&&(this.clientSelect=""),r.a.post(d.a.endpointTarget+"/sales/generateDataExcel",{rangeExcel:this.dateFindExcel,clientSelect:this.clientSelect.split(" / ")[1]?this.clientSelect.split(" / ")[1]:"",branch:this.branch},this.configHeader).then((function(a){if(console.log(a),"ok"==a.data.status){var s=w.a.utils.json_to_sheet(a.data.dataTable),n=w.a.utils.book_new();w.a.utils.book_append_sheet(n,s,"Datos"),w.a.writeFile(n,"Ventas del "+e+".xlsx"),t.clientSelect="",$(".rangeInput .ant-calendar-picker-clear").click(),t.modals.modal3=!1}else t.$swal({icon:"info",title:"No se encontraron ventas en las fechas seleccionadas",showConfirmButton:!1,timer:2e3})}))},chooseLender:function(){""==this.lenderSelect||null==this.lenderSelect?this.validLender=!0:this.validLender=!1},chooseClient:function(){""==this.clientSelect||null==this.clientSelect?this.validClient=!0:this.validClient=!1},printReport:function(t){var e="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\nwidth=0,height=0,left=-1000,top=-1000",a=window.open(d.a.url+"/reportPdf?id="+t,"_blank",e);a.focus()}},mounted:function(){var t=this;u["a"].$on("reloadSales",(function(e){t.getSales()})),u["a"].$on("changeBranch",(function(e){t.getBranch()}))},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},T=E,I=(a("4d8a"),a("2877")),B=Object(I["a"])(T,s,n,!1,null,null,null);e["default"]=B.exports},b41a:function(t,e,a){"use strict";var s=a("50dc"),n=a.n(s);n.a},bb2f:function(t,e,a){"use strict";e.__esModule=!0,e.concat=e.arrayIncludes=e.isArray=e.from=void 0,Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"===typeof e||"[object Function]"===t.call(e)},a=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},s=Math.pow(2,53)-1,n=function(t){return Math.min(Math.max(a(t),0),s)};return function(t){var a=this,s=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,o=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var r,l=n(s.length),c=e(a)?Object(new a(l)):new Array(l),d=0;while(d<l)r=s[d],c[d]=o?"undefined"===typeof i?o(r,d):o.call(i,r,d):r,d+=1;return c.length=l,c}}()),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),a=e.length>>>0;if("function"!==typeof t)throw new TypeError("predicate must be a function");var s=arguments[1],n=0;while(n<a){var i=e[n];if(t.call(s,i,n,e))return i;n++}}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var s=Array.from;e.from=s;var n=Array.isArray;e.isArray=n;var i=function(t,e){return-1!==t.indexOf(e)};e.arrayIncludes=i;var o=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return Array.prototype.concat.apply([],e)};e.concat=o},d097:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card bg-secondary shadow border-0"},[a("div",{staticClass:"card-body px-lg-5 py-lg-5"},[t._m(0),0==t.loading?a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"display-4"},[t._v("Syswa")])]),a("div",{staticClass:"row mt-2"},[a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Negocio: Syswa\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Fecha de creación: 20-05-2020\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Numero de empleados: 7\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Cantidad de servicios: 10\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Cierre del dia: "),a("span",{staticClass:"text-danger"},[t._v("No realizado")])])])],1),a("div",{staticClass:"row mt-4"},[a("base-button",{staticClass:"col-md-2 mx-auto",attrs:{icon:"ni ni-ui-04",type:"default"}},[t._v("Editar")]),a("base-button",{staticClass:"col-md-2 mx-auto",attrs:{icon:"ni ni-vector",type:"primary"}},[t._v("Adminsitrar")]),a("base-button",{staticClass:"col-md-2 mx-auto",attrs:{icon:"fas fa-trash",type:"danger"}},[t._v("Eliminar")]),a("base-button",{staticClass:"col-md-2 mx-auto",attrs:{icon:"ni ni-curved-next",type:"success"}},[t._v("Acceder")])],1)]),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"display-4"},[t._v("KKPrettynails")])]),a("div",{staticClass:"row mt-2"},[a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Negocio: KKPrettynails\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                        Nombre: Cristians Sanchez\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                        Empleado desde: 18-02-2018\n                                    ")])]),a("base-button",{staticClass:"col-5 mt-2 mx-auto",attrs:{type:"secondary"}},[a("div",[t._v("\n                                    Cargo: Prestador\n                                    ")])])],1),a("div",{staticClass:"row mt-4"},[a("base-button",{staticClass:"col-md-2 mx-auto",attrs:{icon:"ni ni-curved-next",type:"success"}},[t._v("Acceder")])],1)]),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-fat-add display-4"})]),a("h2",{staticClass:"text-center mt-2"},[t._v("Nuevo negocio")]),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-6"},[a("base-input",{attrs:{formClasses:"input-group-alternative",placeholder:"Nombre del negocio","addon-left-icon":"ni ni-shop"}})],1),a("div",{staticClass:"col-md-6"},[a("base-input",{attrs:{formClasses:"input-group-alternative",placeholder:"Ubicación","addon-left-icon":"ni ni-square-pin"}})],1),a("div",{staticClass:"col-md-6"},[a("base-input",{attrs:{formClasses:"input-group-alternative",placeholder:"Riff","addon-left-icon":"ni ni-briefcase-24"}})],1),a("div",{staticClass:"col-md-6"},[a("base-input",{attrs:{formClasses:"input-group-alternative",placeholder:"Otro dato","addon-left-icon":"ni ni-air-baloon"}})],1),a("base-button",{staticClass:"col-md-4 mx-auto",attrs:{icon:"ni ni-curved-next",type:"success"}},[t._v("Crear nuevo negocio")])],1)])],1)],1):a("center",[a("a-spin",{staticClass:"mx-auto my-5 py-5"})],1)],1)]),t._m(1)]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-4","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Confirme su correo")])])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Correo electronico registrado","addon-left-icon":"ni ni-single-copy-04"},model:{value:t.emailRenew,callback:function(e){t.emailRenew=e},expression:"emailRenew"}}),a("div",{staticClass:"text-center"},[a("base-button",{attrs:{type:"primary"},on:{click:t.SendNewPass}},[t._v("Enviar")])],1)],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-wrapper text-center mb-4"},[a("span",{staticClass:"mb-5"},[a("img",{staticStyle:{width:"30%"},attrs:{src:"img/brand/syswa-gestion.png"}})]),a("br"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-6"})])}],i=a("bc3a"),o=a.n(i),r=a("41cb"),l=a("a5e9"),c=a.n(l),d=a("e366"),u=a("04e1"),m=a.n(u),p={name:"login",data:function(){return{model:{email:"",password:""},modals:{modal:!1,modal2:!1,message:"",icon:"",type:""},emailRenew:"",loading:!1}},beforeCreate:function(){localStorage.removeItem("userToken"),localStorage.removeItem("nombre"),localStorage.removeItem("apellido"),localStorage.removeItem("image"),localStorage.removeItem("email"),localStorage.removeItem("imageUser"),localStorage.removeItem("status")},methods:{login:function(){var t=this;this.loading=!0,o.a.post(c.a.endpointTarget+"/users/login",{email:this.model.email,password:this.model.password}).then((function(e){if("pass incorrecto"==e.data.error)t.$swal({type:"error",title:"Contraseña incorrecta",showConfirmButton:!1,timer:1500}),t.loading=!1;else if("User does not exist"==e.data.error)t.$swal({type:"error",title:"No esta registrado",showConfirmButton:!1,timer:1500}),t.loading=!1;else{localStorage.setItem("userToken",e.data.token),t.email="",t.password="";var a=localStorage.userToken,s=m()(a);localStorage.setItem("nombre",s.first_name),localStorage.setItem("apellido",s.last_name),localStorage.setItem("imageUser",s.userImage),localStorage.setItem("showNav",!0),localStorage.setItem("_id",s._id),localStorage.setItem("status",s.status),r["a"].push({path:"/Agendamiento"}),console.log(s.access),t.emitMethod(s.status)}})).catch((function(e){t.$swal({type:"error",title:"Problemas de conexión",showConfirmButton:!1,timer:1500}),t.loading=!1}))},emitMethod:function(t){console.log(t),d["a"].$emit("loggedin",t),localStorage.setItem("logged-in",t)},SendNewPass:function(){var t=this;""==this.emailRenew?(this.modals={modal:!0,message:"Debe llenar el dato de correo",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal:!1,modal2:!0,message:"",icon:"",type:""}}),1500)):o.a.post(c.a.endpointTarget+"/users/sendNewPass",{email:this.emailRenew}).then((function(e){"ok"==e.data.status?(t.modals={modal:!0,message:"Se le envio un correo, con la contraseña provicional",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal:!1,modal2:!1,message:"",icon:"",type:""}}),2500),t.emailRenew=""):(t.modals={modal:!0,message:"El correo no esta registrado",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal:!1,modal2:!0,message:"",icon:"",type:""}}),2e3))}))}}},f=p,h=a("2877"),g=Object(h["a"])(f,s,n,!1,null,null,null);e["default"]=g.exports},d636:function(t,e,a){"use strict";a.r(e);var s,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pt-lg-5 pb-3 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/employeReport.png)","background-size":"cover","background-position":"center 35%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Reporte de "+t._s(t.nameLender))]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada al reporte de ventas y comisiones de empleados.")])]),a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",type:"warning"},on:{click:t.back}},[a("a-icon",{staticStyle:{"vertical-align":"1px","font-size":"1.4em"},attrs:{type:"rollback"}})],1),t.validRoute("empleados","cerrar ventas")?a("base-button",{staticClass:"float-right mt-7",attrs:{size:"sm",type:"danger"},on:{click:t.printReport}},[t._v("Cerrar ventas")]):a("base-button",{staticClass:"float-right mt-7",attrs:{size:"sm",disabled:"",type:"danger"}},[t._v("Cerrar ventas")]),t.validRoute("empleados","reportes")?a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",type:"success"},on:{click:function(e){t.modals.modal2=!0}}},[t._v("Datos avanzados")]):a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:"",type:"success"}},[t._v("Datos avanzados")])],1)])]),a("center",[a("h1",{staticClass:"display-2 pb-3 mb-3 hide text-center text-white"},[t._v("Reporte de cierre")])]),a("modal",{attrs:{show:t.modals.modal1,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 "}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-10% !important"}},[t._v("\n                    Datos del mes\n                ")])],[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("div",{staticClass:"description"},[a("base-button",{staticClass:"w-100 mb-1 mt-3",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Fecha")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.fecha))])],1),a("base-button",{staticClass:"w-100 mb-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Nombre")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.nameLender))])],1),a("base-button",{staticClass:"w-100 mb-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Adelantos")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(t.advancement)))])],1),a("base-button",{staticClass:"w-100 mb-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Bonos")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(t.lenderBonus)))])],1),a("base-button",{staticClass:"w-100 mb-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Comisión total")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(t.totalComission)))])],1),a("base-button",{staticClass:"w-100 mb-1",attrs:{type:"secondary"}},[a("span",{staticClass:"float-left"},[t._v("Total")]),a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".9em"},attrs:{type:"success"}},[t._v(t._s(t.formatPrice(t.totalComission+t.lenderBonus-t.advancement)))])],1)],1)])],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal3,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-25%"}},[a("h3",[t._v("Servicios")])])],[a("div",{staticClass:"m-2 w-100"},t._l(t.dataDetail,(function(e){return a("badge",{key:e.servicio,staticClass:"w-100 text-default",attrs:{type:"primary"}},[t._v(t._s(e.servicio))])})),1)]],2)],1),a("tabs",{staticClass:"flex-column flex-md-row inventory inventoryTabs",attrs:{fill:""}},[a("card",{staticClass:"tablesExpense",attrs:{shadow:""}},[a("tab-pane",[a("span",{staticClass:"p-2",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-shop"}),t._v("\n                    Ventas sin cerrar\n                ")]),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Empleado no posee ventas registradas")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.progress,"data-source":t.sales,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                Buscar\n                            ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                resetear\n                            ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                                "+t._s(e)+"\n                            ")]]}},{key:"date-format",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatDate")(a.createdAt))+"\n                        ")]}},{key:"commission",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatPrice")(parseFloat(a.commission)))+"\n                        ")]}},{key:"total",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatPrice")(a.total))+"\n                        ")]}},{key:"reportSale",fn:function(e,s){return[t.validRoute("ventas","detalle")?[a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("Anular venta")])]),a("base-button",{attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.nullSale(s.saleData._id,s.id,s.createdAt,s.saleData)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px","font-size":"1.3em"},attrs:{type:"stop"}})],1)],2)]:t._e()]}}])})],1)],1),a("tab-pane",[a("span",{staticClass:"p-2",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-calendar-grid-58"}),t._v("\n                    Historial de cierre\n                ")]),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Empleado sin historial.")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistory,loading:t.progress,"data-source":t.historyCloses,scroll:t.getScreen},scopedSlots:t._u([{key:"commission-slot",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatPrice")(a.commission))+"\n                        ")]}},{key:"advancement-slot",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatPrice")(a.advancement))+"\n                        ")]}},{key:"bonus-slot",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatPrice")(a.bonus))+"\n                        ")]}},{key:"format-date",fn:function(e,a){return[t._v("\n                            "+t._s(t._f("formatDate")(a.createdAt))+"\n                        ")]}},{key:"action-slot",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Ver informe")])]),a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(e){t.modals.modal4=!0,t.dataHistoryClosedReport=s}}})],2)]}}])})],1)],1)],1)],1),a("a-modal",{attrs:{width:"60%",closable:!0},model:{value:t.modals.modal4,callback:function(e){t.$set(t.modals,"modal4",e)},expression:"modals.modal4"}},[[a("h3",{staticClass:"text-center w-100"},[t._v("Informe de cierre")]),t.dataHistoryClosedReport.employe?[a("a-table",{attrs:{columns:t.columnsHistoryEmploye,"data-source":t.dataHistoryClosedReport.sales,scroll:t.getScreen},scopedSlots:t._u([{key:"date-format",fn:function(e,a){return[t._v("\n                        "+t._s(t._f("formatDate")(a.createdAt))+"\n                    ")]}},{key:"commission",fn:function(e,a){return[t._v("\n                        "+t._s(t._f("formatPrice")(parseFloat(a.commission)))+"\n                    ")]}},{key:"total",fn:function(e,a){return[t._v("\n                        "+t._s(t._f("formatPrice")(a.total))+"\n                    ")]}}],null,!1,2714772502)})]:t._e()],a("template",{slot:"footer"},[a("base-button",{attrs:{size:"sm",type:"primary"},on:{click:t.reportHistory}},[t._v("\n                Imprimir reporte\n            ")])],1)],2)],1)},i=[],o=a("bd86"),r=(a("6b54"),a("a481"),a("96cf"),a("3b8d")),l=a("bc3a"),c=a.n(l),d=(a("41cb"),a("a5e9")),u=a.n(d),m=a("04e1"),p=a.n(m),f=a("12f9"),h=a("4b70"),g=a.n(h),v=a("c38f"),b=a.n(v),y=a("8e27"),C=a.n(y),w=(a("0952"),a("ef34")),x=a("bb36"),_={mixins:[w["a"],x["a"]],components:{VueBootstrap4Table:f["a"],vueCustomScrollbar:g.a,flatPicker:b.a},data:function(){return{socket:C()(u.a.endpointTarget),auth:[],id:localStorage.getItem("idReportEmploye"),sales:[],salesTotal:[],dateInit:"",fecha:"",lenderBonuses:[],code:"",dataDetail:[],nameLender:"",totalComission:0,lenderBonus:0,advancement:"",totalSale:0,progress:!0,modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,message:"",icon:"",type:""},configDate:{allowInput:!0,minDate:new Date},dates:{simple:new Date},dataExpense:{reason:"",amount:0,valid:!1},bonus:!1,lendeAdvancements:[],columnsHistoryEmploye:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"date-format"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},ellipsis:!0},{title:"UUID de venta",dataIndex:"saleData.uuid",key:"saleData.uuid",scopedSlots:{customRender:"uuid-format"}},{title:"Cliente",dataIndex:"client",key:"client",ellipsis:!0,scopedSlots:{customRender:"client-slot"}},{title:"Servicio",dataIndex:"service",key:"service",ellipsis:!0,scopedSlots:{customRender:"service-slot"}},{title:"Comisión",dataIndex:"commission",key:"commission",ellipsis:!0,scopedSlots:{customRender:"commission"},defaultSortOrder:"descend",sorter:function(t,e){return t.commission-e.commission}},{title:"Total",dataIndex:"total",key:"totals.total",ellipsis:!0,scopedSlots:{customRender:"total"},defaultSortOrder:"descend",sorter:function(t,e){return t.total-e.total}}],historyCloses:[],dataHistoryClosedReport:{},columnsHistory:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"format-date"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}},{title:"Comisión",dataIndex:"commission",key:"commission",scopedSlots:{customRender:"commission-slot"}},{title:"Avances",dataIndex:"advancement",key:"advancement",scopedSlots:{customRender:"advancement-slot"}},{title:"Bonos",dataIndex:"bonus",key:"bonus",scopedSlots:{customRender:"bonus-slot"}},{title:"Ver informe",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"action-slot"}}],columnsLender:[{label:"Razón",name:"reason",sort:!0},{label:"Total",name:"total",slot_name:"format-total",sort:!1},{label:"Fecha",name:"date",slot_name:"format-date",sort:!1}],columnsBonuses:[{label:"Razón",name:"expense",slot_name:"format-reason",sort:!0},{label:"Total",name:"Figure",slot_name:"format-total",sort:!1},{label:"Fecha",name:"date",slot_name:"format-date",sort:!1}],configBonuses:{card_title:"Bonos",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",per_page_options:[5,10,20,30,40,50,80,100],show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!0,pagination_info:!1,pagination:!1,global_search:{placeholder:"Busque el prestador",visibility:!1,case_sensitive:!1,showClearButton:!0,searchOnPressEnter:!1,searchDebounceRate:200}},configHeader:{headers:{"x-database-connect":u.a.database,"x-access-token":localStorage.userToken}},configLender:{card_title:"Adelantos",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",per_page_options:[5,10,20,30,40,50,80,100],show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!0,pagination_info:!1,pagination:!1,global_search:{placeholder:"Busque el prestador",visibility:!1,case_sensitive:!1,showClearButton:!0,searchOnPressEnter:!1,searchDebounceRate:200}},columns:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"date-format"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},ellipsis:!0},{title:"UUID de venta",dataIndex:"saleData.uuid",key:"saleData.uuid",scopedSlots:{customRender:"uuid-format"}},{title:"Cliente",dataIndex:"client",key:"client",ellipsis:!0,scopedSlots:{customRender:"client-slot"}},{title:"Servicio",dataIndex:"service",key:"service",ellipsis:!0,scopedSlots:{customRender:"service-slot"}},{title:"Comisión",dataIndex:"commission",key:"commission",ellipsis:!0,scopedSlots:{customRender:"commission"},defaultSortOrder:"descend",sorter:function(t,e){return t.commission-e.commission}},{title:"Total",dataIndex:"total",key:"totals.total",ellipsis:!0,scopedSlots:{customRender:"total"},defaultSortOrder:"descend",sorter:function(t,e){return t.total-e.total}},{title:"Anular",dataIndex:"_id",key:"_id",ellipsis:!0,scopedSlots:{customRender:"reportSale"}}]}},created:function(){this.getData(),this.getToken(),$(document).ready((function(){setTimeout((function(){$("input[placeholder='Go to page']").hide()}),200)})),this.getHistoryCloses()},methods:(s={getToken:function(){var t=localStorage.userToken,e=p()(t);this.auth=e.access,this.branch=localStorage.branch,this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.imgUser=localStorage.imgUser},back:function(){window.history.go(-1)},servicesSale:function(t){this.dataDetail=t,this.modals.modal3=!0},getHistoryCloses:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.get("".concat(u.a.endpointTarget,"/employes/historyCloses/").concat(this.id),this.configHeader);case 3:e=t.sent,console.log(e),"ok"==e.data.status?this.historyCloses=e.data.data:this.historyCloses=[],t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),cancelSale:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a,s){var n,i,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(s),t.next=3,c.a.put(u.a.endpointTarget+"/ventas/"+e,{employeComision:s});case 3:if(n=t.sent,"ok"!=n.data.status){t.next=15;break}return c.a.post(u.a.endpointTarget+"/inventario/nullSale",{array:a}),this.modals={modal1:!0,message:"¡Venta anulada!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){o.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500),this.getData(),t.next=11,c.a.post(u.a.endpointTarget+"/notifications",{branch:this.branch,userName:this.firstNameUser+" "+this.lastNameUser,userImage:this.imgUser,detail:"Anuló una venta del día "+this.formatDate(this.arreglo.fecha),link:"Ventas"},this.configHeader);case 11:i=t.sent,i&&this.socket.emit("sendNotification",i.data),t.next=17;break;case 15:this.modals={modal1:!0,message:"¡Error al anular!",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){o.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500);case 17:case"end":return t.stop()}}),t,this)})));function e(e,a,s){return t.apply(this,arguments)}return e}(),validRegister:function(){this.dataExpense.valid=""!=this.dataExpense.reason&&this.dataExpense.amount>0},registerExpense:function(){var t=this;c.a.post(u.a.endpointTarget+"/manicuristas/registerAdvancement",{reason:this.dataExpense.reason,id:this.id,name:this.nameLender,prest:this.code,total:this.dataExpense.amount,check:this.bonus,date:this.dates.simple}).then((function(e){"bonus"==e.data.status?(t.modals={modal1:!0,message:"Se registro el bono con éxito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500),t.bonus=!1,t.dataExpense.reason="",t.dataExpense.amount=0,t.dataExpense.valid=!1,t.getAdvancements(),t.getData()):(t.modals={modal1:!0,message:"Se registro el avance con éxito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,message:"",icon:"",type:""}}),1500),t.getAdvancements(),t.getData())})).catch((function(t){console.log(t)}))},formatDate:function(t){var e=new Date(t);return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},nullSale:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a,s,n){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(n.typesPay.length),n.typesPay.length>1?this.$swal({icon:"error",title:"Por los tipos de pago",html:"Debes hacer la anulación en la sección de <b>Ventas</b>",showConfirmButton:!0}):this.$swal({title:"¿Desea anular la venta?",text:"¡Recuerda! Esta acción no se podrá revertir",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(t){t.value?c.a.put(u.a.endpointTarget+"/employes/nullsale/"+e,{id:a,idEmploye:i.id,commission:i.totalComission},i.configHeader).then((function(t){"ok"==t.data.status?(i.$swal({icon:"success",title:"Venta anulada",showConfirmButton:!1,timer:1500}),i.getData(),c.a.post(u.a.endpointTarget+"/notifications",{branch:i.branch,userName:i.firstNameUser+" "+i.lastNameUser,userImage:i.imgUser,detail:"Anuló una venta del día "+i.formatDate(s),link:"Ventas"},i.configHeader).then((function(t){i.socket.emit("sendNotification",notify.data)}))):i.$swal({icon:"error",title:"Problemas tecnicos",showConfirmButton:!1,timer:1500})})):i.$swal("No se hizo el cierre","Aborto la acción","info")}));case 2:case"end":return t.stop()}}),t,this)})));function e(e,a,s,n){return t.apply(this,arguments)}return e}(),getData:function(){var t=this,e=new Date;this.fecha=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),c.a.get(u.a.endpointTarget+"/employes/justOneById/"+this.id,this.configHeader).then((function(e){t.code=e.data.data._id,t.nameLender=e.data.data.firstName+" "+e.data.data.lastName,t.totalComission=e.data.data.commission,t.lenderBonus=e.data.data.bonus,t.advancement=e.data.data.advancement,c.a.get(u.a.endpointTarget+"/employes/salesbyemploye/"+t.id,t.configHeader).then((function(e){t.sales=e.data.data,t.dateInit=e.data.data[0]?e.data.data[0].createdAt:"",t.progress=!1}))})).catch((function(t){console.log(t)}))}},Object(o["a"])(s,"formatPrice",(function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")})),Object(o["a"])(s,"reportHistory",(function(){var t="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\nwidth=0,height=0,left=-1000,top=-1000",e=window.open(u.a.url+"/pdfCierreEmpleado?id="+this.dataHistoryClosedReport._id,"_blank",t);e.focus()})),Object(o["a"])(s,"printReport",(function(){var t=this;this.$swal({title:"¿Desea realizar el cierre?",text:"Esta acción no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?c.a.put(u.a.endpointTarget+"/employes/closeemploye/"+t.code,{sales:t.sales,bonus:t.lenderBonus,advancement:t.advancement,commission:t.totalComission,employe:{name:t.nameLender,id:t.id}},t.configHeader).then((function(e){"employe closed"==e.data.status?c.a.post("".concat(u.a.endpointTarget,"/expenses/"),{branch:t.branch,detail:"Pago de comisión de "+t.nameLender,employe:t.code,amount:t.totalComission,type:"Comision"},t.configHeader).then((function(e){"ok"==e.data.status&&(t.getHistoryCloses(),t.$swal({icon:"success",title:"Cierre exitoso",text:"Para visualizar reporte verifique el historial",showConfirmButton:!0}))})).catch((function(t){console.log(t)})):t.$swal("Error en el cierre","Hubo un error","error")})).catch((function(t){console.log(t)})):t.$swal("No se hizo el cierre","Acción cancelada","info")}))})),Object(o["a"])(s,"validRoute",(function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}})),s),computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},S=_,k=(a("241e5"),a("2877")),A=Object(k["a"])(S,n,i,!1,null,null,null);e["default"]=A.exports},df7b:function(t,e,a){},dffe:function(t,e,a){"use strict";var s=a("0694"),n=a.n(s);n.a},e25f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/store.png)","background-size":"cover","background-position":"center 70%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Inventario")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a la administración de sus empleados. Donde podrá obtener detalle de sus ventas y comisiones correspondientes.")])]),a("base-button",{staticClass:"float-right mt-7",attrs:{disabled:!t.validRoute("inventario","cerrar"),size:"sm",type:"danger"},on:{click:function(e){t.modals.modal4=!0}}},[a("i",{staticClass:"fa fa-archive mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"}}),t._v("\n                  Cerrar inventario\n              ")])],1)])]),a("tabs",{staticClass:"flex-column flex-md-row inventory inventoryTabs",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{staticClass:"p-2",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"}),t._v("\n                  Tabla de productos\n              ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún producto registrado")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.productState,"data-source":t.products,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                  Buscar\n                              ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                  Restablecer\n                              ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"total",fn:function(e,s){return[parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume)<s.alertTotal?a("span",{staticClass:"text-danger"},[t._v("\n                                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                                  "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("Este producto necesita ser reabastecido.")])]),a("a-icon",{staticClass:"ml-2",staticStyle:{cursor:"pointer","vertical-align":"0.1em","font-size":"1.1em"},attrs:{type:"exclamation-circle"}})],2)],1):a("span",[t._v("\n                                  "+t._s(parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume))+"\n                                ")])]}},{key:"storeDev",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Devolver cantidad a bodega")])]),"Materia prima"==s.productType?a("base-button",{staticClass:"ml-2 mr-0",attrs:{disabled:parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume)==0,size:"sm",type:"danger"},on:{click:function(e){t.lessInventory="",t.modals.modal6=!0,t.selectedProduct=s,t.totalValidLess=parseFloat(s.quantity)+parseFloat(s.entry)-parseFloat(s.consume)}}},[a("a-icon",{staticStyle:{"vertical-align":".13em","font-size":"1.1em"},attrs:{type:"export"}})],1):t._e()],2)]}},{key:"typeProduct",fn:function(e,s){return[a("a-dropdown",{attrs:{disabled:!t.validRoute("inventario","cambiar_tipo")}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[[a("a-menu-item",{on:{click:function(e){return t.productTypeEdit("Materia prima",s._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"experiment"}}),t._v("\n                                                  Materia prima\n                                              ")],1),a("a-menu-item",{on:{click:function(e){return t.productTypeEdit("Venta",s._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"shop"}}),t._v("\n                                                  Venta\n                                              ")],1)]],2),a("a-button",{staticClass:"w-100",staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(s.productType)+" "),a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"down"}})],1)],1)]}},{key:"price",fn:function(e){return[t._v("\n                                  "+t._s(t.formatPrice(e))+"\n                              ")]}}])})],1)],1)]],2),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-calendar-grid-58"}),t._v("\n                Historial\n              ")]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{staticClass:"w-50",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-money-check-alt"}),t._v("\n                              Historial de abastecimientos\n                          ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún registro de historial")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistory,loading:t.productState,"data-source":t.dataHistory,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                            Buscar\n                                        ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                            Restablecer\n                                        ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"date",fn:function(e){return[t._v("\n                                            "+t._s(t.formatDate(e))+"\n                                        ")]}},{key:"price",fn:function(e){return[t._v("\n                                            "+t._s(t.formatPrice(e))+"\n                                        ")]}}])})],1)],1)]],2),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-file-contract"}),t._v("\n                              Historial de cierres\n                          ")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún registro de cierre")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistoryClosed,loading:t.productState,"data-source":t.dataHistoryClosed,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                                            Buscar\n                                        ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                                            Restablecer\n                                        ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"date",fn:function(e){return[t._v("\n                                            "+t._s(t.formatDate(e))+"\n                                        ")]}},{key:"user",fn:function(e){return[t._v("\n                                            "+t._s(e.email)+"\n                                        ")]}},{key:"report",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Ver informe")])]),a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(e){t.modals.modal5=!0,t.validForm=2,t.dataHistoryClosedReport=s.products}}})],2)]}}])})],1)],1)]],2)],1)],1)],1)],1)],1),a("modal",{attrs:{show:t.modals.modal4,"modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal4",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Cierre de inventario")]),a("vue-custom-scrollbar",{staticStyle:{height:"30vh",overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}},[a("div",{staticClass:"row m-2 ml-0"},[a("div",{staticClass:"col-6 pl-2"},[t._v("\n          Nombre del producto\n        ")]),a("div",{staticClass:"col-6 pl-2 text-left"},[t._v("\n          Total real\n        ")])]),a("hr",{staticClass:"mt-1 mb-2"}),t._l(t.products,(function(e,s){return a("div",{key:s,staticClass:"row m-1"},[a("dt",{staticClass:"col-6 mt-2"},[t._v(t._s(e.product))]),a("base-input",{staticClass:"col-6",attrs:{type:"Number",placeholder:"Ingrese cantidad en "+e.measure},model:{value:t.countProduct[s].count,callback:function(e){t.$set(t.countProduct[s],"count",e)},expression:"countProduct[index].count"}})],1)}))],2),a("template",{slot:"footer"},[a("base-button",{staticClass:"float-rigth",attrs:{type:"default"},on:{click:t.closeInventory}},[t._v("Cerrar inventario")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-xl",show:t.modals.modal5},on:{"update:show":function(e){return t.$set(t.modals,"modal5",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Informe de cierre")]),[a("div",{staticClass:"p-2"},[a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("No hay ningún registro")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columnsHistoryClosedReport,loading:t.productState,"data-source":t.dataHistoryClosedReport,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                          Buscar\n                      ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                          Restablecer\n                      ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}}])})],1)],1)],a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(e){t.modals.modal5=!1}}},[t._v("Cerrar")])],1)],2),a("modal",{attrs:{show:t.modals.modal6,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(e){return t.$set(t.modals,"modal6",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Devolver a bodega")]),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted mb-3 text-center",staticStyle:{"margin-top":"-15%"}},[t._v("\n                  Ingrese cantidad\n              ")])],a("a-input-number",{staticClass:"w-100",attrs:{size:"large",placeholder:"Cantidad",min:1},model:{value:t.lessInventory,callback:function(e){t.lessInventory=e},expression:"lessInventory"}}),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-2",attrs:{type:"warning",disabled:!(t.lessInventory>0&&t.lessInventory<=t.totalValidLess)},on:{click:function(e){return t.returnToStore()}}},[t._v("Devolver")])],1)],2)],1)],1)},n=[],i=(a("ac4d"),a("8a81"),a("ac6a"),a("a481"),a("96cf"),a("3b8d")),o=(a("6b54"),a("6762"),a("2fdb"),a("bc3a")),r=a.n(o),l=a("a5e9"),c=a.n(l),d=a("4b70"),u=a.n(d),m=a("e366"),p=a("04e1"),f=a.n(p),h=a("ef34"),g=a("bb36"),v={mixins:[h["a"],g["a"]],components:{vueCustomScrollbar:u.a},data:function(){var t=this;return{countProduct:[],dataHistoryClosed:[],dataHistory:[],modals:{modal4:!1,modal5:!1,modal6:!1},lessInventory:"",totalValidLess:"",selectedProduct:"",productState:!0,products:[],searchText:"",searchInput:null,searchedColumn:"",dataHistoryClosedReport:[],dataForLess:{},columns:[{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Precio",dataIndex:"price",key:"price",ellipsis:!0,scopedSlots:{customRender:"price"},sorter:function(t,e){return t.price-e.price}},{title:"Tipo de medida",dataIndex:"measure",key:"measure",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.measure.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Cantidad inicial",dataIndex:"quantity",key:"quantity",ellipsis:!0,scopedSlots:{customRender:"quantity"},sorter:function(t,e){return t.quantity-e.quantity}},{title:"Cantidad abastecida",dataIndex:"entry",key:"entry",ellipsis:!0,scopedSlots:{customRender:"entry"},sorter:function(t,e){return t.entry-e.entry}},{title:"Consumo",dataIndex:"consume",key:"consume",ellipsis:!0,scopedSlots:{customRender:"consume"},sorter:function(t,e){return t.consume-e.consume}},{title:"Total",key:"_id",ellipsis:!0,scopedSlots:{customRender:"total"},sorter:function(t,e){return t.quantity+t.entry-t.consume-(e.quantity+e.entry-e.consume)}},{title:"Devolver a bodega",key:"_id",width:170,scopedSlots:{customRender:"storeDev"}},{title:"Tipo de producto",key:"_id",width:170,scopedSlots:{customRender:"typeProduct"}}],columnsHistory:[{title:"Fecha",dataIndex:"date",key:"date",ellipsis:!0,defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()},scopedSlots:{customRender:"date"}},{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Anexado",dataIndex:"entry",key:"entry",ellipsis:!0},{title:"Medida",dataIndex:"measure",key:"measure",ellipsis:!0}],columnsHistoryClosed:[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",ellipsis:!0,defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},scopedSlots:{customRender:"date"}},{title:"Encargado del cierre",dataIndex:"user",key:"user",ellipsis:!0,sorter:function(t,e){return t.user>e.user?-1:e.user>t.user?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"user"},onFilter:function(t,e){return e.user.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Productos totales",dataIndex:"totalProduct",key:"totalProduct",ellipsis:!0},{title:"Informe",dataIndex:"_id",scopedSlots:{customRender:"report"},key:"_id",ellipsis:!0}],columnsHistoryClosedReport:[{title:"Producto",dataIndex:"product",key:"product",ellipsis:!0,sorter:function(t,e){return t.product>e.product?-1:e.product>t.product?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"product"},onFilter:function(t,e){return e.product.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Medida",dataIndex:"measure",key:"measure",ellipsis:!0,sorter:function(t,e){return t.measure>e.measure?-1:e.measure>t.measure?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"measure"},onFilter:function(t,e){return e.measure.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Total ideal",dataIndex:"ideal",key:"ideal",ellipsis:!0},{title:"Total real",dataIndex:"count",key:"count",ellipsis:!0},{title:"Diferencia",dataIndex:"difference",key:"difference",ellipsis:!0}],configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}},auth:[]}},created:function(){this.getBranch(),this.getUserData(),this.getToken()},methods:{getUserData:function(){this.firstNameUser=localStorage.firstname,this.lastNameUser=localStorage.lastname,this.emailUser=localStorage.email,this.idUser=localStorage._id},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},getToken:function(){var t=localStorage.userToken,e=f()(t);this.auth=e.access},returnToStore:function(){var t=this;r.a.get(c.a.endpointTarget+"/stores/getstorebyid/"+this.selectedProduct.storeId,this.configHeader).then((function(e){t.$swal({title:"¿Está seguro que desea eliminar "+t.lessInventory+" "+e.data.data.measure+" de este producto?",html:"¡Recuerda! se descontará de la sucursal: <b>"+t.branchName+"</b>",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?(console.log("majomeno?"),r.a.post(c.a.endpointTarget+"/stores/addtobranch",{branch:t.branch,branchName:t.branchName,id:t.selectedProduct._id,storeId:t.selectedProduct.storeId,product:t.selectedProduct.product,measure:t.selectedProduct.measure,price:t.selectedProduct.price,entry:-t.lessInventory,firstNameUser:t.firstNameUser,lastNameUser:t.lastNameUser,emailUser:t.emailUser,idUser:t.idUser,inv:!0},t.configHeader).then((function(e){"added"==e.data.status&&r.a.post(c.a.endpointTarget+"/expenses/",{branch:t.branch,detail:"Se ha devuelto ".concat(t.lessInventory," ").concat(t.selectedProduct.measure," de ").concat(t.selectedProduct.product," a la bodega"),amount:-t.selectedProduct.price*t.lessInventory,type:"Inventario"},t.configHeader).then((function(e){"ok"==e.data.status&&(t.$swal({icon:"success",title:"La cantidad fue devuelta",showConfirmButton:!1,timer:1500}),t.getProducts(),t.getHistoryClosed(),t.modals.modal6=!1)})).catch((function(e){t.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)}))})).catch((function(e){t.$swal({icon:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(e)}))):t.$swal({icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))}))},getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.getProducts(),this.getHistory(),this.getHistoryClosed()},getProducts:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.countProduct=[],this.productState=!0,t.prev=2,t.next=5,r.a.get(c.a.endpointTarget+"/stores/getinventorybybranch/"+this.branch,this.configHeader);case 5:if(e=t.sent,e){for(this.products=e.data.data,a=0;a<this.products.length;a++)s=this.products[a].quantity+this.products[a].entry-this.products[a].consume,this.countProduct.push({id:this.products[a]._id,count:"",ideal:s,measure:this.products[a].measure,product:this.products[a].product,difference:""});this.productState=!1}else this.products=[],this.productState=!1;t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(){return t.apply(this,arguments)}return e}(),getHistory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/stores/gethistorybybranch/"+this.branch,this.configHeader);case 3:e=t.sent,e?(this.dataHistory=e.data.data,this.productState=!1):(this.dataHistory=[],this.productState=!1),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getHistoryClosed:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/stores/gethistoryclosedbybranch/"+this.branch,this.configHeader);case 3:e=t.sent,e?(this.productState=!1,this.dataHistoryClosed=e.data.data):(this.dataHistoryClosed=[],this.productState=!1),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},formatDate:function(t){var e=new Date(t);return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},closeInventory:function(){var t=this,e=!0,a=!0,s=!1,n=void 0;try{for(var i,o=this.countProduct[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;if(""==l.count||parseInt(l.count)<0){e=!1;break}}}catch(d){s=!0,n=d}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}e?r.a.post(c.a.endpointTarget+"/stores/closeinventorybybranch",{branch:this.branch,firstNameUser:this.firstNameUser,lastNameUser:this.lastNameUser,emailUser:this.emailUser,idUser:this.idUser,products:this.countProduct},this.configHeader).then((function(e){t.$swal({icon:"success",title:"Cierre realizado con éxito",showConfirmButton:!1,timer:1500}),t.getProducts(),t.getHistoryClosed(),t.modals.modal4=!1})).catch((function(e){t.$swal({icon:"error",title:"Error de conexión",showConfirmButton:!1,timer:1500})})):this.$swal({icon:"error",title:"Complete todos los productos",showConfirmButton:!1,timer:1500})},productTypeEdit:function(t,e){var a=this;r.a.put(c.a.endpointTarget+"/stores/changetype/"+e,{productType:t},this.configHeader).then((function(t){"ok"==t.data.status&&(a.$swal({type:"success",icon:"success",title:"Cambio exitoso",showConfirmButton:!1,timer:1500}),a.getProducts(),m["a"].$emit("reloadProducts","reload"))})).catch((function(t){a.$swal({type:"error",icon:"error",title:"Errores tecnicos, vuelve a intentarlo",showConfirmButton:!1,timer:1500})}))}},mounted:function(){var t=this;m["a"].$on("changeBranch",(function(e){t.getBranch()}))},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},b=v,y=(a("dffe"),a("2877")),C=Object(y["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},e377:function(t,e,a){"use strict";var s=a("325b"),n=a.n(s);n.a},e609:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAACchJREFUeJzt3c1PW1cax/GfARu/YMgLDpi4JJNGqdJJpYFa3aKmLe2CTaVsqnbU1fxVXVbdVY1EplU6VdSk7+KlqZLgVopKmuBQHAwUx8GAAc8iIlIKfjDcg23M97PLxRyfEH45z/W99zm+UqlUEoBtNdV6AkA9IyCAoeXvB5ZXVjU5NVOLuQA1dexIVN2dR587tiUga+sbyj0pVG1SQL0IBVu3HKPEAgwEBDAQEMBAQADDlpP0csKhVp3uObGfcwGqYnYhp9n5xYpeW3FAWpqb1d4W3vOkgHqxm09pKbEAAwEBDBWXWJWYfjSvjY2NLcdPHD+iR3N/uXwrHGKBgF+rq8Xtv+jzKdF13Nl7OQ1IqVRSortz26+VOw649DAz53Q8zwEplUq6l84o4G9Rz4njSs9kXcwL2JNEd6fSM1mtFNf04gvdnsfzHhBJoWBA8dgxPczMNeRKUVxbV2F5pdbTcCrYGlDA77SAqAubv4PTj+adjOfpJ5TOzEmlkqKR0NPUlqsLD7hcfkl370/XehpOnT7Zpe7OI7WehnNr6xt6/KSgeOyoHmbmzLK/Ep4C4pMU7zquTHahIVeOv4tGQuo44NeCck8KyuWXaj2NfXOqJybp6QdGJ7uOa3p2XqVSST6fb0/jNd4au4+ikdCB/48gnZlr6IC4RkDqWKlU0tLSkorFolpaWhQOh9XUxKWrauKnXafy+bw++eQTZTIZhcNh5XI5ff7558rlcrWe2qFCQOrU9evXdenSJZ05c0aBQEA9PT0aGhrStWvXRCOa6vEUEG5e3D+RSETBYPC5Yz6fT+fOndPs7GyNZnXwRMOhPZ+gSx4D8phn1/fF6uqqWlu3Ph8tSdFoVPl8vsozOrgeLxU8rbiUWHVgenpaU1NTz/4cCAS0uLj98wqTk5OKx+PVmtqhR0BqLJPJ6NatW5qcnFQ6nX52/KWXXtLPP//83Gvv3bunlZUVhUKhak/z0OJj3hrKZrMaHh7WxYsX5fP5dP36db3xxhuKx+M6c+aMHjx4oCtXrigQCGhtbU3hcFiDg4O1nvahQkBqZH5+XqOjo/rwww9VKBT0+++/6/3339f4+Liam5t14sQJ9fb2qre3d9vv/+OPP9Ta2kq5tc8osfbR6Oio1tfXtxxfXFzU6Oio3nnnHQUCAXV0dKi/v18+n0/JZFLpdFqPHj0qO+6DBw80NTWl8fFxzczQBXM/EZB9cvXqVXV0dGh4ePi5h8gWFxc1MjKiwcHBsh8/9vf3K51OK5vd+ujAw4cP9c0332h6elq9vb0aHh7Wn3/+uW9/j8OOEmsfXLt2TcvLy0qlUvL7/frqq680ODiofD6vkZERvfnmmzt+Nt/f36/x8XGNj48/dzwej+uDDz6QJKVSKb333nv64YcfnpVlcIuAOPbdd9/p/Pnzam9vf/b5e1NTk77//nutrKxUFI5Nr776qrLZrDo7t79B8uWXX5Ykvf322/r6668liZA4Ronl0E8//aSzZ8+qp6dHbW1tikajikajikQiSiaTZS/+lfPbb7/pzp07unr16o6vff311zUxMbFtWYa9IyCOjI2N6fTp0+ru3v4xz2AwqGQyqW+//baiK7upVEqBQEAXLlzQhQsX9MUXX+z4PYTEPU8BiUa4YCU9DUcikSgbjk2bIblx44b5urt372pmZkY//vij7ty5o9u3b6tQKOjLL7/ccS4DAwOamJjQ/LybR04PuvZIWPJwL5anc5DHTwqKhIM7v7CB3bp1q6JwbAqHw0omkxobG9PRo0e3fL1YLMrv9+vixYvPjuVyOQWDQc3NzenKlSsaGhoyz2MGBgY0MjKis2fP6tixY7v/SzWQxfwTtXn4HeUk3YNUKqV4PK5YLLar72tra1Mymaz49e3t7ZKefoLV19eny5cv69133zVD8tprr+nmzZuSdKhD4tPeVw+Jc5A9S6VSisViuw6HV4lEQslkUp999tmO5zJ9fX26f/++lpZ4xHavWEH2KJFIyO/3q1Co/i3/sVhMb731lhYWFnZ87alTp3hM1wMCskebZU+tcEdvhbxVWARkN1aLawe+I0ij9i4rx+s5iKeAFFZWNTO7oK7OI0rPZLW2vqHTJxv3Sm52IafsAk0T6tlms7ieruNKZ+bKN7mukKeAvPhCtzZKpWeN41w3Dq4X/pZmtTfYNZ9GbDu6abP1qIsu705+SssrReXySwoFWw98CVLOQW8Yt51G/Ldqbwsrl1/S8uqqk/E8B6TJ59M/El2Sni5vJx3uzQDs1ubvoKuOO07X2fWNjW23P2ADHbhkbaCzWlxz+l5OA9IbL3/RrBFLFDQ+riABBgICGAgIYPB0DrJ5UQaoV83NzYrHtj5WUCnPW7ARENSzgL/FU0AosQCD8/sNZjP0aELtxLrcdpp0HpAb//uv6yGBil3693+cjkeJBRgICGBwXmK5XuKAWmIFAQwEBDAQEMBAQAADAQEMBAQwEBDAQEAAg/MLhRO/jLkeEqjYP/9Vedf8SjgPyK+3b7oeEqiY64BQYgEG5yuI6/vxgVpyHpCBwSHXQwI1Q4kFGAgIYCAggIGAAAYCAhgICGAgIICBgAAGGsehobi+UE3rUcBAiQUYnK8g51/pcz0kUDPOA+L6fnygliixAAMBAQwEBDAQEMBAQAADAQEMBAQwEBDA4PxC4acff+R6SKBi7HILVBEBAQzscgsYWEEAAwEBDAQEMBAQwEBAAAMBAQwEBDAQEMBAXyw0FNdbANJZEQ2FmxWBKmKXW8DALreAgRILMBAQwEBAAAMBAQwEBDAQEMBAQAADAQEMzi8UTvwy5npIoGKudzhzHpBfb990PSRQMdcBocQCDOxyCxjY5RYwUGIBBgICGAgIYCAggIGAAAYCAhgICGAgIICBxnFoKK676tB6FDBQYgEGGscBBlqPAgZKLMBAQAADAQEMBAQwEBDAQEAAAwEBDAQEMDi/UPjpxx+5HhKoGLvcAlVEQACD8xLL9RIH1BIrCGAgIICBgAAGAgIYCAhgICCAgYAABgICGNjlFg2FXW4BA7vcAlVEXyzAQGdFwECJBRgICGAgIICBgAAGAgIYCAhgICCAgYAABna5RUNhl1ugiiixAIPzFeT8K32uhwRqxnlAXN+PD9QSJRZgICCAgYAABgICGAgIYCAggIG+WGgo9MUCDPTFAqqIvliAgb5YgIESCzAQEMDgqcQ6/+ILUqnkai6Ac01NPk/f7ykg7ZGQpzcH6h0lFmCoeAVZWS0qPZPdz7kAVZF7Uqj4tbsLSGZuTxMCDipKLMBAQAADAQEMBAQwbDlJb2lu4voGDqVQMLDlmK9U4lI4UA4lFmAgIIDh/6+srYltFagKAAACE2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLycgeDp4bXB0az0nSW1hZ2U6OkV4aWZUb29sIDEwLjgwJz4KPHJkZjpSREYgeG1sbnM6cmRmPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjJz4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgPHBkZjpBdXRob3I+Q2FybG9zIENhcGFjaG88L3BkZjpBdXRob3I+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnhtcD0naHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyc+CiAgPHhtcDpDcmVhdG9yVG9vbD5DYW52YTwveG1wOkNyZWF0b3JUb29sPgogPC9yZGY6RGVzY3JpcHRpb24+CjwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9J3InPz5DtCnxAAAAAElFTkSuQmCC"},ed81:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/users.png)","background-position":"center 15%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Usuarios")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a registrar y administrar los accesos necesarios para cada usuario dentro del sistema.")])]),a("base-button",{staticClass:"float-right mt-7 mr-0",attrs:{size:"sm",disabled:!t.validRoute("usuarios","perfiles"),type:"primary"},on:{click:t.redirect}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"user"}}),t._v("\n                    Perfiles\n                ")],1),a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",disabled:!t.validRoute("usuarios","registrar"),type:"success"},on:{click:function(e){t.modals.modal1=!0,t.initialState(2)}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                    Registrar\n                ")],1)],1)])]),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("a-spin",{attrs:{size:"large",spinning:t.ifRegister}},[a("div",{staticClass:"p-3 pt-4"},[[a("div",{staticClass:"text-muted text-center",staticStyle:{"margin-top":"-10% !important"}},[t._v("\n                        Datos del usuario\n                    ")])],[a("form",{attrs:{role:"form"}},[a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col-md-6"},[a("a-select",{staticClass:"w-100 mx-auto mb-2",attrs:{placeholder:"Seleccione la sucursal",allowClear:!0},on:{change:t.selectBranch}},t._l(t.branches,(function(e){return e.active?a("a-select-option",{key:e._id,attrs:{value:e._id}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")]):t._e()})),1)],1),a("div",{staticClass:"col-md-6"},[a("input",{ref:"file",staticClass:"ant-input mb-2 mx-auto",staticStyle:{padding:"2px"},attrs:{type:"file",id:"fileProfile",placeholder:"Imagen de perfil"},on:{change:function(e){return t.handleFileUpload()}}})]),a("div",{staticClass:"col-md-6"},[a("a-input",{staticClass:"mb-2",attrs:{placeholder:"Nombre",size:"large"},on:{change:function(e){return t.validRegister()}},model:{value:t.registerUser.name,callback:function(e){t.$set(t.registerUser,"name",e)},expression:"registerUser.name"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"}),a("i",{staticClass:"fa fa-asterisk text-danger",attrs:{slot:"suffix"},slot:"suffix"})],1)],1),a("div",{staticClass:"col-md-6"},[a("a-input",{attrs:{placeholder:"Apellido",size:"large"},on:{change:function(e){return t.validRegister()}},model:{value:t.registerUser.lastname,callback:function(e){t.$set(t.registerUser,"lastname",e)},expression:"registerUser.lastname"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"}),a("i",{staticClass:"fa fa-asterisk text-danger",attrs:{slot:"suffix"},slot:"suffix"})],1)],1),a("div",{staticClass:"col-md-6"},[a("a-input",{staticClass:"mb-0",attrs:{placeholder:"Correo",size:"large"},on:{keyup:function(e){return t.validFields("c")}},model:{value:t.registerUser.email,callback:function(e){t.$set(t.registerUser,"email",e)},expression:"registerUser.email"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"}),a("i",{staticClass:"fa fa-asterisk text-danger",attrs:{slot:"suffix"},slot:"suffix"})],1)],1),a("div",{staticClass:"col-md-6"},[a("a-form-item",{staticClass:"m-0",attrs:{"validate-status":t.registerUser.password.length>8?"success":"error"}},[a("a-input-password",{staticClass:"mb-2",attrs:{placeholder:"contraseña",size:"large",id:t.registerUser.password.length>8?"success":"error"},on:{keyup:function(e){return t.validFields("p")}},model:{value:t.registerUser.password,callback:function(e){t.$set(t.registerUser,"password",e)},expression:"registerUser.password"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"key"},slot:"prefix"}),a("i",{staticClass:"fa fa-asterisk text-danger",attrs:{slot:"suffix"},slot:"suffix"})],1)],1)],1),a("div",{staticClass:"col-md-6"},[a("a-form-item",{attrs:{"validate-status":t.registerUser.c?"success":"error",help:t.registerUser.c?"":"Los correos deben coincidir"}},[a("a-input",{attrs:{size:"large",id:t.registerUser.c?"success":"error",placeholder:"Confirmar correo"},on:{keyup:function(e){return t.validFields("c")}},model:{value:t.registerUser.emailConfirm,callback:function(e){t.$set(t.registerUser,"emailConfirm",e)},expression:"registerUser.emailConfirm"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),a("div",{staticClass:"col-md-6"},[a("a-form-item",{attrs:{"validate-status":t.registerUser.p&&t.registerUser.password.length>8?"success":"error",help:t.registerUser.p&&t.registerUser.password.length>8?"":"Las contraseñas deben coincidir y tener más de 8 caracteres"}},[a("a-input-password",{attrs:{id:t.registerUser.p&&t.registerUser.password.length>8?"success":"error",size:"large",placeholder:"Confirmar contraseña"},on:{keyup:function(e){return t.validFields("p")}},model:{value:t.registerUser.passwordConfirm,callback:function(e){t.$set(t.registerUser,"passwordConfirm",e)},expression:"registerUser.passwordConfirm"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1)],1)]),a("div",{staticClass:"text-center"},[0==t.registerUser.valid?a("base-button",{staticClass:"my-2",attrs:{type:"primary",disabled:""}},[t._v("Registrar")]):a("base-button",{staticClass:"my-2",attrs:{type:"primary"},on:{click:function(e){return t.registerUsers()}}},[t._v("Registrar")])],1)])]],2)])],1),a("modal",{attrs:{show:t.modals.modal3,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[t._v("Vincular prestador")])])],[a("a-select",{staticClass:"input-group-alternative w-100 mb-4 mt-2 linkLender",attrs:{allowClear:"","show-search":"","default-value":"Seleccione el prestador",placeholder:"Seleccione el prestador",size:"large"},on:{change:t.selectEmploye}},t._l(t.lenderNames,(function(e){return a("a-select-option",{key:e._id,attrs:{value:e._id}},[t._v("\n                        "+t._s(e.firstName)+" "+t._s(e.lastName)+" ("+t._s(e.document)+")\n                    ")])})),1),a("base-button",{attrs:{type:"default"},on:{click:function(e){return t.estatusEdit(t.profileSelect,!1,t.routesSelect,t.idSelect)}}},[t._v("\n                    Vincular\n                ")])]],2)],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.users,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                Buscar\n            ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                resetear\n            ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                "+t._s(e)+"\n            ")]]}},{key:"date-format",fn:function(e,a){return[t._v("\n            "+t._s(t._f("moment")(a.lastAccess,"DD-MM-YYYY"))+"\n        ")]}},{key:"status-format",fn:function(e,s){return[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t._l(t.accessProfiles,(function(e){return a("a-menu-item",{key:e.profile,on:{click:function(a){return t.estatusEdit(e.profile,e.commission,e.routes,s._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"user"}}),t._v("\n                            "+t._s(e.profile)+" \n                        ")],1)}))],2),a("a-button",{staticStyle:{"margin-left":"8px",width:"95%"}},["Debe asignar"==s.status?a("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(s.status)+" \n                        "),a("a-icon",{staticClass:" text-danger",staticStyle:{"vertical-align":"1.5px"},attrs:{type:"info-circle"}})],1):a("span",[t._v("\n                        "+t._s(s.status)+"\n                    ")]),a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"down"}})],1)],1)]}},{key:"Administrar",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Eliminar")])]),a("base-button",{staticClass:"ml-3",attrs:{disabled:!t.validRoute("usuarios","eliminar"),size:"sm",type:"warning",icon:"fas fa-trash"},on:{click:function(e){return t.deleteUser(s._id)}}})],2)]}}])})],1)},n=[],i=(a("28a5"),a("7f7f"),a("96cf"),a("3b8d")),o=(a("6b54"),a("6762"),a("2fdb"),a("bc3a")),r=a.n(o),l=a("41cb"),c=a("a5e9"),d=a.n(c),u=a("04e1"),m=a.n(u),p=a("e366"),f=a("12f9"),h=a("4b70"),g=a.n(h),v=a("ef34"),b={mixins:[v["a"]],components:{VueBootstrap4Table:f["a"],vueCustomScrollbar:g.a},data:function(){var t=this;return{accessProfiles:[],idProfile:"",radio:{radio1:!1},branches:[],configHeader:{headers:{"x-database-connect":d.a.database,"x-access-token":localStorage.userToken}},auth:[],ifRegister:!1,registerUser:{name:"",lastname:"",image:"",email:"",emailConfirm:"",password:"",passwordConfirm:"",branch:"",valid:!1,valid2:!1,date:"",c:"",p:""},searchText:"",searchInput:null,searchedColumn:"",commission:!1,selectedProfile:0,selectedRoute:"",linkLender:"",lenderNames:[],modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,modal7:!1,modal8:!1,message:"",icon:"",type:""},users:[],columns:[{title:"Nombre",dataIndex:"first_name",key:"first_name",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.first_name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Apellido",dataIndex:"last_name",key:"last_name",ellipsis:!0,scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.last_name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Correo",dataIndex:"email",key:"email",ellipsis:!0},{title:"Último acceso",dataIndex:"LastAccess",key:"LastAccess",scopedSlots:{customRender:"date-format"},defaultSortOrder:"descend",sorter:function(t,e){return new Date(t.lastAccess).getTime()-new Date(e.lastAccess).getTime()},ellipsis:!0},{title:"Perfil",dataIndex:"status",key:"status",scopedSlots:{customRender:"status-format"},ellipsis:!0},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"Administrar"}}],idSelect:"",file:"",position:0,mail:""}},created:function(){this.getUsers(),this.getEmployes(),this.getToken(),this.getBranches(),this.getAccessProfile(),$(document).ready((function(){setTimeout((function(){$("input[placeholder='Go to page']").hide()}),200)}))},methods:{getToken:function(){var t=localStorage.userToken,e=m()(t);this.auth=e.access,this.emailUser=e.email},selectBranch:function(t){this.registerUser.branch=t,this.validRegister()},selectEmploye:function(t){console.log(t),this.linkLender=t,console.log(this.linkLender)},redirect:function(){l["a"].push({path:"/perfilesAcceso"})},updateconfig:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.put(d.a.endpointTarget+"/configurations/editProfiles/"+this.idProfile,{profiles:this.accessProfiles},this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&this.$swal({type:"success",icon:"success",toast:!0,position:"top-end",title:"Cambio exitoso",showConfirmButton:!1,timer:1500}),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getAccessProfile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/configurations/profiles",this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&(this.accessProfiles=e.data.data[0].profiles,this.idProfile=e.data.data[0]._id),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getBranches:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/branches",this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&(this.branches=e.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},handleFileUpload:function(){this.file=this.$refs.file.files[0],console.log(this.file)},resetFileInput:function(){console.log(this.$refs.file.files),this.$refs.file.value="",console.log(this.$refs.file.files)},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},registerUsers:function(){var t=this;this.ifRegister=!0;var e=new FormData;e.append("image",this.file),e.append("first_name",this.registerUser.name),e.append("last_name",this.registerUser.lastname),e.append("email",this.registerUser.email),e.append("password",this.registerUser.password),e.append("branch",this.registerUser.branch);var a={headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken,"x-database-connect":d.a.database}};r.a.post(d.a.endpointTarget+"/users/registerUser",e,a).then((function(e){"ok"==e.data.status?(t.$swal({icon:"success",title:"¡Usuario registrado con éxito!",showConfirmButton:!1,timer:1500}),t.modals.modal1=!1,t.initialState(1),t.ifRegister=!1,t.getUsers()):(t.ifRegister=!1,t.$swal({icon:"error",title:"¡Usuario ya existe use otro correo!",showConfirmButton:!1,timer:2e3}))})).catch((function(e){t.ifRegister=!1,t.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500})}))},getUsers:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/users",this.configHeader);case 3:e=t.sent,this.users=e.data.data,localStorage.setItem("userToken",e.data.token),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),getEmployes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/employes",this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&(this.lenderNames=e.data.data),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),validRegister:function(){this.registerUser.email.split("@")[1]&&this.registerUser.email.split("@")[1].split(".")[1]&&(this.registerUser.valid=""!=this.registerUser.name&&this.registerUser.password.length>8&&""!=this.registerUser.lastname&&1==this.registerUser.c&&1==this.registerUser.p&&""!=this.registerUser.branch)},validFields:function(t){"c"==t&&(this.registerUser.c=this.registerUser.email.toLowerCase()==this.registerUser.emailConfirm.toLowerCase(),this.validRegister()),"p"==t&&(this.registerUser.p=this.registerUser.password==this.registerUser.passwordConfirm,this.validRegister())},initialState:function(t){$(".ant-select-selection__clear").click(),this.registerUser={name:"",lastname:"",image:"",email:"",emailConfirm:"",password:"",passwordConfirm:"",branch:"",valid:!1,valid2:!1,date:"",c:"",p:""},console.log(this.$refs.file),this.file="",this.$refs.file.value="",2==t&&(this.tipeForm="Registrar"),3==t&&(this.tipeForm="Editar")},deleteUser:function(t){var e=this;this.$swal({title:"¿Eliminar usuario?",text:"¡Recuerda! No es posible revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){if(a.value){var s=m()(localStorage.userToken);t==s._id?e.$swal({icon:"error",title:"Accion no permitida",text:"No es posible eliminar su propio usuario",showConfirmButton:!0}):r.a.delete(d.a.endpointTarget+"/users/"+t,e.configHeader).then((function(t){e.$swal({icon:"success",title:"Usuario eliminado con éxito",showConfirmButton:!1,timer:1500}),e.getUsers()})).catch((function(t){e.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"})}))}else e.$swal({icon:"info",title:"Acción cancelada",showConfirmButton:!1,timer:2500})}))},estatusEdit:function(t,e,a,s){var n=this;this.profileSelect=t,this.routesSelect=a,e?(this.modals.modal2=!0,this.idSelect=s):r.a.put(d.a.endpointTarget+"/users/changestatus/"+s,{status:t,routes:a,employe:this.linkLender},this.configHeader).then((function(t){n.$swal({icon:"success",title:"Estatus editado con éxito",showConfirmButton:!1,timer:1500});var e=m()(localStorage.userToken);s==e._id&&p["a"].$emit("loggedin-user",a),n.getUsers(),n.linkLender="",$(".linkLender .ant-select-selection__clear").click(),n.modals.modal2=!1})).catch((function(t){n.$swal({icon:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"Login"})}))}},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}}},y=b,C=(a("4cab"),a("2877")),w=Object(C["a"])(y,s,n,!1,null,null,null);e["default"]=w.exports},f17b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAOxAAADsQBlSsOGwAAA+9JREFUeJzt3btrFFEYxuHRDep6CSreRVAsJEjAgL2dlaWtpX9VyrQprewsBUFRRLCwUVCJFwyId9daN76MyZeZdXieckmO0/w4X5zlnB2TyWTSABva2fcDwCwTCARzf37w+cvX5tnzV308C/Tq8MEDzYkjh377bCqQ7z9+NusfP3X2UDArxnt2T31mxIJAIBAIBAKBQDD1R/rf7B3vbs6eOradzwKdWHu/3qy9+9DqZ1sHMjcaNfP79276oWBW/Mv/0hqxIBAIBK1HrI3cffi08V1HZt2Fc6ebQ/P7N/W7dhAIBALBlkasjay9flm9JLR29PjJ0vXKA7lz+1b1ktDa9Rs3S9czYkFQvoNUb3HQp/JArly9Vr0k9MaIBYFAIBAIBAKBQCAQCAQCgUAgEAjKXxQ+fnCveklo7eKly6XrlQfy5NH96iWhtepAjFgQlO8gC4tL1UtCb8oDqd7ioE9GLAgEAoFAIBAIBAKBQCAQCAQCgUBQ/qJwdWW5eklozcFx0CGBQODgOAgcPQqBEQsCgUAgEAgEAoFAIBAIBAKBwC23DIpbbiHwZUXokEAgKB+xqrc46JMdBAKBQCAQCAQCgUAgEAgEAoFAIBC45ZZBccstBG65hQ45FwsCJytCYMSCQCAQCAQCgUAgEAgEAoFAIBAIBA6OY1CqX1Q7ehQCIxYE5TvIwuJS9ZLQm/JAqr+PD30yYkEgEAgEAoFAIBAIBAKBQCAQCASC8heFqyvL1UtCa265hQ4JBAK33EJgB4FAIBAIBAKBQCAQCAQCgUAgEAgEzsViUKqvAHSyIoPiy4rQIbfcQuCWWwiMWBAIBAKBQCAQCAQCgUAgEAgEAoGg/EXh4wf3qpeE1qpvOCsP5Mmj+9VLQmvVgRixIHDLLQRuuYXAiAWBQCAQCAQCgUAgEAgEAoFAIBAIHBzHoFSfquPoUQiMWBA4OA4CR49CYMSCQCAQCAQCgUAgEAgEAoFAIBAIBOUvCldXlquXhNbccgsdEggE5SNW9RYHfbKDQCAQCAQCgUAgEAgEAoFAIBAIBAK33DIobrmFwC230CHnYkHgZEUIjFgQCAQCgUAgEAgEAoFAIBAIBAKBwC23DIpbbqFDRiwIyneQhcWl6iWhN+WBVH8fH/pkxIJAIBAIBAKBQCAQCAQCgXOxGBTnYkHgXCzokHOxIHAuFgRGLAi2tIPM7xs3k6ongW0yNxpt/ne38g8vnD+zlV+HmWfEgkAgELQesb58/da8ePVmO58FOrH+8VPrn/23QF6/3dQDwf/KiAWBQCAQCAQCgWDqj/S50c5mft+4j2eBXo337Jr6bMdkMvFtEfgLIxYEAoHgFwp4j1bOFT3AAAACE2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLycgeDp4bXB0az0nSW1hZ2U6OkV4aWZUb29sIDEwLjgwJz4KPHJkZjpSREYgeG1sbnM6cmRmPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjJz4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgPHBkZjpBdXRob3I+Q2FybG9zIENhcGFjaG88L3BkZjpBdXRob3I+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnhtcD0naHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyc+CiAgPHhtcDpDcmVhdG9yVG9vbD5DYW52YTwveG1wOkNyZWF0b3JUb29sPgogPC9yZGY6RGVzY3JpcHRpb24+CjwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9J3InPz5DtCnxAAAAAElFTkSuQmCC"},f23e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/services.png)","background-size":"cover","background-position":"center 50%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Servicios")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a registrar, editar, eliminar o activar e inactivar servicios de su negocio.")])]),t.validRoute("servicios","ingresar")?a("base-button",{staticClass:"float-right mt-7 mr-0",attrs:{size:"sm",type:"primary"},on:{click:function(e){t.modals.modal5=!0}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"unordered-list"}}),t._v("\n                    Categorías\n                ")],1):a("base-button",{staticClass:"float-right mt-7 mr-0",attrs:{size:"sm",type:"primary",disabled:""},on:{click:function(e){t.modals.modal5=!0}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"unordered-list"}}),t._v("\n                    Categorías\n                ")],1),t.validRoute("servicios","ingresar")?a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",type:"success"},on:{click:function(e){t.validCreate(),t.clean()}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                    Nuevo\n                ")],1):a("base-button",{staticClass:"float-right mt-7 mr-2",attrs:{size:"sm",type:"success",disabled:""},on:{click:function(e){t.modals.modal1=!0,t.clean()}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                    Nuevo\n                ")],1)],1)])]),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Datos del servicio ")])])],[a("form",{attrs:{role:"form"}},[a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col-md-12"},[a("base-input",{staticClass:"w-100",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"fa fa-font","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:t.serviceRegister,callback:function(e){t.serviceRegister=e},expression:"serviceRegister"}})],1),a("div",{staticClass:"col-md-4"},[a("base-input",{attrs:{alternative:"","max-count":"100",placeholder:"Comisión (%)","addon-left-icon":"fa fa-percent","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:t.comissionRegister,callback:function(e){t.comissionRegister=e},expression:"comissionRegister"}})],1),a("div",{staticClass:"col-md-4"},[a("currency-input",{staticClass:"form-control w-100",attrs:{locale:"de",placeholder:"Costo"},model:{value:t.priceRegister,callback:function(e){t.priceRegister=e},expression:"priceRegister"}})],1),a("div",{staticClass:"col-md-4 marginIf"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.categoryRegister,expression:"categoryRegister"}],staticClass:"form-control mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.categoryRegister=e.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"black"}},[t._v("Categoría")]),t._l(t.categories,(function(e){return a("option",{key:e.name,staticStyle:{color:"black"}},[t._v(t._s(e.name))])}))],2)]),a("div",{staticClass:"col-md-6 row ml-1 mb-3",staticStyle:{"margin-top":"-10px"}},[a("label",{staticClass:"ml-5 mb-3"},[t._v("\n                                Tiempo del servicio\n                            ")]),a("div",{staticClass:"col-6 px-1",staticStyle:{"margin-top":"-10px"}},[a("a-select",{attrs:{"default-value":"0"},model:{value:t.timeHoursRegister,callback:function(e){t.timeHoursRegister=e},expression:"timeHoursRegister"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("\n                                        0 hr\n                                    ")]),a("a-select-option",{attrs:{value:"1"}},[t._v("\n                                        1 hr\n                                    ")]),a("a-select-option",{attrs:{value:"2"}},[t._v("\n                                        2 hr\n                                    ")]),a("a-select-option",{attrs:{value:"3"}},[t._v("\n                                        3 hr\n                                    ")]),a("a-select-option",{attrs:{value:"4"}},[t._v("\n                                        4 hr\n                                    ")]),a("a-select-option",{attrs:{value:"5"}},[t._v("\n                                        5 hr\n                                    ")])],1)],1),a("div",{staticClass:"col-6 px-1",staticStyle:{"margin-top":"-10px"}},[a("a-select",{attrs:{"default-value":"0"},model:{value:t.timeMinutesRegister,callback:function(e){t.timeMinutesRegister=e},expression:"timeMinutesRegister"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("\n                                        0 min\n                                    ")]),a("a-select-option",{attrs:{value:"15"}},[t._v("\n                                        15 min\n                                    ")]),a("a-select-option",{attrs:{value:"30"}},[t._v("\n                                        30 min\n                                    ")]),a("a-select-option",{attrs:{value:"45"}},[t._v("\n                                        45 min\n                                    ")])],1)],1)]),a("div",{staticClass:"row col-sm-6 mx-auto",staticStyle:{"margin-top":"-10px"}},[a("h3",{staticClass:"w-100 text-center"},[t._v("¿Aplica descuento?")]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"false",value:"true",inline:""},model:{value:t.addDiscount,callback:function(e){t.addDiscount=e},expression:"addDiscount"}},[a("b",[t._v("Si")])]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"true",value:"false",checked:"",inline:""},model:{value:t.addDiscount,callback:function(e){t.addDiscount=e},expression:"addDiscount"}},[a("b",[t._v("No")])])],1),a("div",{staticClass:"col-12 row"},[a("div",{staticClass:"col-6 pt-4 pl-3"},[a("p",{staticClass:"mx-auto font-weight-normal mt-2"},[a("strong",{staticClass:"mr-2"},[t._v("Aplica abono ")]),a("a-switch",{staticClass:"mr-2",attrs:{checked:t.payment},on:{click:function(e){return t.checkPayment()}}})],1)]),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:""}},[t._v("Monto mínimo de abono")]),a("currency-input",{staticClass:"form-control w-100",attrs:{locale:"de",disabled:!t.payment,placeholder:"Abono minimo"},model:{value:t.paymentAmount,callback:function(e){t.paymentAmount=e},expression:"paymentAmount"}})],1)])]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-user-check"},[t._v("\n                                    Empleados\n                                ")])]),a("vue-custom-scrollbar",{ref:"tableC",staticClass:"maxHeight"},[a("vue-bootstrap4-table",{attrs:{rows:t.lenders,columns:t.columnsLender,classes:t.classes,config:t.configLender,footer:!1},scopedSlots:t._u([{key:"validationnnn",fn:function(e){return[a("center",[1==e.row.valid?a("base-button",{staticClass:"w-25",attrs:{size:"sm",type:"success",icon:"ni ni-check-bold"},on:{click:function(a){return t.unSelected(e.row._id,e.row.vbt_id)}}}):a("base-button",{staticClass:"w-25",attrs:{size:"sm",type:"danger",icon:"fa fa-ban"},on:{click:function(a){return t.selected(e.row,e.row.vbt_id)}}})],1)]}}])})],1)],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"},[t._v("\n                                    Productos\n                                ")])]),a("vue-custom-scrollbar",{staticClass:"maxHeight"},[a("div",{staticClass:"p-4"},t._l(t.rowsItems,(function(e,s){return a("base-button",{key:e,staticClass:"col-12 mb-1",attrs:{type:"secondary"},on:{click:function(e){return t.itemsFunction(s,1)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("base-checkbox",{staticClass:"float-left",model:{value:t.itemsBox[s].check,callback:function(e){t.$set(t.itemsBox[s],"check",e)},expression:"itemsBox[index].check"}},[t._v(t._s(e.product))])],1),a("div",{staticClass:"col-4"},[""!=t.itemsBox[s].count?a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".8em !important"},attrs:{type:"success"}},[t._v(t._s(t.itemsBox[s].count)+" "+t._s(e.measure))]):t._e()],1)])])})),1)])],1)],1),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:t.registerService}},[t._v("Registrar")])],1)],1)]],2),a("modal",{attrs:{show:t.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal2",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Datos del servicio")])])],[a("form",{attrs:{role:"form"}},[a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col-md-12"},[a("base-input",{staticClass:"w-100 mb-2",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"fa fa-font"},model:{value:t.serviceEdit,callback:function(e){t.serviceEdit=e},expression:"serviceEdit"}})],1),a("div",{staticClass:"col-md-4"},[a("base-input",{staticClass:"w-100",attrs:{alternative:"",type:"text",placeholder:"Comisión","addon-left-icon":"fa fa-percent","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:t.comissionEdit,callback:function(e){t.comissionEdit=e},expression:"comissionEdit"}})],1),a("div",{staticClass:"col-md-4"},[a("currency-input",{staticClass:"form-control mx-auto w-100",attrs:{locale:"de","addon-left-icon":"ni ni-time-alarm","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:t.priceEdit,callback:function(e){t.priceEdit=e},expression:"priceEdit"}})],1),a("div",{staticClass:"col-md-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.editCategoryServicer,expression:"editCategoryServicer"}],staticClass:"form-control mx-auto",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.editCategoryServicer=e.target.multiple?a:a[0]}}},t._l(t.categories,(function(e){return a("option",{key:e.name,staticStyle:{color:"black"}},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"col-md-6 row ml-1",staticStyle:{"margin-top":"-10px"}},[a("label",{staticClass:"ml-5"},[t._v("\n                                Tiempo del servicio\n                            ")]),a("div",{staticClass:"col-6 px-1",staticStyle:{"margin-top":"-10px"}},[a("a-select",{attrs:{"default-value":"0"},model:{value:t.editTimeHoursRegister,callback:function(e){t.editTimeHoursRegister=e},expression:"editTimeHoursRegister"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("\n                                        0 hr\n                                    ")]),a("a-select-option",{attrs:{value:"1"}},[t._v("\n                                        1 hr\n                                    ")]),a("a-select-option",{attrs:{value:"2"}},[t._v("\n                                        2 hr\n                                    ")]),a("a-select-option",{attrs:{value:"3"}},[t._v("\n                                        3 hr\n                                    ")]),a("a-select-option",{attrs:{value:"4"}},[t._v("\n                                        4 hr\n                                    ")]),a("a-select-option",{attrs:{value:"5"}},[t._v("\n                                        5 hr\n                                    ")])],1)],1),a("div",{staticClass:"col-6 px-1",staticStyle:{"margin-top":"-10px"}},[a("a-select",{attrs:{"default-value":"0"},model:{value:t.editTimeMinutesRegister,callback:function(e){t.editTimeMinutesRegister=e},expression:"editTimeMinutesRegister"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("\n                                        0 min\n                                    ")]),a("a-select-option",{attrs:{value:"15"}},[t._v("\n                                        15 min\n                                    ")]),a("a-select-option",{attrs:{value:"30"}},[t._v("\n                                        30 min\n                                    ")]),a("a-select-option",{attrs:{value:"45"}},[t._v("\n                                        45 min\n                                    ")])],1)],1)]),a("div",{staticClass:"row mx-auto col-md-6",staticStyle:{"margin-top":"-2%"}},[a("h3",{staticClass:"w-100 text-center"},[t._v("¿Aplica descuento?")]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"false",inline:""},model:{value:t.addDiscountEdit,callback:function(e){t.addDiscountEdit=e},expression:"addDiscountEdit"}},[a("b",[t._v("Si")])]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"true",inline:""},model:{value:t.addDiscountEdit,callback:function(e){t.addDiscountEdit=e},expression:"addDiscountEdit"}},[a("b",[t._v("No")])])],1),a("div",{staticClass:"col-12 row"},[a("div",{staticClass:"col-6 pt-4 pl-5"},[a("p",{staticClass:"mx-auto font-weight-normal mt-2"},[a("strong",{staticClass:"mr-2"},[t._v("Aplica abono ")]),a("a-switch",{staticClass:"mr-2",attrs:{checked:t.editPayment},on:{click:function(e){return t.checkPaymentEdit()}}})],1)]),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:""}},[t._v("Monto mínimo de abono")]),a("currency-input",{staticClass:"form-control w-100",attrs:{locale:"de",disabled:!t.editPayment,placeholder:"Abono minimo"},model:{value:t.editPaymentAmount,callback:function(e){t.editPaymentAmount=e},expression:"editPaymentAmount"}})],1)])]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-user-check"},[t._v("\n                                    Empleados\n                                ")])]),a("vue-custom-scrollbar",{ref:"table",staticClass:"maxHeight"},[a("vue-bootstrap4-table",{attrs:{rows:t.lenders,columns:t.columnsLender,classes:t.classes,config:t.configLender},scopedSlots:t._u([{key:"validationnnn",fn:function(e){return[a("center",[e.row.valid?a("base-button",{staticClass:"w-25",attrs:{size:"sm",type:"success",icon:"ni ni-check-bold"},on:{click:function(a){return t.unSelected(e.row._id,e.row.vbt_id)}}}):a("base-button",{staticClass:"w-25",attrs:{size:"sm",type:"danger",icon:"fa fa-ban"},on:{click:function(a){return t.selected(e.row,e.row.vbt_id)}}})],1)]}}])})],1)],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"},[t._v("\n                                    Productos\n                                ")])]),a("vue-custom-scrollbar",{staticClass:"maxHeight"},[a("div",{staticClass:"p-4"},t._l(t.rowsItems,(function(e,s){return a("base-button",{key:e,staticClass:"col-12 mb-1",attrs:{type:"secondary"},on:{click:function(e){return t.itemsFunction(s,2)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("base-checkbox",{staticClass:"float-left",model:{value:t.itemsBox[s].check,callback:function(e){t.$set(t.itemsBox[s],"check",e)},expression:"itemsBox[index].check"}},[t._v(t._s(e.product))])],1),a("div",{staticClass:"col-4"},[""!=t.itemsBox[s].count?a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".8em !important"},attrs:{type:"success"}},[t._v(t._s(t.itemsBox[s].count)+" "+t._s(e.measure))]):t._e()],1)])])})),1)])],1)],1),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:t.editService}},[t._v("Editar")])],1)],1)]],2)],1),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v(t._s(t.alertTable))])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.serviceState,"data-source":t.services,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por nombre",value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                    Buscar\n                ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                    resetear\n                ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,s,n,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,s){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:s,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v("\n                    "+t._s(e)+"\n                ")]]}},{key:"actionButtons",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Editar")])]),t.validRoute("servicios","editar")?a("base-button",{staticClass:"text-center",attrs:{icon:"fa fa-edit",size:"sm",type:"default"},on:{click:function(e){return t.dataEdit(s._id,s.employes,s.name,s.duration,s.discount,s.commission,s.price,s.products,s.category,s.branch,s.prepayment)}}}):a("base-button",{staticClass:"text-center",attrs:{icon:"fa fa-edit",size:"sm",type:"default",disabled:""}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Activar / Desactivar")])]),t.validRoute("servicios","activaciones")?[s.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success"},on:{click:function(e){return t.changeStatus(s._id)}}}):a("base-button",{staticClass:"text-center",attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.changeStatus(s._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"close"}})],1)]:[s.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success",disabled:""}}):a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-remove",size:"sm",type:"danger",disabled:""}})]],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Eliminar")])]),t.validRoute("servicios","editar")?a("base-button",{staticClass:"text-center",attrs:{size:"sm",type:"danger"},on:{click:function(e){return t.deleteService(s._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"delete"}})],1):a("base-button",{staticClass:"text-center",attrs:{size:"sm",type:"danger",disabled:""}},[a("a-icon",{staticStyle:{"vertical-align":"1px"},attrs:{type:"delete"}})],1)],2)]}},{key:"format-price",fn:function(e,a){return[t._v("\n                "+t._s(t.formatPrice(a.price))+"\n            ")]}},{key:"format-time",fn:function(e,a){return[t._v("\n                "+t._s(a.duration)+"Min\n            ")]}},{key:"format-commission",fn:function(e,a){return[t._v("\n                "+t._s(a.commission)+"%\n            ")]}},{key:"prepayment-slot",fn:function(e,a){return[t._v("\n                "+t._s(a.prepayment.ifPrepayment?"Si":"No")+"\n            ")]}},{key:"discount-slot",fn:function(e,a){return[t._v("\n                "+t._s(a.discount?"No":"Si")+"\n            ")]}}])})],1),a("modal",{attrs:{show:t.modals.modal3,gradient:t.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(e){return t.$set(t.modals,"modal3",e)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:t.modals.icon}),a("h1",{staticClass:"heading mt-5"},[t._v(t._s(t.modals.message))])])]),a("modal",{attrs:{show:t.modals.modal4,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal4",e)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-2","body-classes":"px-lg-2 py-lg-3"}},[[a("div",{staticClass:"text-muted text-center mb-2"},[a("small",[t._v("Cantidad")])])],[a("center",[a("div",{staticClass:"row mx-auto"},[a("div",{staticClass:"col-7"},[a("base-input",{attrs:{alternative:"",placeholder:"Cantidad por uso",type:"number","addon-left-icon":"fa fa-list-ol"},model:{value:t.countModal,callback:function(e){t.countModal=e},expression:"countModal"}})],1),a("div",{staticClass:"col-5"},[a("base-input",{staticClass:"pl-2",attrs:{alternative:"",placeholder:"Cantidad por uso",readonly:""},model:{value:t.unitPerItem,callback:function(e){t.unitPerItem=e},expression:"unitPerItem"}})],1)])]),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-1",attrs:{type:"primary"},on:{click:t.selectedItem}},[t._v("Registrar")])],1)]],2)],1),a("modal",{attrs:{show:t.modals.modal5,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(e){return t.$set(t.modals,"modal5",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-2","body-classes":"px-lg-5 py-lg-3"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[t._v("Categorías - "+t._s(this.branchName))])])],[a("vue-bootstrap4-table",{staticClass:"class_categories",attrs:{rows:t.categories,columns:t.columnsCategories,classes:t.classes,config:t.configCategories},scopedSlots:t._u([{key:"deleteCat",fn:function(e){return[a("center",[a("base-button",{staticClass:"text-center mr-2",attrs:{size:"sm",type:"danger"},on:{click:function(a){return t.deleteCategory(e.row._id)}}},[a("a-icon",{staticStyle:{"vertical-align":"2px","font-weight":"bold"},attrs:{type:"close"}})],1)],1)]}}])}),a("div",{staticClass:"row p-0 mt-2"},[a("div",{staticClass:"col-10 pr-5"},[a("base-input",{staticClass:"pl-1",attrs:{alternative:"",placeholder:"Nombre de la categoría",id:"catFocus","addon-left-icon":"fa fa-list-ol"},model:{value:t.nameCategory,callback:function(e){t.nameCategory=e},expression:"nameCategory"}})],1),a("div",{staticClass:"col-2"},[a("base-button",{staticClass:"float-right",attrs:{type:"success",disabled:""==t.nameCategory},on:{click:t.newCategory}},[t._v("\n                            Agregar\n                        ")])],1)])]],2)],1)],1)},n=[],i=(a("ac6a"),a("28a5"),a("a481"),a("96cf"),a("3b8d")),o=a("bd86"),r=(a("7f7f"),a("6b54"),a("6762"),a("2fdb"),a("bc3a")),l=a.n(r),c=a("a5e9"),d=a.n(c),u=a("12f9"),m=(a("41cb"),a("e366")),p=a("04e1"),f=a.n(p),h=a("714b"),g=a("4b70"),v=a.n(g),b=a("ef34"),y=a("bb36"),C={mixins:[b["a"],y["a"]],components:{VueBootstrap4Table:u["a"],Modal:h["a"],vueCustomScrollbar:v.a},data:function(){var t,e,a,s=this;return{auth:[],categoryRegister:"Categoría",unitPerItem:"",countModal:"",typeItemModal:"",itemUses:"",serviceState:!0,configHeader:{headers:{"x-database-connect":d.a.database,"x-access-token":localStorage.userToken}},payment:!1,paymentAmount:0,editPayment:!1,editPaymentAmount:0,alertTable:"Selecciona un filtro en la parte superior",modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},nameCategory:"",categories:[],serviceRegister:"",priceRegister:0,comissionRegister:"",timeHoursRegister:"Horas",timeMinutesRegister:"Minutos",services:[],editTimeHoursRegister:"",editTimeMinutesRegister:"",columnsLender:[{label:"Nombre",name:"firstName",sort:!0},{label:"Acciones",name:"valid",slot_name:"validationnnn",sort:!1}],columnsItem:[{label:"Nombre",name:"producto",sort:!0}],columnsCategories:[{label:"Nombre",name:"name",sort:!0},{label:"Borrar",name:"name",slot_name:"deleteCat",sort:!1}],columns:[{title:"Nombre",dataIndex:"name",key:"name",width:"30%",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.name.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){s.searchInput.focus()}),0)}},{title:"Costo",dataIndex:"price",key:"price",ellipsis:!0,scopedSlots:{customRender:"format-price"},defaultSortOrder:"descend",sorter:function(t,e){return t.price-e.price}},{title:"Duración",dataIndex:"duration",key:"duration",scopedSlots:{customRender:"format-time"},defaultSortOrder:"descend",sorter:function(t,e){return t.duration-e.duration},ellipsis:!0},{title:"Comisión",dataIndex:"commission",key:"commission",scopedSlots:{customRender:"format-commission"},ellipsis:!0},{title:"Abono",dataIndex:"prepayment",key:"prepayment",scopedSlots:{customRender:"prepayment-slot"},defaultSortOrder:"descend",sorter:function(t,e){return t.duration-e.duration},ellipsis:!0},{title:"Descuento",dataIndex:"discount",key:"discount",scopedSlots:{customRender:"discount-slot"},ellipsis:!0},{title:"Acciones",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"actionButtons"},ellipsis:!0}],config:(t={card_title:"Tabla de servicios",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(o["a"])(t,"rows_selectable",!0),Object(o["a"])(t,"per_page_options",[5,10,20,30,40,50,80,100]),Object(o["a"])(t,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(o["a"])(t,"show_refresh_button",!1),Object(o["a"])(t,"show_reset_button",!1),Object(o["a"])(t,"selected_rows_info",!0),Object(o["a"])(t,"preservePageOnDataChange",!0),Object(o["a"])(t,"pagination_info",!0),t),configCategories:(e={card_title:"",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(o["a"])(e,"rows_selectable",!1),Object(o["a"])(e,"per_page_options",[5,10,20,30,40,50,80,100]),Object(o["a"])(e,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(o["a"])(e,"show_refresh_button",!1),Object(o["a"])(e,"show_reset_button",!1),Object(o["a"])(e,"selected_rows_info",!1),Object(o["a"])(e,"preservePageOnDataChange",!1),Object(o["a"])(e,"pagination_info",!1),Object(o["a"])(e,"pagination",!1),e),configLender:(a={checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(o["a"])(a,"rows_selectable",!0),Object(o["a"])(a,"per_page_options",[5,10,20,30,40,50,80,100]),Object(o["a"])(a,"show_refresh_button",!1),Object(o["a"])(a,"show_reset_button",!1),Object(o["a"])(a,"selected_rows_info",!1),Object(o["a"])(a,"preservePageOnDataChange",!1),Object(o["a"])(a,"pagination_info",!1),Object(o["a"])(a,"pagination",!1),Object(o["a"])(a,"global_search",{placeholder:"Busque el prestador",visibility:!0,case_sensitive:!1,showClearButton:!0,searchOnPressEnter:!1,searchDebounceRate:200}),a),classes:{table:"table-bordered table-striped"},lenders:[],lenderSelecteds:[],addDiscount:!1,idServiceEdit:"",EditlenderSelecteds:[],serviceEdit:"",priceEdit:0,comissionEdit:0,timeEdit:"",addDiscountEdit:"",prueba:"false",rowsItems:[],itemSelected:[],EdititemSelected:[],itemsBox:[],itemIndex:"",editCategoryServicer:"",branch:"",branchName:"",branches:[],branchRegister:"",branchEdit:"",searchText:"",searchInput:null,searchedColumn:"",status:0}},created:function(){this.getToken(),this.getBranch(),$(document).ready((function(){setTimeout((function(){$("input[placeholder='Go to page']").hide()}),200)}))},methods:{getToken:function(){var t=localStorage.userToken,e=f()(t);this.auth=e.access,this.branch=e.branch},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},checkPayment:function(){this.payment=!this.payment},checkPaymentEdit:function(){this.editPayment=!this.editPayment},getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.getServices(),this.getEmployes(),this.getProducts(),this.getCategories()},validCreate:function(){0==this.categories.length?this.$swal({icon:"error",title:"Registra una categoría",text:"Debes registrar una categoría para continuar",showConfirmButton:!0}):this.modals.modal1=!0},deleteService:function(t){var e=this;this.$swal({title:"¿Eliminar servicio?",text:"¡Recuerda! no se puede revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?l.a.delete(d.a.endpointTarget+"/services/"+t,e.configHeader).then((function(t){"ok"==t.data.status&&e.getServices()})).catch((function(t){return console.log(t)})):e.$swal({icon:"info",title:"acción cancelada",showConfirmButton:!1,timer:1500})}))},getServices:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.serviceState=!0,t.prev=1,t.next=4,l.a.get(d.a.endpointTarget+"/services/"+this.branch,this.configHeader);case 4:e=t.sent,"ok"==e.data.status?(this.services=e.data.data,this.serviceState=!1):(this.services=[],this.serviceState=!1,this.alertTable="Sucursal sin servicios creados"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),getProducts:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(d.a.endpointTarget+"/stores/getinventorybybranchforservice/"+this.branch,this.configHeader);case 3:if(e=t.sent,"ok"==e.data.status)for(this.rowsItems=e.data.data,a=0;a<this.rowsItems.length;a++)this.itemsBox.push({check:!1,count:"",id:this.rowsItems[a]._id});t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),formatPrice:function(t){var e=(t/1).toFixed(2).replace(".",",");return"$ "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},getEmployes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(d.a.endpointTarget+"/employes/employesbybranch/"+this.branch,this.configHeader);case 3:if(e=t.sent,"ok"==e.data.status){for(a=0;a<e.data.data.length;a++)e.data.data[a].valid=!1;this.lenders=e.data.data}else this.lenders=[];t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),selectedAll:function(t){for(var e=0;e<t.selected_items.length;e++)this.lenderSelecteds.push(t.selected_items[e]._id),this.EditlenderSelecteds.push({id:t.selected_items[e]._id,name:t.selected_items[e].firstName+" "+t.selected_items[e].lastName,class:t.selected_items[e].class,days:t.selected_items[e].days})},unSelectedAll:function(t){this.lenderSelecteds=[],this.EditlenderSelecteds=[]},selectedItem:function(t){""!=this.countModal?(this.itemsBox[this.itemIndex].check=!0,this.itemsBox[this.itemIndex].count=this.countModal,1==this.typeItemModal&&this.itemSelected.push({id:this.rowsItems[this.itemIndex]._id,count:this.itemsBox[this.itemIndex].count,name:this.rowsItems[this.itemIndex].product}),2==this.typeItemModal&&this.EdititemSelected.push({id:this.rowsItems[this.itemIndex]._id,count:this.itemsBox[this.itemIndex].count,name:this.rowsItems[this.itemIndex].product}),this.$swal({type:"success",icon:"success",toast:!0,position:"top-end",title:"Ingreso producto",showConfirmButton:!1,timer:1500}),this.modals.modal4=!1):this.$swal({icon:"error",title:"Debe rellenar los datos",showConfirmButton:!1,timer:1500})},unSelectedItem:function(t){for(var e=0;e<this.itemSelected.length;e++)if(this.itemSelected[e]==t.unselected_item._id){this.itemSelected.splice(e,1);break}for(var a=0;a<this.EdititemSelected.length;a++)if(this.EdititemSelected[a]==t.unselected_item._id){this.EdititemSelected.splice(a,1);break}},selectedAllItem:function(t){for(var e=0;e<t.selected_items.length;e++)this.itemSelected.push(t.selected_items[e]._id),this.EdititemSelected.push(t.selected_items[e]._id)},unSelectedAllItem:function(t){this.itemSelected=[],this.EdititemSelected=[]},registerService:function(){var t=this,e=0;"Horas"!=this.timeHoursRegister&&"Minutos"!=this.timeMinutesRegister&&(this.timeHoursRegister.includes("hr")&&(this.timeHoursRegister=this.timeHoursRegister.split(" ")[0]),this.timeMinutesRegister.includes("min")&&(this.timeMinutesRegister=this.timeMinutesRegister.split(" ")[0]),e=60*this.timeHoursRegister+parseFloat(this.timeMinutesRegister)),""==this.serviceRegister||0==this.priceRegister||0==e||""==this.comissionRegister||"Categoría"==this.categoryRegister?"Categoría"==this.categoryRegister?this.$swal({icon:"info",title:"Seleccione categoría",showConfirmButton:!1,timer:1500}):0==this.priceRegister?this.$swal({icon:"info",title:"Debe registrar precio",showConfirmButton:!1,timer:1500}):""==this.serviceRegister?this.$swal({icon:"info",title:"Debe llenar datos en blanco",showConfirmButton:!1,timer:1500}):0==e&&this.$swal({icon:"info",title:"Debe completar horas y minutos",showConfirmButton:!1,timer:1500}):this.paymentAmount>this.priceRegister?this.$swal({icon:"info",title:"Monto de abono no valido",text:"El monto de abono no debe superar el precio del servicio",showConfirmButton:!0}):0==this.lenderSelecteds.length?this.$swal({icon:"info",title:"Debe seleccionar un empleado",showConfirmButton:!1,timer:1500}):l.a.post(d.a.endpointTarget+"/services",{branch:this.branch,name:this.serviceRegister,price:this.priceRegister,commission:this.comissionRegister,duration:e,employes:this.lenderSelecteds,products:this.itemSelected,category:this.categoryRegister,discount:this.addDiscount,prepayment:this.payment,prepaymentAmount:this.paymentAmount},this.configHeader).then((function(e){"ok"==e.data.status?(t.$swal({icon:"success",title:"Servicios creados",showConfirmButton:!1,timer:1500}),t.initialState(),t.getServices(),m["a"].$emit("reloadServices","reload")):t.$swal({icon:"error",title:"El servicio ya existe",showConfirmButton:!1,timer:1500})}))},initialState:function(){this.serviceRegister="",this.priceRegister=0,this.comissionRegister="",this.timeRegister="Seleccione el tiempo",this.lenderSelecteds=[],this.payment=!1,this.paymentAmount=0,this.addDiscount=!1,this.modals.modal1=!1,$(".maxHeight  thead .vbt-checkbox").click(),$(".maxHeight  thead .vbt-checkbox").prop("checked",!1)},selected:function(t,e){this.lenders[e-1].valid=!0,console.log(t),this.lenderSelecteds.push({id:t._id,name:t.firstName+" "+t.lastName,class:t.class,days:t.days,img:t.users?t.users.userImage:"no"}),this.EditlenderSelecteds.push({id:t._id,name:t.firstName+" "+t.lastName,class:t.class,days:t.days,img:t.users?t.users.userImage:"no"})},unSelected:function(t,e){this.lenders[e-1].valid=!1;for(var a=0;a<this.lenderSelecteds.length;a++)if(this.lenderSelecteds[a].id==t){this.lenderSelecteds.splice(a,1);break}for(var s=0;s<this.EditlenderSelecteds.length;s++)if(this.EditlenderSelecteds[s].id==t){this.EditlenderSelecteds.splice(s,1);break}},dataEdit:function(t,e,a,s,n,i,o,r,l,c,d){console.log(r),this.itemsBox.forEach((function(t){t.check=!1,t.count=""}));for(var u=0;u<r.length;u++)for(var m=r[u],p=0;p<this.itemsBox.length;p++)m.id==this.itemsBox[p].id&&(this.itemsBox[p].check=!0,this.itemsBox[p].count=m.count);console.log(d),d?(this.editPayment=d.ifPrepayment,this.editPaymentAmount=d.amount):(this.editPayment=!1,this.editPaymentAmount=0),console.log(this.itemsBox),this.EditlenderSelecteds=[],this.EdititemSelected=[];this.idServiceEdit=t,this.EditlenderSelecteds=e,this.EdititemSelected=r,this.serviceEdit=a,this.branchEdit=c,this.priceEdit=o,this.editCategoryServicer=l,this.comissionEdit=i,this.editTimeHoursRegister=parseInt(s/60)+" hr",this.editTimeMinutesRegister=s-60*parseInt(s/60)+" min",this.addDiscountEdit=n,this.modals.modal2=!0,this.EditlenderSelecteds=[];for(var f=0;f<this.lenders.length;f++){var h=this.lenders[f];this.lenders[f].valid=!1;for(var g=0;g<e.length;g++){var v=e[g];v.id==h._id&&(this.EditlenderSelecteds.push({id:h._id,name:h.firstName+" "+h.lastName,class:h.class,days:h.days,img:h.users?h.users.userImage:""}),this.lenders[f].valid=!0)}}},clean:function(){this.categoryRegister="Categoría",this.timeHoursRegister="Horas",this.timeMinutesRegister="Minutos",this.itemsBox.forEach((function(t){t.check=!1,t.count=""})),this.lenderSelecteds=[],this.EditlenderSelecteds=[];for(var t=0;t<this.lenders.length;t++){var e=this.lenders[t];e.valid=!1}},editService:function(){var t=this;console.log(this.EdititemSelected);var e=0;if(this.editTimeHoursRegister.includes("hr")&&(this.editTimeHoursRegister=this.editTimeHoursRegister.split(" ")[0]),this.editTimeMinutesRegister.includes("min")&&(this.editTimeMinutesRegister=this.editTimeMinutesRegister.split(" ")[0]),e=60*this.editTimeHoursRegister+parseFloat(this.editTimeMinutesRegister),""==this.serviceEdit||""==this.priceEdit||e<=0||""==this.comissionEdit)this.$swal({icon:"error",title:"Debe rellenar los datos",showConfirmButton:!1,timer:1500});else if(this.editPaymentAmount>this.priceEdit)this.$swal({icon:"info",title:"Monto de abono no valido",text:"El monto de abono no debe superar el precio del servicio",showConfirmButton:!0});else if(0==this.EditlenderSelecteds.length)this.$swal({icon:"error",title:"Debe seleccionar almenos un prestador",showConfirmButton:!1,timer:1500});else{this.addDiscountEdit;var a=this.idServiceEdit;l.a.put(d.a.endpointTarget+"/services/"+a,{branch:this.branch,name:this.serviceEdit,price:this.priceEdit,commission:this.comissionEdit,duration:e,employes:this.EditlenderSelecteds,products:this.EdititemSelected,category:this.editCategoryServicer,discount:this.addDiscountEdit,prepayment:this.editPayment,prepaymentAmount:this.editPaymentAmount},this.configHeader).then((function(e){"ok"==e.data.status&&(t.$swal({icon:"success",title:"Servicio actualizado",showConfirmButton:!1,timer:1500}),t.modals.modal2=!1,t.getServices(),m["a"].$emit("reloadServices","reload"))}))}},changeStatus:function(t){var e=this;l.a.put(d.a.endpointTarget+"/services/changeActive/"+t,{id:t},this.configHeader).then((function(t){e.getServices()})).catch((function(t){e.$swal({icon:"error",title:"Debe rellenar los datos",showConfirmButton:!1,timer:1500})}))},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}},itemsFunction:function(t,e){var a=this;setTimeout((function(){""==a.itemsBox[t].count?(a.itemsBox[t].check&&(a.itemsBox[t].check=!1),a.typeItemModal=e,a.countModal="",a.modals.modal4=!0,a.itemIndex=t,a.unitPerItem=a.rowsItems[t].measure):a.$swal({title:"¿Está seguro que desea eliminar este producto del servicio?",type:"warning",icon:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){if(e.value){a.itemsBox[t].count="",a.itemsBox[t].check=!1;for(var s=0;s<a.itemSelected.length;s++)if(a.itemSelected[s].id==a.rowsItems[t]._id){a.itemSelected.splice(s,1);break}for(var n=0;n<a.EdititemSelected.length;n++)if(a.EdititemSelected[n].id==a.rowsItems[t]._id){a.EdititemSelected.splice(n,1);break}}else a.itemsBox[t].check=!0,a.$swal({type:"error",icon:"error",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}))}),200)},getCategories:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(d.a.endpointTarget+"/services/getCategories/"+this.branch,this.configHeader);case 3:e=t.sent,"ok"==e.data.status?this.categories=e.data.data:this.categories=[],t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),newCategory:function(){var t=this;l.a.post(d.a.endpointTarget+"/services/newCategory",{branch:this.branch,name:this.nameCategory},this.configHeader).then((function(e){"ok"==e.data.status?(t.getCategories(),t.nameCategory="",document.getElementById("catFocus").focus(),t.modals.modal6=!1):(t.nameCategory="",t.$swal({icon:"info",title:"Esta categoría ya esta creada",showConfirmButton:!1,timer:1500}))}))},deleteCategory:function(t){var e=this;l.a.delete(d.a.endpointTarget+"/services/deleteCategory/"+t,this.configHeader).then((function(t){"ok"==t.data.status&&e.getCategories()}))}},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}},mounted:function(){var t=this;m["a"].$on("changeBranch",(function(e){t.getBranch()}))}},w=C,x=(a("b41a"),a("2877")),_=Object(x["a"])(w,s,n,!1,null,null,null);e["default"]=_.exports},f8bb:function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;var s=a("24e2");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}var r=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),!e)throw new TypeError("Failed to construct '".concat(this.constructor.name,"'. 1 argument required, ").concat(arguments.length," given."));(0,s.assign)(this,t.defaults(),a,{type:e}),(0,s.defineProperties)(this,{type:(0,s.readonlyDescriptor)(),cancelable:(0,s.readonlyDescriptor)(),nativeEvent:(0,s.readonlyDescriptor)(),target:(0,s.readonlyDescriptor)(),relatedTarget:(0,s.readonlyDescriptor)(),vueTarget:(0,s.readonlyDescriptor)()});var i=!1;this.preventDefault=function(){this.cancelable&&(i=!0)},(0,s.defineProperty)(this,"defaultPrevented",{enumerable:!0,get:function(){return i}})}return o(t,null,[{key:"defaults",value:function(){return{type:"",cancelable:!0,nativeEvent:null,target:null,relatedTarget:null,vueTarget:null}}}]),t}(),l=r;e.default=l},fd5d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header d-flex align-items-center",staticStyle:{"min-height":"300px","background-image":"url(img/theme/access.png)","background-size":"cover","background-position":"center"}},[a("span",{staticClass:"mask bg-gradient-success opacity-5"}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("h1",{staticClass:"display-2 text-white mb-0"},[t._v("Perfiles de acceso")]),a("p",{staticClass:"text-white mt-0"},[t._v("Sección dedicada a la creación de perfiles de accesos, que se le asignen a los usuarios.")])])])]),a("base-button",{staticClass:"float-right mr-5",staticStyle:{"margin-top":"-50px"},attrs:{size:"sm",type:"success"},on:{click:function(e){t.modals.modal1=!0}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.6em"},attrs:{type:"idcard"}}),t._v("\n            Registrar\n        ")],1)],1),a("div",{staticClass:"container-fluid mt--7 pb-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-8 col-sm-12 order-xl-2 mb-5 mb-xl-0"},[a("div",{staticClass:"card card-profile shadow"},[t.IfSelect&&"Gerente"!=t.profileSelect.name?a("base-button",{staticClass:"putoBoton",attrs:{size:"sm",type:"danger"},on:{click:t.removeProfile}},[a("i",{staticClass:"fa fa-ban float-left mt-1"}),t._v("\n                        Eliminar\n                    ")]):t._e(),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"60px"},attrs:{type:"info-circle"}}),a("h1",[t._v("Seleccione un perfil para configurar")])],1)]},proxy:!0}])},[""==t.profileSelect.name?a("a-list"):t._e()],1),""!=t.profileSelect.name?a("div",{staticClass:"p-2"},[a("p",[a("strong",{staticClass:"mr-2"},[t._v("Activar comisiones ")]),a("a-switch",{attrs:{checked:t.commissionsProfile},on:{change:t.activeCommission}})],1),a("h2",[t._v("Accesos")]),a("div",{staticClass:"row"},t._l(t.routesProfiles,(function(e,s){return a("div",{key:e.ruta,staticClass:"col-md-4"},[a("base-button",{staticClass:"w-100 mt-2",attrs:{type:e.valid?"success":"danger"},on:{click:function(a){return t.openFunctionalities(s,e.route)}}},[a("i",{staticClass:"float-left mt-1",class:e.valid?"ni ni-check-bold":"fa fa-ban"}),a("span",{staticClass:"text-center"},[t._v(t._s(e.route.charAt(0).toUpperCase())+t._s(e.route.slice(1)))])])],1)})),0)]):t._e()],1)]),a("div",{staticClass:"col-xl-2 col-sm-12 order-xl-1"},[a("card",{attrs:{shadow:"",type:"secondary"}},[a("div",{staticClass:"row align-items-center py-2"},[a("h3",{staticClass:"mb-2 w-100 text-center"},[t._v("Perfiles")]),t._l(t.accessProfiles,(function(e,s){return a("base-button",{key:e.profile,staticClass:"w-100 mt-2 mx-auto",attrs:{size:"sm",outline:t.profileSelect.name!=e.profile,type:"primary"},on:{click:function(a){return t.selectProfile(e.profile,e.routes,s)}}},[t._v(t._s(e.profile))])}))],2)])],1)])]),a("a-modal",{attrs:{width:400},model:{value:t.modals.modal1,callback:function(e){t.$set(t.modals,"modal1",e)},expression:"modals.modal1"}},[[a("div",{staticClass:"text-muted text-center"},[a("h3",[t._v("Crear perfil")]),a("p",[t._v("Activar comisiones "),a("a-switch",{attrs:{size:"small",checked:t.newAccess.commission},on:{change:t.activeProfileCommission}})],1)])],[a("a-input",{staticClass:"mb-2",attrs:{placeholder:"Nombre del perfil"},model:{value:t.newAccess.name,callback:function(e){t.$set(t.newAccess,"name",e)},expression:"newAccess.name"}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)","font-size":"1.2em","vertical-align":"1.5px"},attrs:{slot:"prefix",type:"idcard"},slot:"prefix"}),a("i",{staticClass:"fa fa-asterisk text-danger",attrs:{slot:"suffix"},slot:"suffix"})],1)],a("template",{slot:"footer"},[a("base-button",{staticClass:"mt-2",attrs:{size:"sm",type:"success"},on:{click:t.createAccess}},[t._v("\n                Registrar perfil\n            ")])],1)],2),a("a-modal",{attrs:{footer:null,width:500},model:{value:t.modals.modal2,callback:function(e){t.$set(t.modals,"modal2",e)},expression:"modals.modal2"}},[[a("div",{staticClass:"text-muted text-center"},[a("h3",[t._v("Habilite las funciones de la sección de "),a("span",{staticClass:"text-primary"},[a("b",[t._v(t._s(t.selectedRouteName.charAt(0).toUpperCase())+t._s(t.selectedRouteName.slice(1)))])])]),a("p",[t._v("Activar acceso "),a("a-switch",{attrs:{size:"small",checked:t.routesProfiles[t.routeSelected].valid},on:{change:t.changeActive}})],1)])],[a("div",{staticClass:"p-2"},[a("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.routesProfiles[t.routeSelected].functions},scopedSlots:t._u([{key:"slot-functions",fn:function(e,s,n){return[a("base-button",{staticClass:"w-100",attrs:{disabled:!t.routesProfiles[t.routeSelected].valid,size:"sm",type:s.valid?"success":"danger"},on:{click:function(e){return t.activeFunction(s.function,n)}}},[a("i",{class:s.valid?"ni ni-check-bold":"fa fa-ban"})])]}}])})],1)]],2)],1)},n=[],i=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=a("a5e9"),c=a.n(l),d=a("e366"),u=a("04e1"),m=a.n(u),p=a("ef34"),f=a("82ea"),h=a("bb36"),g={components:{BaseButton:f["a"]},mixins:[p["a"],h["a"]],data:function(){var t=localStorage.userToken,e=m()(t);return{id:e._id,configHeader:{headers:{"x-database-connect":c.a.database,"x-access-token":localStorage.userToken}},accessProfiles:[],idProfile:"",profileSelect:{name:"",index:0},selectedRouteName:"",newAccess:{name:"",commission:!1},routesProfile:[],columns:[{title:"Funciones",dataIndex:"name",key:"name",width:"70%"},{title:"Activadores",dataIndex:"function",key:"function",scopedSlots:{customRender:"slot-functions"},width:"30%"}],routesProfiles:[{route:"procesar",valid:!1,functions:[{function:"editar_cliente",name:"Editar cliente",valid:!1},{function:"nuevo_cliente",name:"Registrar cliente",valid:!1},{function:"descuento",name:"Ingresar descuento",valid:!1}]},{route:"reportes",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1}]},{route:"usuarios",valid:!1,functions:[{function:"registrar",name:"Registar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1}]},{route:"ventas",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"anular",name:"Anular",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"correo",name:"Enviar correo",valid:!1},{function:"reporte",name:"Descargar reporte",valid:!1}]},{route:"servicios",valid:!1,functions:[{function:"ingresar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"activaciones",name:"Activar o Desactivar",valid:!1},{function:"categoria",name:"Gestionar categorias",valid:!1}]},{route:"empleados",valid:!1,functions:[{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"reportes",name:"Ver reporte",valid:!1},{function:"cerrar ventas",name:"Cerrar ventas",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"adelantos",name:"Adelantos o Bonos",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]},{route:"clientes",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"correos",name:"Envio de correos",valid:!1},{function:"excel",name:"Descargar excel",valid:!1}]},{route:"inventario",valid:!1,functions:[{function:"cerrar",name:"Cerrar inventario",valid:!1},{function:"cambiar_tipo",name:"Cambiar tipo",valid:!1}]},{route:"gastos",valid:!1,functions:[{function:"registrar_bono",name:"Registrar bono",valid:!1},{function:"registrar_gasto",name:"Registrar gasto",valid:!1},{function:"registrar_inversion",name:"Registrar inversion",valid:!1},{function:"cierre",name:"Cerrar gastos",valid:!1},{function:"filtrar",name:"Filtrar registros",valid:!1},{function:"eliminar",name:"Borrar gastos",valid:!1}]},{route:"agendamiento",valid:!1,functions:[{function:"filtrar",name:"Filtrar",valid:!1},{function:"agendar",name:"Agendar",valid:!1},{function:"todas",name:"Ver todas las agendas",valid:!1},{function:"editar",name:"Editar cita",valid:!1},{function:"eliminar",name:"Eliminar cita",valid:!1},{function:"finalizar",name:"Finalizar cita",valid:!1},{function:"confirmacion",name:"Enviar confirmacion",valid:!1}]},{route:"caja",valid:!1,functions:[{function:"visualizar",name:"Ver cierres",valid:!1},{function:"cerrar",name:"hacer cierre",valid:!1},{function:"fondo",name:"Ingresar fondos",valid:!1},{function:"reporte",name:"Ver reporte del cierre",valid:!1},{function:"editar",name:"Editar cierre",valid:!1}]},{route:"bodega",valid:!1,functions:[{function:"registrar_producto",name:"Registrar producto",valid:!1},{function:"editar_producto",name:"Editar producto",valid:!1},{function:"eliminar_producto",name:"Eliminar producto",valid:!1},{function:"anexar_productos",name:"Anexar productos",valid:!1},{function:"gestion_sucursales",name:"Gestionar sucursales",valid:!1},{function:"cierre_bodega",name:"Cerrar bodega",valid:!1},{function:"registrar_proveedores",name:"Registrar proveerdor",valid:!1},{function:"editar_proveedor",name:"Editar proveerdor",valid:!1},{function:"eliminar_proveedor",name:"Eliminar proveerdor",valid:!1},{function:"ver_historial_compras",name:"Ver historiales",valid:!1}]},{route:"sucursales",valid:!1,functions:[{function:"cambiar",name:"Elegir sucursal",valid:!1},{function:"registrar",name:"Registrar sucursal",valid:!1},{function:"configurar",name:"Configurar sucursal",valid:!1}]}],modals:{modal1:!1,modal2:!1},routeSelected:0,commissionsProfile:!1,IfSelect:!1}},created:function(){this.getAccessProfile()},methods:{getAccessProfile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(c.a.endpointTarget+"/configurations/profiles",this.configHeader);case 3:e=t.sent,"ok"==e.data.status&&(this.accessProfiles=e.data.data[0].profiles,this.idProfile=e.data.data[0]._id),console.log(this.accessProfiles),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),selectProfile:function(t,e,a){this.IfSelect=!0,this.profileSelect.name=t,this.profileSelect.index=a,this.commissionsProfile=this.accessProfiles[a].commission;var s=!0,n=!1,i=void 0;try{for(var o,r=this.routesProfiles[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value,c=!0,d=!0,u=!1,m=void 0;try{for(var p,f=e[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;l.route.toLowerCase()==h.ruta.toLowerCase()&&(l.valid=!0,c=!1)}}catch(g){u=!0,m=g}finally{try{d||null==f.return||f.return()}finally{if(u)throw m}}c&&(l.valid=!1)}}catch(g){n=!0,i=g}finally{try{s||null==r.return||r.return()}finally{if(n)throw i}}},removeProfile:function(){var t=this;this.$swal({title:"¿Está seguro de borrar el perfil? Se eliminara toda su configuración",text:"No puedes revertir esta acción",type:"warning",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No, cancelar",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(e){e.value?(t.accessProfiles.splice(t.profileSelect.index,1),t.updateconfig(),t.profileSelect.name="",t.profileSelect.index=0,t.IfSelect=!1):t.$swal({type:"info",icon:"info",title:"Accion cancelada",showConfirmButton:!1,timer:1500})}))},openFunctionalities:function(t,e){if(console.log(t,e),this.routesProfiles[t].valid){for(var a in this.routeSelected=t,this.selectedRouteName=e,this.routesProfiles[t].functions){var s=this.routesProfiles[t].functions[a];for(var n in this.accessProfiles[this.profileSelect.index].routes){var i=this.accessProfiles[this.profileSelect.index].routes[n];if(i.ruta.toLowerCase()==e.toLowerCase()){var o=!0,r=!1,l=void 0;try{for(var c,d=i.validaciones[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;s.function==u&&(this.routesProfiles[t].functions[a].valid=!0)}}catch(b){r=!0,l=b}finally{try{o||null==d.return||d.return()}finally{if(r)throw l}}}}}this.modals.modal2=!0}else{var m=!0,p=!1,f=void 0;try{for(var h,g=this.routesProfiles[t].functions[Symbol.iterator]();!(m=(h=g.next()).done);m=!0){var v=h.value;v.valid=!1}}catch(b){p=!0,f=b}finally{try{m||null==g.return||g.return()}finally{if(p)throw f}}this.selectedRouteName=e,this.routeSelected=t,this.modals.modal2=!0}},activeFunction:function(t,e){if(this.routesProfiles[this.routeSelected].functions[e].valid)for(var a in this.routesProfiles[this.routeSelected].functions[e].valid=!1,this.accessProfiles[this.profileSelect.index].routes){var s=this.accessProfiles[this.profileSelect.index].routes[a];if(s.ruta.toLowerCase()==this.routesProfiles[this.routeSelected].route.toLowerCase())for(var n in this.accessProfiles[this.profileSelect.index].routes[a].validaciones.splice(),this.accessProfiles[this.profileSelect.index].routes[a].validaciones){var i=this.accessProfiles[this.profileSelect.index].routes[a].validaciones[n];i==t&&this.accessProfiles[this.profileSelect.index].routes[a].validaciones.splice(n,1)}}else for(var o in this.routesProfiles[this.routeSelected].functions[e].valid=!0,this.accessProfiles[this.profileSelect.index].routes){var r=this.accessProfiles[this.profileSelect.index].routes[o];r.ruta.toLowerCase()==this.routesProfiles[this.routeSelected].route.toLowerCase()&&this.accessProfiles[this.profileSelect.index].routes[o].validaciones.push(t)}this.updateconfig()},changeActive:function(t){if(this.routesProfiles[this.routeSelected].valid=t,t)this.accessProfiles[this.profileSelect.index].routes.push({ruta:this.routesProfiles[this.routeSelected].route.toLowerCase(),validaciones:[]});else{for(var e in this.accessProfiles[this.profileSelect.index].routes){var a=this.accessProfiles[this.profileSelect.index].routes[e];a.ruta==this.routesProfiles[this.routeSelected].route.toLowerCase()&&this.accessProfiles[this.profileSelect.index].routes.splice(e,1)}var s=!0,n=!1,i=void 0;try{for(var o,r=this.routesProfiles[this.routeSelected].functions[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value;l.valid=!1}}catch(c){n=!0,i=c}finally{try{s||null==r.return||r.return()}finally{if(n)throw i}}}this.updateconfig()},updateconfig:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i,o,l,u,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.put(c.a.endpointTarget+"/configurations/editProfiles/"+this.idProfile,{profiles:this.accessProfiles},this.configHeader);case 3:if(e=t.sent,"ok"!=e.data.status){t.next=36;break}for(t.prev=5,a=[],s=!0,n=!1,i=void 0,t.prev=10,o=this.accessProfiles[Symbol.iterator]();!(s=(l=o.next()).done);s=!0)u=l.value,u.profile==this.profileSelect.name&&(a=u.routes);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,s||null==o.return||o.return();case 21:if(t.prev=21,!n){t.next=24;break}throw i;case 24:return t.finish(21);case 25:return t.finish(18);case 26:return t.next=28,r.a.put(c.a.endpointTarget+"/configurations/editAccessUsers/"+this.profileSelect.name,{access:a,id:this.id},this.configHeader);case 28:m=t.sent,console.log(m),"reload"==m.data.status?(d["a"].$emit("loggedin-user",a),localStorage.setItem("userToken",m.data.token),this.$swal({type:"success",icon:"success",toast:!0,position:"top-end",title:"Cambio exitoso",showConfirmButton:!1,timer:1500})):this.$swal({type:"success",icon:"success",toast:!0,position:"top-end",title:"Cambio exitoso",showConfirmButton:!1,timer:1500}),t.next=36;break;case 33:t.prev=33,t.t1=t["catch"](5),console.log(t.t1);case 36:t.next=41;break;case 38:t.prev=38,t.t2=t["catch"](0),console.log(t.t2);case 41:case"end":return t.stop()}}),t,this,[[0,38],[5,33],[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),activeCommission:function(t){this.commissionsProfile=t,this.accessProfiles[this.profileSelect.index].commission=t,this.updateconfig()},activeProfileCommission:function(t){this.newAccess.commission=t},createAccess:function(){this.newAccess.name.length>=3?(this.accessProfiles.push({commission:this.newAccess.commission,profile:this.newAccess.name,routes:[]}),this.modals.modal1=!1,this.updateconfig(),this.selectProfile(this.newAccess.name,[],this.accessProfiles.length-1),this.newAccess.commission=!1,this.newAccess.name="",this.$swal.fire({icon:"success",title:"Perfil creado, proceda a registrar rutas de acceso"})):this.$swal({type:"error",icon:"error",title:"Por favor, ingrese nombre del perfil con mas de 2 dígitos",showConfirmButton:!1,timer:1500})}}},v=g,b=(a("9782"),a("2877")),y=Object(b["a"])(v,s,n,!1,null,null,null);e["default"]=y.exports},ff3e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/employes.png)","background-size":"cover","background-position":"center 60%"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-absolute"},[a("p",{staticClass:"mb-0 display-2 text-white"},[t._v("Empleados")]),a("p",{staticClass:"text-white hideText"},[t._v("Sección dedicada a la administración de sus empleados. Donde podrá obtener detalle de sus ventas y comisiones correspondientes.")])]),a("base-button",{staticClass:"float-right mt-7",attrs:{size:"sm",disabled:!t.validRoute("empleados","registrar"),type:"success"},on:{click:function(e){t.modals.modal1=!0,t.initialState(2)}}},[a("a-icon",{staticClass:"mr-2",staticStyle:{"vertical-align":"1px","font-size":"1.2em"},attrs:{type:"form"}}),t._v("\n                    Registrar\n                ")],1)],1)])]),a("modal",{attrs:{show:t.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(e){return t.$set(t.modals,"modal1",e)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-1"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[t._v("\n                    Datos del empleado\n                ")])],[a("form",{attrs:{role:"form"}},[a("div",{staticClass:"row"},[a("base-input",{staticClass:"mb-3 col-6",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerEmploye.firstName,callback:function(e){t.$set(t.registerEmploye,"firstName",e)},expression:"registerEmploye.firstName"}}),a("base-input",{staticClass:"mb-3 col-6",attrs:{alternative:"",placeholder:"Apellido","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){return t.validRegister()}},model:{value:t.registerEmploye.lastName,callback:function(e){t.$set(t.registerEmploye,"lastName",e)},expression:"registerEmploye.lastName"}})],1),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Documento","addon-left-icon":"ni ni-key-25","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(e){t.validRegister(),t.formatRut(t.registerEmploye.document)}},model:{value:t.registerEmploye.document,callback:function(e){t.$set(t.registerEmploye,"document",e)},expression:"registerEmploye.document"}}),[a("div",{staticClass:"text-muted text-center mb-1"},[t._v("Días laborales")])],a("vue-bootstrap4-table",{staticClass:"text-left styleDays",attrs:{rows:t.days,columns:t.columnsDays,config:t.configDays},scopedSlots:t._u([{key:"name",fn:function(e){return[e.row.validator?a("base-button",{staticClass:"w-75 mt-1 ml-1",attrs:{disabled:!e.row.valid,size:"sm",type:"success"},on:{click:function(a){return t.addDay(e.row.vbt_id,e.row.value,e.row.validator)}}},[t._v("\n                                "+t._s(e.row.day)+"\n                            ")]):a("base-button",{staticClass:"w-75 mt-1 ml-1",attrs:{disabled:!e.row.valid,size:"sm",type:"danger"},on:{click:function(a){return t.addDay(e.row.vbt_id,e.row.value,e.row.validator)}}},[t._v("\n                                "+t._s(e.row.day)+"\n                            ")])]}},{key:"validation",fn:function(e){return[a("a-select",{staticClass:"ml-1 mt-1 mb-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=e.row.validator,placeholder:"Desde"},on:{change:t.selectHourInit},model:{value:e.row.start,callback:function(a){t.$set(e.row,"start",a)},expression:"props.row.start"}},t._l(e.row.hour,(function(s){return a("a-select-option",{key:s,on:{click:function(a){return t.addHour(e.row.value,e.row.vbt_id)}}},[t._v("\n                                    "+t._s(s)+"\n                                ")])})),1),a("a-select",{staticClass:"ml-1 mt-1 mb-1 input-group-alternative",staticStyle:{width:"45%"},attrs:{disabled:1!=e.row.validator,placeholder:"Hasta"},on:{change:t.selectHourFinally},model:{value:e.row.end,callback:function(a){t.$set(e.row,"end",a)},expression:"props.row.end"}},t._l(e.row.hour,(function(s){return a("a-select-option",{key:s,on:{click:function(a){return t.removeHour(e.row.value,e.row.vbt_id)}}},[t._v("\n                                    "+t._s(s)+"\n                                ")])})),1)]}}])}),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:function(e){return t.proccess()}}},[t._v(t._s(t.tipeForm))])],1)],2)]],2)],1),a("a-modal",{attrs:{width:300},model:{value:t.modals.modal2,callback:function(e){t.$set(t.modals,"modal2",e)},expression:"modals.modal2"}},[[a("h3",[t._v("Ingresar avance")]),a("label",{attrs:{for:"Monto"}},[t._v("Monto")]),a("currency-input",{staticClass:"ant-input w-100",attrs:{locale:"de"},model:{value:t.advancementTotal,callback:function(e){t.advancementTotal=e},expression:"advancementTotal"}})],a("template",{slot:"footer"},[a("base-button",{attrs:{disabled:!(t.advancementTotal>0),size:"sm",type:"success"},on:{click:t.registerAdvancement}},[t._v("\n                Ingresar\n            ")])],1)],2),a("a-config-provider",{attrs:{locale:t.es_ES},scopedSlots:t._u([{key:"renderEmpty",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"warning"}}),a("h2",[t._v("Selecciona un filtro en la parte superior")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,loading:t.employeState,"data-source":t.employes,scroll:t.getScreen},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var s=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,o=e.clearFilters,r=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Buscar por "+r.title.toLowerCase(),value:n[0]},on:{change:function(t){return s(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(n,i,r.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(n,i,r.dataIndex)}}},[t._v("\n                Buscar\n            ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v("\n                Restablecer\n            ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"names-slot",fn:function(e,a){return[t._v("\n                "+t._s(a.firstName)+" "+t._s(a.lastName)+"\n            ")]}},{key:"total",fn:function(e,a){return[t._v("\n                "+t._s(t._f("formatPrice")(parseFloat(a.commission)+parseFloat(a.bonus)-parseFloat(a.advancement)))+"\n            ")]}},{key:"bonus",fn:function(e){return[t._v("\n                "+t._s(t._f("formatPrice")(e))+"\n            ")]}},{key:"advancement",fn:function(e){return[t._v("\n                "+t._s(t._f("formatPrice")(e))+"\n            ")]}},{key:"commission",fn:function(e){return[t._v("\n                "+t._s(t._f("formatPrice")(e))+"\n            ")]}},{key:"name",fn:function(e,s){return[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Avance")])]),t.validRoute("empleados","reportes")?a("base-button",{attrs:{size:"sm",type:"warning"},on:{click:function(e){t.modals.modal2=!0,t.advancementId=s._id,t.advancementName=s.firstName+" "+s.lastName}}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"wallet"}})],1):a("base-button",{attrs:{disabled:"",size:"sm",type:"warning"}},[a("a-icon",{staticStyle:{"vertical-align":"1.5px"},attrs:{type:"wallet"}})],1)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Editar")])]),t.validRoute("empleados","editar")?a("base-button",{attrs:{size:"sm",type:"default",icon:"fa fa-edit"},on:{click:function(e){t.modals.modal1=!0,t.initialState(3),t.pushData(s.firstName,s.days,s._id,s.document,s.lastName,s.branch)}}}):a("base-button",{attrs:{disabled:"",size:"sm",type:"default",icon:"fa fa-edit"}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Reporte")])]),t.validRoute("empleados","reportes")?a("base-button",{attrs:{size:"sm",type:"primary",icon:"ni ni-align-center"},on:{click:function(e){return t.reportEmploye(s._id)}}}):a("base-button",{attrs:{size:"sm",disabled:"",type:"primary",icon:"ni ni-align-center"}})],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("Eliminar")])]),t.validRoute("empleados","eliminar")?a("base-button",{attrs:{size:"sm",type:"danger",icon:"fas fa-trash"},on:{click:function(e){return t.deleteEmploye(s._id)}}}):a("base-button",{attrs:{size:"sm",disabled:"",type:"danger",icon:"fas fa-trash"}})],2)]}}])})],1)],1)},n=[],i=(a("28a5"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),o=(a("a481"),a("6b54"),a("6762"),a("2fdb"),a("bc3a")),r=a.n(o),l=a("41cb"),c=a("a5e9"),d=a.n(c),u=a("12f9"),m=a("e366"),p=a("04e1"),f=a.n(p),h=a("ef34"),g=a("bb36"),v={mixins:[h["a"],g["a"]],components:{VueBootstrap4Table:u["a"]},data:function(){var t=this;return{auth:[],tipeForm:"Registrar",employeState:!1,registerEmploye:{branch:"Seleccione una sucursal",firstName:"",lastName:"",document:"",days:[],_id:"",show:!1,valid:!1,valid2:!1},originalDays:[],dayValid:!1,filter:"",branch:"",branchName:"",configHeader:{headers:{"x-database-connect":d.a.database,"x-access-token":localStorage.userToken}},advancementId:"",advancementName:"",advancementTotal:0,modals:{modal1:!1,modal2:!1},columnsDays:[{label:"Día",name:"day",slot_name:"name",sort:!1},{label:"Horas de descanso",name:"value",slot_name:"validation",sort:!1}],configDays:{card_title:"Tabla de días",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",global_search:{placeholder:"Filtre por día",visibility:!0,case_sensitive:!1},show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!1,pagination_info:!1,pagination:!1},days:[],employes:[],searchText:"",searchInput:null,searchedColumn:"",columns:[{title:"Nombres",dataIndex:"firstName",key:"firstName",sorter:function(t,e){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"names-slot"},onFilter:function(t,e){return e.firstName.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Documento",dataIndex:"document",key:"document",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.document.replace(/[-.]/g,"").toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){t.searchInput.focus()}),0)}},{title:"Comisión",dataIndex:"commission",key:"commission",scopedSlots:{customRender:"commission"},sorter:function(t,e){return t.commission-e.commission}},{title:"Bonos",dataIndex:"bonus",key:"bonus",scopedSlots:{customRender:"bonus"},sorter:function(t,e){return t.bonus-e.bonus}},{title:"Avances",dataIndex:"advancement",key:"advancement",scopedSlots:{customRender:"advancement"},sorter:function(t,e){return t.advancement-e.advancement}},{title:"Total",key:"_id",scopedSlots:{customRender:"total"},sorter:function(t,e){return t.commission+t.bonus-t.advancement-(e.commission+e.bonus-e.advancement)}},{title:"Acciones varias",dataIndex:"_id",key:"_id",scopedSlots:{customRender:"name"}}],selectedDays:[],hourInit:"Desde",hourFinally:"Hasta",editHourIndex:0}},created:function(){this.getToken(),this.getBranch()},methods:{getBranch:function(){this.branchName=localStorage.branchName,this.branch=localStorage.branch,this.getEmployes(),this.getBlockHours()},registerAdvancement:function(){var t=this,e="Avance de comisión para ".concat(this.advancementName);r.a.post("".concat(d.a.endpointTarget,"/expenses/"),{branch:this.branch,detail:e,employe:this.advancementId,amount:this.advancementTotal,type:"Comision"},this.configHeader).then((function(e){"ok"==e.data.status&&r.a.put("".concat(d.a.endpointTarget,"/employes/regAdvancement/").concat(t.advancementId),{amount:t.advancementTotal},t.configHeader).then((function(e){"ok"==e.data.status&&(t.getEmployes(),t.advancementTotal=0,t.modals.modal2=!1,t.$swal({icon:"success",title:"¡Avance ingresado con éxito!",showConfirmButton:!1,timer:1500}))}))}))},getBlockHours:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.get(d.a.endpointTarget+"/configurations/getHours/"+this.branch,this.configHeader);case 3:if(e=t.sent,"ok"!=e.data.status){t.next=27;break}for(console.log(e),a=!0,s=!1,n=void 0,t.prev=9,i=e.data.data[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)l=o.value,l.validator=!1;t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](9),s=!0,n=t.t0;case 17:t.prev=17,t.prev=18,a||null==i.return||i.return();case 20:if(t.prev=20,!s){t.next=23;break}throw n;case 23:return t.finish(20);case 24:return t.finish(17);case 25:this.days=e.data.data,console.log(this.days);case 27:t.next=32;break;case 29:t.prev=29,t.t1=t["catch"](0),res.send(t.t1);case 32:case"end":return t.stop()}}),t,this,[[0,29],[9,13,17,25],[18,,20,24]])})));function e(){return t.apply(this,arguments)}return e}(),getEmployes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.employeState=!0,t.prev=1,t.next=4,r.a.get(d.a.endpointTarget+"/employes/employesbybranch/"+this.branch,this.configHeader);case 4:e=t.sent,e.data.data.length>0?(this.employes=e.data.data,this.employeState=!1):setTimeout((function(){a.employeState=!1}),200),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),res.send(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),selectHourInit:function(t){this.hourInit=t,this.dayValid=!0,console.log(this.originalDays)},selectHourFinally:function(t){this.hourFinally=t,this.dayValid=!0,console.log(this.originalDays)},addHour:function(t,e){var a=this;setTimeout((function(){for(var s in a.selectedDays){var n=a.selectedDays[s];n.day==t&&(a.selectedDays[s].hours[0]=a.hourInit,a.days[e-1].start=a.hourInit)}console.log(a.validHoursDays())}),200)},removeHour:function(t,e){var a=this;setTimeout((function(){for(var s in a.selectedDays){var n=a.selectedDays[s];n.day==t&&(a.selectedDays[s].hours[1]=a.hourFinally,a.days[e-1].end=a.hourFinally)}console.log(a.validHoursDays())}),200)},addDay:function(t,e,a){if(console.log(a),a){this.days[t-1].validator=!1;for(var s=0;s<this.days.length;s++){this.days[s];for(var n=0;n<this.selectedDays.length;n++){var i=this.selectedDays[n];e==i.day&&this.selectedDays.splice(n,1)}}console.log(this.selectedDays),this.validRegister()}else this.days[t-1].validator=!0,console.log(this.days),this.selectedDays.push({day:e,hours:[]})},selectBranchForCreate:function(t){this.registerEmploye.branch=t._id,this.validRegister()},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},getToken:function(){var t=localStorage.userToken,e=f()(t);this.auth=e.access},reportEmploye:function(t){localStorage.setItem("idReportEmploye",t),l["a"].push({path:"/reporteEmpleado"})},proccess:function(){"Registrar"==this.tipeForm?this.registerEmployes():this.updateEmploye()},validHoursDays:function(){if(console.log(this.days),this.selectedDays.length>0){var t=!0,e=!1,a=void 0;try{for(var s,n=this.days[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var i=s.value;if(i.validator){if("Desde"==i.start||void 0==i.start||"Hasta"==i.end||void 0==i.end)return!1;if(parseInt(i.end.split(":")[0])<=parseInt(i.start.split(":")[0])){if(parseInt(i.end.split(":")[0])!=parseInt(i.start.split(":")[0]))return"hora atras";if(parseInt(i.end.split(":")[1])<=parseInt(i.start.split(":")[1]))return"hora atras"}}}}catch(o){e=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}return!0}return!1},registerEmployes:function(){var t=this;"hora atras"==this.validHoursDays()?this.$swal.fire({icon:"error",title:"¡Oh oh! Horario incorrecto",text:"Revise el principio y fin de los horarios seleccionados",showConfirmButton:!0}):this.registerEmploye.firstName.length>3&&this.registerEmploye.lastName.length>3&&this.registerEmploye.document.length>1&&1==this.validHoursDays()?r.a.post(d.a.endpointTarget+"/employes",{branch:this.branch,days:this.selectedDays,firstName:this.registerEmploye.firstName,lastName:this.registerEmploye.lastName,document:this.registerEmploye.document},this.configHeader).then((function(e){"employe created"==e.data.status?(t.$swal({icon:"success",title:"¡Empleado registrado con éxito!",showConfirmButton:!1,timer:1500}),t.modals.modal1=!1,t.getEmployes(),t.initialState(1),m["a"].$emit("reloadLenders","reload")):t.$swal({icon:"error",title:"¡El empleado ya se encuentra registrado!",showConfirmButton:!1,timer:1500})})):this.$swal.fire({icon:"error",title:"Debe completar los datos",text:"Recuerda completar los datos y horarios de descanso en los días seleccionados",showConfirmButton:!0})},updateEmploye:function(){var t=this;console.log(this.selectedDays),"hora atras"==this.validHoursDays()?this.$swal.fire({icon:"error",title:"¡Oh oh! Horario incorrecto. Revise el principio y fin de los horarios seleccionados.",showConfirmButton:!0}):this.registerEmploye.firstName.length>3&&this.registerEmploye.lastName.length>3&&this.registerEmploye.document.length>1&&1==this.validHoursDays()?(console.log(this.originalDays),r.a.put(d.a.endpointTarget+"/employes",{id:this.registerEmploye._id,firstName:this.registerEmploye.firstName,document:this.registerEmploye.document,days:this.selectedDays,lastName:this.registerEmploye.lastName,branch:this.branch,dayValid:this.dayValid},this.configHeader).then((function(e){if("employe edited"==e.data.status){if(t.$swal({icon:"success",title:"¡Edición exitosa!",showConfirmButton:!1,timer:1500}),"Todas"==t.filter&&t.getEmployes(),"Todas"!=t.filter&&""!=t.filter){var a={_id:t.filter};t.findBranch(a)}t.modals.modal1=!1,t.getEmployes(),t.initialState(1),m["a"].$emit("reloadLenders","reload")}else t.$swal({type:"error",icon:"error",title:"Prestador ya existe",showConfirmButton:!1,timer:1500})}))):this.$swal.fire({icon:"error",title:"¡Recuerda!",text:"Completa los datos y horario de descanso",showConfirmButton:!0})},deleteEmploye:function(t){var e=this;this.$swal({title:"¿Eliminar usuario?",text:"¡Recuerda! No es posible revertir esta acción",type:"warning",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value&&r.a.delete(d.a.endpointTarget+"/employes/"+t,e.configHeader).then((function(t){(t.data.status="employe deleted")&&(e.$swal({icon:"success",title:"Empleado eliminado",showConfirmButton:!1,timer:1500}),e.getEmployes(),e.initialState(1),m["a"].$emit("reloadLenders","reload"))})).catch((function(t){e.$swal({type:"error",title:"Hubo un problema",showConfirmButton:!1,timer:1500})}))}))},pushData:function(t,e,a,s,n,i){this.originalDays=[],this.registerEmploye.firstName=t,this.registerEmploye.lastName=n,this.registerEmploye.document=s,this.registerEmploye.branch=i,this.registerEmploye.days=e,this.registerEmploye.show=!0,this.registerEmploye._id=a,this.selectedDays=e;for(var o=0;o<this.days.length;o++)for(var r=this.days[o],l=0;l<e.length;l++){var c=e[l];r.value==c.day&&(r.validator=!0,r.start=c.hours[0],r.end=c.hours[1])}},validFields:function(t){console.log("y entonces?"),"c"==t&&(this.registerUser.correo==this.registerUser.correoConfirm?(this.registerUser.c=!0,console.log("y entonces?")):this.registerUser.c=!1),"p"==t&&(this.registerUser.password==this.registerUser.passwordConfirm?this.registerUser.p=!0:this.registerUser.p=!1)},initialState:function(t){var e=this;this.registerEmploye={firstName:"",lastName:"",branch:"",document:"",timeRestOne:"Seleccione el tiempo",timeRestTwo:"Seleccione el tiempo",dayFree:[],show:!1,_id:"",valid:!1,valid2:!1},this.dayValid=!1,this.selectedDays=[];for(var a=0;a<this.days.length;a++)this.days[a].validator=!1;if(2==t){this.registerEmploye.show=!0,setTimeout((function(){e.registerEmploye.show=!1}),10),this.tipeForm="Registrar";var s=!0,n=!1,i=void 0;try{for(var o,r=this.days[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value;l.start="Desde",l.end="Hasta"}}catch(h){n=!0,i=h}finally{try{s||null==r.return||r.return()}finally{if(n)throw i}}}if(3==t){this.tipeForm="Editar";var c=!0,d=!1,u=void 0;try{for(var m,p=this.days[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var f=m.value;f.start="Desde",f.end="Hasta"}}catch(h){d=!0,u=h}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}}},validRegister:function(){""!=this.registerEmploye.firstName&&""!=this.registerEmploye.lastName&&""!=this.registerEmploye.branch&&""!=this.registerEmploye.document&&this.selectedDays.length>0?this.registerEmploye.valid=this.selectedDays[0].hours.length>0:this.registerEmploye.valid=!1},formatRut:function(t){t.replace(/[-.]/g,"");for(var e=t.replace(/\./g,"").replace(/\-/g,"").trim().toLowerCase(),a=e.substr(-1,1),s=e.substr(0,e.length-1),n="",i=s.length;i>0;i--){var o=s.charAt(i-1);n=o.concat(n),i%3===0&&(n=".".concat(n))}this.registerEmploye.document=n.concat("-").concat(a)},validRoute:function(t,e){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==t)for(var n=0;n<s.validaciones.length;n++)if(e==s.validaciones[n])return!0}}},computed:{getScreen:function(){return screen.width<780?{x:"calc(700px + 50%)",y:240}:{y:"auto"}}},mounted:function(){var t=this;m["a"].$on("changeBranch",(function(e){t.getBranch()}))}},b=v,y=(a("9c21"),a("2877")),C=Object(y["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=demo.7b77709a.js.map