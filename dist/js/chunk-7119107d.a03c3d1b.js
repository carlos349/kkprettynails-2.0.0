(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7119107d"],{"00f9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/users.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white"},[e._v("Sección de usuarios")]),a("p",{staticClass:"text-white mt-0 mb-2"},[e._v("Esta es la sección administrativa de tus usuarios, aquí podrás registrar, editar y visualizar todos tus usuarios.")]),e.validRoute("usuarios","registrar")?a("base-button",{attrs:{type:"success"},on:{click:function(t){e.modals.modal1=!0,e.initialState(2)}}},[e._v("Registrar un usuario")]):e._e()],1)])])]),a("modal",{attrs:{show:e.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal1",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[e._v("\n                    Datos del usuario\n                ")])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{change:function(t){return e.validRegister()}},model:{value:e.registerUser.name,callback:function(t){e.$set(e.registerUser,"name",t)},expression:"registerUser.name"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Apellido","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{change:function(t){return e.validRegister()}},model:{value:e.registerUser.lastname,callback:function(t){e.$set(e.registerUser,"lastname",t)},expression:"registerUser.lastname"}}),a("base-input",{ref:"file",staticClass:" mb-3",attrs:{type:"file",id:"file","addon-right-icon":"fa fa-asterisk text-danger"},on:{change:function(t){return e.handleFileUpload()}}}),a("base-input",{attrs:{alternative:"",type:"text",placeholder:"Correo","addon-left-icon":"ni ni-email-83","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.registerUser.correo,callback:function(t){e.$set(e.registerUser,"correo",t)},expression:"registerUser.correo"}}),a("base-input",{attrs:{alternative:"",type:"text",valid:e.registerUser.c,placeholder:"Confirmar correo","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validFields("c")}},model:{value:e.registerUser.correoConfirm,callback:function(t){e.$set(e.registerUser,"correoConfirm",t)},expression:"registerUser.correoConfirm"}}),a("base-input",{attrs:{alternative:"",type:"password",placeholder:"Contraseña","addon-left-icon":"ni ni-lock-circle-open","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}}),a("base-input",{attrs:{alternative:"",type:"password",valid:e.registerUser.p,placeholder:"Confirmar contraseña","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validFields("p")}},model:{value:e.registerUser.passwordConfirm,callback:function(t){e.$set(e.registerUser,"passwordConfirm",t)},expression:"registerUser.passwordConfirm"}}),a("div",{staticClass:"text-center"},[0==e.registerUser.valid?a("base-button",{staticClass:"my-4",attrs:{type:"primary",disabled:""}},[e._v("Registrar")]):a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:function(t){return e.registerUsers()}}},[e._v("Registrar")])],1)],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal2",t)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[e._v("Vincular prestador")])])],[a("form",{attrs:{role:"form"}},[a("vue-single-select",{attrs:{options:e.lenderNames,placeholder:"Prestadores"},model:{value:e.linkLender,callback:function(t){e.linkLender=t},expression:"linkLender"}}),a("base-button",{attrs:{type:"default"},on:{click:function(t){return e.estatusEdit(e.idSelect,3,"no-prestador")}}},[e._v("\n                        Vincular\n                    ")])],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal3,gradient:e.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(t){return e.$set(e.modals,"modal3",t)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:e.modals.icon}),a("h1",{staticClass:"heading mt-5"},[e._v(e._s(e.modals.message))])])]),a("modal",{attrs:{show:e.modals.modal4,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal4",t)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[e._v("Administre las rutas de acceso")])])],[a("vue-custom-scrollbar",{ref:"tableItem",staticClass:"maxHeightRoutes"},[a("vue-bootstrap4-table",{staticClass:"text-left",attrs:{rows:e.routes,columns:e.columnsRoutes,classes:e.classes,config:e.configRoutes},scopedSlots:e._u([{key:"name",fn:function(t){return[a("b",{staticClass:"text-uppercase"},[e._v(e._s(t.row.route))])]}},{key:"validation",fn:function(t){return[t.row.valid?a("base-button",{staticClass:"w-100",attrs:{size:"sm",type:"success"},on:{click:function(a){return e.selectedItem(t.row.route,t.row.valid,t.row.vbt_id)}}},[e._v("Editar")]):a("base-button",{staticClass:"w-100",attrs:{disabled:"",size:"sm",type:"danger"},on:{click:function(a){return e.selectedItem(t.row.route,t.row.valid,t.row.vbt_id)}}},[e._v("Editar")])]}},{key:"active",fn:function(t){return[t.row.valid?a("base-button",{staticClass:"w-100",attrs:{size:"sm",type:"success",icon:"ni ni-check-bold"},on:{click:function(a){return e.addRoute(t.row.vbt_id,t.row.route,t.row.valid)}}}):a("base-button",{staticClass:"w-100",attrs:{size:"sm",type:"danger",icon:"fa fa-ban"},on:{click:function(a){return e.addRoute(t.row.vbt_id,t.row.route,t.row.valid)}}})]}}])})],1),a("center",[a("base-button",{staticClass:"mt-4",attrs:{type:"default"},on:{click:function(t){return e.editRoutesAccess()}}},[e._v("\n                        Realizar cambios\n                    ")])],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal5,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal5",t)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[e._v("Habilite las funciones de la ruta")])])],[a("vue-custom-scrollbar",{staticClass:"maxHeightRoutes"},[a("vue-bootstrap4-table",{staticClass:"text-left",attrs:{rows:e.functions,columns:e.columnsFunctions,classes:e.classes,config:e.configFunctions},scopedSlots:e._u([{key:"validation",fn:function(t){return[t.row.valid?a("base-button",{staticClass:"w-100",attrs:{size:"sm",type:"success",icon:"ni ni-check-bold"},on:{click:function(a){return e.selected(t.row.vbt_id,t.row.valid,t.row.function)}}}):a("base-button",{staticClass:"w-100",attrs:{size:"sm",type:"danger",icon:"fa fa-ban"},on:{click:function(a){return e.selected(t.row.vbt_id,t.row.valid,t.row.function)}}})]}}])})],1),a("center",[a("base-button",{staticClass:"mt-2",attrs:{type:"default"},on:{click:function(t){return e.finalyFunctions(e.modals.modal5=!1)}}},[e._v("\n                        Finalizar\n                    ")])],1)]],2)],1),a("vue-bootstrap4-table",{staticClass:"text-left",attrs:{rows:e.users,columns:e.columns,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"date-format",fn:function(t){return[e._v("\n            "+e._s(e.formatDate(t.row.LastAccess))+"\n        ")]}},{key:"status-format",fn:function(t){return[e.validRoute("usuarios","editar")?a("base-dropdown",{staticClass:"w-100"},[1==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",size:"sm",type:"primary"},slot:"title"},[e._v("\n                    Gerente\n                ")]):e._e(),2==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",size:"sm",type:"success"},slot:"title"},[e._v("\n                    Cajero (a)\n                ")]):e._e(),3==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",size:"sm",type:"default"},slot:"title"},[e._v("\n                    Prestadora\n                ")]):e._e(),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,1,"no-prestador")}}},[e._v("Gerencia")]),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,2,"no-prestador")}}},[e._v("Personal de caja")]),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,3,"prestador")}}},[e._v("Prestador")])],1):a("base-dropdown",{staticClass:"w-100"},[1==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",disabled:"",size:"sm",type:"primary"},slot:"title"},[e._v("\n                    Gerente\n                ")]):e._e(),2==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",disabled:"",size:"sm",type:"success"},slot:"title"},[e._v("\n                    Cajero (a)\n                ")]):e._e(),3==t.row.status?a("base-button",{staticClass:"dropdown-toggle w-100",attrs:{slot:"title",disabled:"",size:"sm",type:"default"},slot:"title"},[e._v("\n                    Prestadora\n                ")]):e._e(),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,1,"no-prestador")}}},[e._v("Gerencia")]),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,2,"no-prestador")}}},[e._v("Personal de caja")]),a("a",{staticClass:"dropdown-item",on:{click:function(a){return e.estatusEdit(t.row._id,3,"prestador")}}},[e._v("Prestador")])],1)]}},{key:"access",fn:function(t){return[e.validRoute("usuarios","editar")?a("base-button",{staticClass:"w-100",attrs:{slot:"title",size:"sm",type:"success"},on:{click:function(a){return e.dataEdit(t.row.access,t.row._id,t.row.email)}},slot:"title"},[e._v("\n                Agregar accesos\n            ")]):a("base-button",{staticClass:"w-100",attrs:{slot:"title",size:"sm",type:"success",disabled:""},slot:"title"},[e._v("\n                Agregar accesos\n            ")])]}},{key:"Administrar",fn:function(t){return[e.validRoute("usuarios","eliminar")?a("base-button",{attrs:{size:"sm",type:"warning",icon:"ni ni-fat-remove"},on:{click:function(a){return e.deleteClient(t.row._id,t.row.status)}}},[e._v("Eliminar")]):a("base-button",{staticClass:"w-100",attrs:{slot:"title",size:"sm",type:"warning",icon:"ni ni-fat-remove",disabled:""},slot:"title"},[e._v("\n                Eliminar\n            ")])]}},{key:"pagination-info",fn:function(t){return[e._v("\n            Actuales "+e._s(t.currentPageRowsLength)+" | \n             Filtrados "+e._s(t.filteredRowsLength)+" | \n            Registros totales "+e._s(t.originalRowsLength)+"\n        ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n            Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n        ")]}}])})],1)},o=[],i=(a("7f7f"),a("bd86")),r=a("bc3a"),n=a.n(r),l=a("41cb"),c=a("a5e9"),d=a.n(c),m=a("04e1"),u=a.n(m),p=a("e366"),v=a("12f9"),f=a("4b70"),h=a.n(f),g={components:{VueBootstrap4Table:v["a"],vueCustomScrollbar:h.a},data:function(){var e;return{radio:{radio1:!1},auth:[],registerUser:{name:null,lastname:null,image:null,correo:null,correoConfirm:null,password:null,passwordConfirm:null,valid:!1,valid2:!1,date:null,c:null,p:null},routes:[{route:"procesar",valid:!1},{route:"metricas",valid:!1},{route:"usuarios",valid:!1},{route:"ventas",valid:!1},{route:"servicios",valid:!1},{route:"empleados",valid:!1},{route:"clientes",valid:!1},{route:"inventario",valid:!1},{route:"gastos",valid:!1},{route:"agendamiento",valid:!1},{route:"caja",valid:!1},{route:"pedidos",valid:!1}],functions:[],linkLender:"",lenderNames:[],modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""},users:[],columns:[{label:"Nombre",name:"first_name",sort:!0},{label:"Apellido",name:"last_name",sort:!0},{label:"Correo",name:"email",sort:!0},{label:"Ultimo acceso",name:"LastAccess",slot_name:"date-format",sort:!0},{label:"Estado",name:"status",slot_name:"status-format",sort:!1},{label:"Accesos",name:"Accesos",slot_name:"access",sort:!1},{label:"Eliminar",name:"_id",sort:!1,slot_name:"Administrar"}],config:(e={card_title:"Tabla de usuarios",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(i["a"])(e,"rows_selectable",!0),Object(i["a"])(e,"per_page_options",[5,10,20,30,40,50,80,100]),Object(i["a"])(e,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(i["a"])(e,"show_refresh_button",!1),Object(i["a"])(e,"show_reset_button",!1),Object(i["a"])(e,"selected_rows_info",!0),Object(i["a"])(e,"preservePageOnDataChange",!0),Object(i["a"])(e,"pagination_info",!0),e),columnsFunctions:[{label:"functions",name:"name",sort:!1},{label:"",name:"valid",slot_name:"validation",sort:!1}],columnsRoutes:[{label:"Rutas",name:"route",slot_name:"name",sort:!1},{label:"",name:"valid",slot_name:"active",sort:!1},{label:"",name:"valid",slot_name:"validation",sort:!1}],configRoutes:{card_title:"Tabla de rutas",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",global_search:{placeholder:"Filtre por nombre",visibility:!0,case_sensitive:!1},show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!1,pagination_info:!1,pagination:!1},configFunctions:{card_title:"Tabla de funciones",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)",global_search:{placeholder:"Filtre por nombre",visibility:!0,case_sensitive:!1},show_refresh_button:!1,show_reset_button:!1,selected_rows_info:!1,preservePageOnDataChange:!1,pagination_info:!1,pagination:!1},classes:{table:"table-bordered table-striped"},idSelect:"",file:"",routesSelecteds:[],position:0,mail:""}},beforeCreate:function(){localStorage.getItem("userToken")||(this.$swal({type:"error",title:"URL restringida",showConfirmButton:!1,timer:1500}),l["a"].push({name:"login"}))},created:function(){this.getUsers(),this.getLenders(),this.getToken()},methods:{getToken:function(){var e=localStorage.userToken,t=u()(e);this.auth=t.access,this.emailUser=t.email},dataEdit:function(e,t,a){this.routes=[{route:"procesar",valid:!1},{route:"metricas",valid:!1},{route:"usuarios",valid:!1},{route:"ventas",valid:!1},{route:"servicios",valid:!1},{route:"empleados",valid:!1},{route:"clientes",valid:!1},{route:"inventario",valid:!1},{route:"gastos",valid:!1},{route:"agendamiento",valid:!1},{route:"caja",valid:!1},{route:"pedidos",valid:!1}],this.mail=a,this.idAccess=t,this.routesSelecteds=[];for(var s=0;s<e.length;s++){for(var o=e[s],i=0;i<this.routes.length;i++){var r=this.routes[i];r.route==o.ruta&&(r.valid=!0)}this.routesSelecteds.push(o)}console.log(this.routesSelecteds),this.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!0,modal5:!1,message:"",icon:"",type:""}},selectedItem:function(e,t,a){for(var s=0;s<this.routesSelecteds.length;s++){var o=this.routesSelecteds[s];e==o.ruta&&(this.position=s)}this.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!0,modal5:!0,message:"",icon:"",type:""},"metricas"==e?this.functions=[{function:"filtrar",name:"Filtrar",valid:!1}]:"usuarios"==e?this.functions=[{function:"registrar",name:"Registar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1}]:"ventas"==e?this.functions=[{function:"filtrar",name:"Filtrar",valid:!1},{function:"anular",name:"Anular",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1}]:"servicios"==e?this.functions=[{function:"ingresar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"activaciones",name:"Activar o Desactivar",valid:!1}]:"empleados"==e?this.functions=[{function:"registrar",name:"Registrar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"reportes",name:"Ver reporte",valid:!1},{function:"cerrar ventas",name:"Cerrar ventas",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"adelantos",name:"Adelantos o Bonos",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]:"clientes"==e||"pedidos"==e?this.functions=[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1},{function:"correos",name:"Envio de correos",valid:!1}]:"inventario"==e?this.functions=[{function:"filtrar",name:"Filtrar",valid:!1},{function:"registrar",name:"Registrar",valid:!1},{function:"editar",name:"Editar",valid:!1},{function:"detalle",name:"Ver detalle",valid:!1},{function:"eliminar",name:"Eliminar",valid:!1}]:"gastos"==e?this.functions=[{function:"registrar",name:"Registrar",valid:!1}]:"agendamiento"==e?this.functions=[{function:"filtrar",name:"Filtrar",valid:!1},{function:"agendar",name:"Agendar",valid:!1},{function:"todas",name:"Ver todas las agendas",valid:!1},{function:"editar",name:"Editar cita",valid:!1},{function:"eliminar",name:"Eliminar cita",valid:!1},{function:"cerrar",name:"Cerrar cita",valid:!1},{function:"finalizar",name:"Finalizar cita",valid:!1},{function:"procesar",name:"Procesar",valid:!1}]:"caja"==e?this.functions=[{function:"visualizar",name:"Ver cierres",valid:!1},{function:"filtrar",name:"Filtrar",valid:!1},{function:"cerrar",name:"hacer cierre",valid:!1},{function:"fondo",name:"Ingresar fondos",valid:!1},{function:"reporte",name:"Ver reporte del cierre",valid:!1},{function:"editar",name:"Editar cierre",valid:!1}]:"procesar"==e&&(this.functions=[{function:"editar",name:"Editar cliente",valid:!1},{function:"nuevo_cliente",name:"Registrar cliente",valid:!1},{function:"nuevo_servicio",name:"Registrar servicio",valid:!1},{function:"descuento",name:"Ingresar descuento",valid:!1}]);for(var i=0;i<this.functions.length;i++)for(var r=this.functions[i],n=0;n<this.routesSelecteds[this.position].validaciones.length;n++){var l=this.routesSelecteds[this.position].validaciones[n];r.function==l&&(r.valid=!0)}},addRoute:function(e,t,a){var s=e-1;if(1==a){console.log(s),this.routes[s].valid=!1;for(var o=0;o<this.routes.length;o++){this.routes[o];for(var i=0;i<this.routesSelecteds.length;i++){var r=this.routesSelecteds[i];t==r.ruta&&this.routesSelecteds.splice(i,1)}}}else this.routes[s].valid=!0,this.routesSelecteds.push({ruta:t,validaciones:[]})},finalyFunctions:function(){this.modals.modal5=!1},selected:function(e,t,a){if(t){this.functions[e-1].valid=!1;for(var s=0;s<this.routesSelecteds[this.position].validaciones.length;s++){var o=this.routesSelecteds[this.position].validaciones[s];o==a&&this.routesSelecteds[this.position].validaciones.splice(s,1)}}else this.functions[e-1].valid=!0,this.routesSelecteds[this.position].validaciones.push(a)},handleFileUpload:function(){this.file=this.$refs.file.files[0]},validRoute:function(e,t){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==e)for(var o=0;o<s.validaciones.length;o++)if(t==s.validaciones[o])return!0}},editRoutesAccess:function(){var e=this,t={headers:{"x-access-token":localStorage.userToken}};n.a.put(d.a.endpointTarget+"/users/editAccess/"+this.idAccess,{access:this.routesSelecteds,email:this.mail},t).then((function(t){if("ok"==t.data.status){e.getUsers(),e.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:"Accesos actualizados con exito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""}}),2e3);var a=localStorage.userToken,s=u()(a);e.mail==s.email&&p["a"].$emit("loggedin-user",e.routesSelecteds),localStorage.setItem("userToken",t.data.token),e.routesSelecteds=[]}else e.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:"No se pudo relizar la acción",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""}}),2e3)}))},registerUsers:function(){var e=this,t=new FormData;t.append("image",this.file);var a={headers:{"x-access-token":localStorage.userToken}};n.a.post(d.a.endpointTarget+"/users/register",{first_name:this.registerUser.name,last_name:this.registerUser.lastname,email:this.registerUser.correo,password:this.registerUser.password},a).then((function(a){e.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:"¡Usuario registrado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){console.log(e.modals.modal3),e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""},e.initialState(1),e.getUsers();var s=a.data.status,o={headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken}};n.a.post(d.a.endpointTarget+"/users/registerImage/".concat(s),t,o).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}),1500)}))},getUsers:function(){var e=this,t={headers:{"x-access-token":localStorage.userToken}};n.a.get(d.a.endpointTarget+"/users",t).then((function(t){e.users=t.data})).catch((function(t){e.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"Login"})}))},getLenders:function(){var e=this;n.a.get(d.a.endpointTarget+"/manicuristas").then((function(t){console.log(t.data);for(var a=0;a<t.data.length;a++)e.lenderNames.push(t.data[a].nombre+" / "+t.data[a].documento)}))},validRegister:function(){this.registerUser.valid=!(""==this.registerUser.name||!this.registerUser.lastname||1!=this.registerUser.c||1!=this.registerUser.p)},validFields:function(e){"c"==e&&(this.registerUser.c=this.registerUser.correo==this.registerUser.correoConfirm,this.validRegister()),"p"==e&&(this.registerUser.p=this.registerUser.password==this.registerUser.passwordConfirm,this.validRegister())},initialState:function(e){this.registerUser={name:null,lastname:null,image:null,correo:null,correoConfirm:null,password:null,passwordConfirm:null,valid:!1,valid2:!1,date:null,c:null,p:null},1==e&&(this.modals={modal1:!1}),2==e&&(this.tipeForm="Registrar"),3==e&&(this.tipeForm="Editar")},formatDate:function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+" ("+t.getHours()+":"+("0"+t.getMinutes()).slice(-2)+")"},deleteClient:function(e,t){var a=this;this.$swal({title:"\n¿Está seguro de borrar usuario?",text:"No puedes revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(s){if(s.value)if(1==t)a.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:"No puede borrar un gerente",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){a.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""}}),1500);else{var o={headers:{"x-access-token":localStorage.userToken}};n.a.delete(d.a.endpointTarget+"/users/"+e,o).then((function(e){a.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:e.data.first_name+" "+e.data.last_name+" ha sido Borrado",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){a.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""}}),1500),a.getUsers()})).catch((function(e){a.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"})}))}else a.modals={modal1:!1,modal2:!1,modal3:!0,modal4:!1,modal5:!1,message:"Acción cancelada",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){a.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,message:"",icon:"",type:""}}),1500)}))},estatusEdit:function(e,t,a){var s=this,o=localStorage.userToken,i=u()(o),r=i._id,c=i.status;if(r==e&&1==c)this.$swal({title:"¿Está seguro de cambiarse el estado?",text:"¡Si no hay otro gerente registrado, no podrás regresar tu estado!",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(o){if(o.value)if("prestador"==a)s.modals.modal2=!0,s.idSelect=e;else{var i={headers:{"x-access-token":localStorage.userToken}};n.a.put(d.a.endpointTarget+"/users/"+e,{status:t,employe:s.linkLender},i).then((function(e){s.getUsers(),s.linkLender="",s.modals.modal2=!1})).catch((function(e){s.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"Login"})}))}else s.$swal({type:"info",title:"Acción cancelada",showConfirmButton:!1,timer:1500})}));else if("prestador"==a)this.modals.modal2=!0,this.idSelect=e;else{var m={headers:{"x-access-token":localStorage.userToken}};n.a.put(d.a.endpointTarget+"/users/"+e,{status:t,employe:this.linkLender},m).then((function(a){r==e&&(p["a"].$emit("change-status",t),localStorage.setItem("logged-in",t),l["a"].push({name:"Citas"})),s.getUsers(),s.linkLender="",s.modals.modal2=!1})).catch((function(e){s.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"})}))}}}},b=g,y=(a("0d2c"),a("2877")),_=Object(y["a"])(b,s,o,!1,null,null,null);t["default"]=_.exports},"0d2c":function(e,t,a){"use strict";var s=a("5144"),o=a.n(s);o.a},"0f4c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/clients.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white w-100"},[e._v("Sección de servicios")]),a("p",{staticClass:"text-white mt-0 mb-2"},[e._v("Esta es la sección servicios de tu negocio, aquí podrás registrar, editar y visualizar todos tus servicios.")]),e.validRoute("servicios","ingresar")?a("base-button",{attrs:{type:"success"},on:{click:function(t){e.modals.modal1=!0}}},[e._v("Ingrese un servicio")]):a("base-button",{attrs:{disabled:"",type:"success"}},[e._v("Ingrese un servicio")]),e.validRoute("servicios","ingresar")?a("base-button",{attrs:{type:"default"},on:{click:function(t){e.modals.modal5=!0}}},[e._v("Categorias")]):a("base-button",{attrs:{disabled:"",type:"default"}},[e._v("Categorias")])],1)])])]),a("modal",{attrs:{show:e.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(t){return e.$set(e.modals,"modal1",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[e._v("Datos del servicio")])])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-copy-04","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.serviceRegister,callback:function(t){e.serviceRegister=t},expression:"serviceRegister"}}),a("base-input",{attrs:{alternative:"",type:"number","max-count":"100",placeholder:"comision (%)","addon-left-icon":"ni ni-money-coins","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.comissionRegister,callback:function(t){e.comissionRegister=t},expression:"comissionRegister"}}),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de",placeholder:"Costo"},model:{value:e.priceRegister,callback:function(t){e.priceRegister=t},expression:"priceRegister"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.categoryRegister,expression:"categoryRegister"}],staticClass:"form-control mb-3",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.categoryRegister=t.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"black"}},[e._v("Escoja una categoria")]),e._l(e.categories,(function(t){return a("option",{key:t.name,staticStyle:{color:"black"}},[e._v(e._s(t.name))])}))],2),a("select",{directives:[{name:"model",rawName:"v-model",value:e.timeRegister,expression:"timeRegister"}],staticClass:"form-control mb-3",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.timeRegister=t.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:"Seleccione el tiempo"}},[e._v("Seleccione el tiempo")]),a("option",{staticStyle:{color:"black"},attrs:{value:"15"}},[e._v("15 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"30"}},[e._v("30 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"45"}},[e._v("45 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"60"}},[e._v("60 Minutos (1 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"90"}},[e._v("90 Minutos (1:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"120"}},[e._v("120 Minutos (2 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"150"}},[e._v("150 Minutos (2:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"180"}},[e._v("180 Minutos (3 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"210"}},[e._v("210 Minutos (3:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"240"}},[e._v("240 Minutos (4 Hr)")])]),a("div",{staticClass:"row mx-auto mt-2"},[a("h3",{staticClass:"w-100 text-center"},[e._v("¿Aplica descuento?")]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"false",value:"true",inline:""},model:{value:e.addDiscount,callback:function(t){e.addDiscount=t},expression:"addDiscount"}},[a("b",[e._v("Si")])]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"true",value:"false",checked:"",inline:""},model:{value:e.addDiscount,callback:function(t){e.addDiscount=t},expression:"addDiscount"}},[a("b",[e._v("No")])])],1),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-user-check"},[e._v("\n                                    Empleados\n                                ")])]),a("vue-custom-scrollbar",{staticClass:"maxHeight"},[a("vue-bootstrap4-table",{attrs:{rows:e.lenders,columns:e.columnsLender,classes:e.classes,config:e.configLender},on:{"on-select-row":e.selected,"on-all-select-rows":e.selectedAll,"on-unselect-row":e.unSelected,"on-all-unselect-rows":e.unSelectedAll}})],1)],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"},[e._v("\n                                    Productos\n                                ")])]),a("vue-custom-scrollbar",{staticClass:"maxHeight"},[a("div",{staticClass:"p-4"},e._l(e.rowsItems,(function(t,s){return a("base-button",{staticClass:"col-12 mb-1",attrs:{type:"secondary"},on:{click:function(t){return e.elegirCantidad(s,1)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("base-checkbox",{staticClass:"float-left",model:{value:e.itemsBox[s].check,callback:function(t){e.$set(e.itemsBox[s],"check",t)},expression:"itemsBox[index].check"}},[e._v(e._s(t.producto))])],1),a("div",{staticClass:"col-4"},[""!=e.itemsBox[s].count?a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".8em !important"},attrs:{type:"success"}},[e._v(e._s(e.itemsBox[s].count)+" "+e._s(t.type))]):e._e()],1)])])})),1)])],1)],1),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:e.registerService}},[e._v("Registrar")])],1)],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(t){return e.$set(e.modals,"modal2",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[e._v("Datos del servicio")])])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"ni ni-single-copy-04","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.serviceEdit,callback:function(t){e.serviceEdit=t},expression:"serviceEdit"}}),a("base-input",{attrs:{alternative:"",type:"text",placeholder:"comision (%)","addon-left-icon":"ni ni-money-coins","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.comissionEdit,callback:function(t){e.comissionEdit=t},expression:"comissionEdit"}}),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de","addon-left-icon":"ni ni-time-alarm","addon-right-icon":"fa fa-asterisk text-danger"},model:{value:e.priceEdit,callback:function(t){e.priceEdit=t},expression:"priceEdit"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.editCategoryServicer,expression:"editCategoryServicer"}],staticClass:"form-control mb-3",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.editCategoryServicer=t.target.multiple?a:a[0]}}},e._l(e.categories,(function(t){return a("option",{key:t.name,staticStyle:{color:"black"}},[e._v(e._s(t.name))])})),0),a("select",{directives:[{name:"model",rawName:"v-model",value:e.timeEdit,expression:"timeEdit"}],staticClass:"form-control mb-3",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.timeEdit=t.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"black"},attrs:{value:"15"}},[e._v("15 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"30"}},[e._v("30 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"45"}},[e._v("45 Minutos")]),a("option",{staticStyle:{color:"black"},attrs:{value:"60"}},[e._v("60 Minutos (1 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"90"}},[e._v("90 Minutos (1:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"120"}},[e._v("120 Minutos (2 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"150"}},[e._v("150 Minutos (2:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"180"}},[e._v("180 Minutos (3 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"210"}},[e._v("210 Minutos (3:30 Hr)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"240"}},[e._v("240 Minutos (4 Hr)")])]),a("div",{staticClass:"row mx-auto mt-2"},[a("h3",{staticClass:"w-100 text-center"},[e._v("¿Aplica descuento?")]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"false",inline:""},model:{value:e.addDiscountEdit,callback:function(t){e.addDiscountEdit=t},expression:"addDiscountEdit"}},[a("b",[e._v("Si")])]),a("base-radio",{staticClass:"mb-3 mx-auto",attrs:{name:"true",inline:""},model:{value:e.addDiscountEdit,callback:function(t){e.addDiscountEdit=t},expression:"addDiscountEdit"}},[a("b",[e._v("No")])])],1),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-user-check"},[e._v("\n                                    Empleados\n                                ")])]),a("vue-custom-scrollbar",{ref:"table",staticClass:"maxHeight"},[a("vue-bootstrap4-table",{attrs:{rows:e.lenders,columns:e.columnsLender,classes:e.classes,config:e.configLender},on:{"on-select-row":e.selected,"on-all-select-rows":e.selectedAll,"on-unselect-row":e.unSelected,"on-all-unselect-rows":e.unSelectedAll}})],1)],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"},[e._v("\n                                    Productos\n                                ")])]),a("vue-custom-scrollbar",{staticClass:"maxHeight"},[a("div",{staticClass:"p-4"},e._l(e.rowsItems,(function(t,s){return a("base-button",{staticClass:"col-12 mb-1",attrs:{type:"secondary"},on:{click:function(t){return e.elegirCantidad(s,2)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("base-checkbox",{staticClass:"float-left",model:{value:e.itemsBox[s].check,callback:function(t){e.$set(e.itemsBox[s],"check",t)},expression:"itemsBox[index].check"}},[e._v(e._s(t.producto))])],1),a("div",{staticClass:"col-4"},[""!=e.itemsBox[s].count?a("badge",{staticClass:"float-right text-default",staticStyle:{"font-size":".8em !important"},attrs:{type:"success"}},[e._v(e._s(e.itemsBox[s].count)+" "+e._s(t.type))]):e._e()],1)])])})),1)])],1)],1),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:e.editService}},[e._v("Editar")])],1)],1)]],2)],1),a("vue-bootstrap4-table",{attrs:{rows:e.services,columns:e.columns,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"actionButtons",fn:function(t){return[a("center",[e.validRoute("servicios","editar")?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-add",size:"sm",type:"default"},on:{click:function(a){return e.dataEdit(t.row._id,t.row.prestadores,t.row.nombre,t.row.tiempo,t.row.descuento,t.row.comision,t.row.precio,t.row.productos,t.row.category)}}},[e._v("Editar")]):a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-add",size:"sm",type:"default",disabled:""}},[e._v("Editar")]),e.validRoute("servicios","activaciones")?[t.row.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success"},on:{click:function(a){return e.changeStatus(t.row._id)}}},[e._v("Activo")]):a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-remove",size:"sm",type:"danger"},on:{click:function(a){return e.changeStatus(t.row._id)}}},[e._v("Inactivo")])]:[t.row.active?a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-check-bold",size:"sm",type:"success",disabled:""}},[e._v("Activo")]):a("base-button",{staticClass:"text-center",attrs:{icon:"ni ni-fat-remove",size:"sm",type:"danger",disabled:""}},[e._v("Inactivo")])]],2)]}},{key:"price",fn:function(t){return[e._v("\n            "+e._s(e.formatPrice(t.row.precio))+"\n        ")]}},{key:"time",fn:function(t){return[e._v("\n            "+e._s(t.row.tiempo)+"Min\n        ")]}},{key:"comission",fn:function(t){return[e._v("\n            "+e._s(t.row.comision)+"%\n        ")]}},{key:"pagination-info",fn:function(t){return[e._v("\n            Actuales "+e._s(t.currentPageRowsLength)+" | \n            Filtrados "+e._s(t.filteredRowsLength)+" | \n            Registros totales "+e._s(t.originalRowsLength)+"\n        ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n            Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n        ")]}}])}),a("modal",{attrs:{show:e.modals.modal3,gradient:e.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(t){return e.$set(e.modals,"modal3",t)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:e.modals.icon}),a("h1",{staticClass:"heading mt-5"},[e._v(e._s(e.modals.message))])])]),a("modal",{attrs:{show:e.modals.modal4,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(t){return e.$set(e.modals,"modal4",t)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("small",[e._v("Cantidad")])])],[a("div",{staticClass:"row mx-auto"},[a("div",{staticClass:"col-7"},[a("base-input",{attrs:{alternative:"",placeholder:"Cantidad por uso","addon-left-icon":"fa fa-list-ol"},model:{value:e.countModal,callback:function(t){e.countModal=t},expression:"countModal"}})],1),a("div",{staticClass:"col-5 text-center mt-2"},[e._v("\n                    "+e._s(e.unitPerItem)+"\n                  ")])]),a("div",{staticClass:"text-center"},[a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:e.selectedItem}},[e._v("Registrar")])],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal5,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(t){return e.$set(e.modals,"modal5",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[e._v("Categorias")])])],[a("vue-bootstrap4-table",{staticClass:"class_categories",attrs:{rows:e.categories,columns:e.columnsCategories,classes:e.classes,config:e.configCategories},scopedSlots:e._u([{key:"deleteCat",fn:function(t){return[a("base-button",{staticClass:"text-center float-right",attrs:{icon:"ni ni-fat-remove",size:"sm",type:"danger"},on:{click:function(a){return e.deleteCategory(t.row._id)}}},[e._v("Borrar")])]}}])}),a("base-button",{staticClass:"mt-1 float-right",attrs:{type:"success"},on:{click:function(t){e.modals.modal6=!0}}},[e._v("Nueva categoria\n                ")])]],2)],1),a("modal",{attrs:{show:e.modals.modal6,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(t){return e.$set(e.modals,"modal6",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[a("h3",[e._v("Registre una categoria")])])],[a("base-input",{attrs:{alternative:"",placeholder:"nombre de la categoria","addon-left-icon":"fa fa-list-ol"},model:{value:e.nameCategory,callback:function(t){e.nameCategory=t},expression:"nameCategory"}}),a("base-button",{staticClass:"mt-1 float-right",attrs:{type:"success"},on:{click:e.newCategory}},[e._v("Registrar categoria\n                ")])]],2)],1)],1)},o=[],i=(a("96cf"),a("3b8d")),r=(a("6b54"),a("a481"),a("bd86")),n=a("bc3a"),l=a.n(n),c=a("a5e9"),d=a.n(c),m=a("12f9"),u=a("41cb"),p=a("e366"),v=a("04e1"),f=a.n(v),h=a("714b"),g=a("4b70"),b=a.n(g),y={components:{VueBootstrap4Table:m["a"],Modal:h["a"],vueCustomScrollbar:b.a},data:function(){var e,t,a;return{auth:[],categoryRegister:"Escoja una categoria",unitPerItem:"",countModal:"",typeItemModal:"",itemUses:"",modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},nameCategory:"",categories:[],serviceRegister:"",priceRegister:0,comissionRegister:"",timeRegister:"Seleccione el tiempo",services:[],columnsLender:[{label:"Nombre",name:"nombre",sort:!0}],columnsItem:[{label:"Nombre",name:"producto",sort:!0}],columnsCategories:[{label:"Nombre",name:"name",sort:!0},{label:"Borrar",name:"name",slot_name:"deleteCat",sort:!1}],columns:[{label:"Nombre",name:"nombre",sort:!0},{label:"Costo",name:"precio",slot_name:"price",sort:!0},{label:"Tiempo",name:"tiempo",slot_name:"time",sort:!0},{label:"Comisión",name:"comision",slot_name:"comission"},{label:"Acciones",name:"_id",slot_name:"actionButtons",sort:!0}],config:(e={card_title:"Tabla de servicios",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(r["a"])(e,"rows_selectable",!0),Object(r["a"])(e,"per_page_options",[5,10,20,30,40,50,80,100]),Object(r["a"])(e,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(r["a"])(e,"show_refresh_button",!1),Object(r["a"])(e,"show_reset_button",!1),Object(r["a"])(e,"selected_rows_info",!0),Object(r["a"])(e,"preservePageOnDataChange",!0),Object(r["a"])(e,"pagination_info",!0),e),configCategories:(t={card_title:"",checkbox_rows:!1,rows_selectable:!1,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(r["a"])(t,"rows_selectable",!1),Object(r["a"])(t,"per_page_options",[5,10,20,30,40,50,80,100]),Object(r["a"])(t,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(r["a"])(t,"show_refresh_button",!1),Object(r["a"])(t,"show_reset_button",!1),Object(r["a"])(t,"selected_rows_info",!1),Object(r["a"])(t,"preservePageOnDataChange",!1),Object(r["a"])(t,"pagination_info",!1),Object(r["a"])(t,"pagination",!1),t),configLender:(a={checkbox_rows:!0,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(r["a"])(a,"rows_selectable",!0),Object(r["a"])(a,"per_page_options",[5,10,20,30,40,50,80,100]),Object(r["a"])(a,"show_refresh_button",!1),Object(r["a"])(a,"show_reset_button",!1),Object(r["a"])(a,"selected_rows_info",!1),Object(r["a"])(a,"preservePageOnDataChange",!1),Object(r["a"])(a,"pagination_info",!1),Object(r["a"])(a,"pagination",!1),Object(r["a"])(a,"global_search",{placeholder:"Busque el prestador",visibility:!0,case_sensitive:!1,showClearButton:!0,searchOnPressEnter:!1,searchDebounceRate:200}),a),classes:{table:"table-bordered table-striped"},lenders:[],lenderSelecteds:[],addDiscount:!1,idServiceEdit:"",EditlenderSelecteds:[],serviceEdit:"",priceEdit:0,comissionEdit:0,timeEdit:"",addDiscountEdit:"",prueba:"false",rowsItems:[],itemSelected:[],EdititemSelected:[],itemsBox:[],itemIndex:"",editCategoryServicer:""}},beforeCreate:function(){localStorage.getItem("userToken")||(this.$swal({type:"error",title:"URL restringida",showConfirmButton:!1,timer:1500}),u["a"].push({name:"login"}))},created:function(){this.getServices(),this.getLenders(),this.getProducts(),this.getToken(),this.getCategories()},methods:{getToken:function(){var e=localStorage.userToken,t=f()(e);this.auth=t.access},getServices:function(){var e=this;l.a.get(d.a.endpointTarget+"/servicios").then((function(t){e.services=t.data}))},getProducts:function(){var e=this;l.a.get(d.a.endpointTarget+"/inventario").then((function(t){e.rowsItems=t.data;for(var a=0;a<e.rowsItems.length;a++)e.itemsBox.push({check:!1,count:""})})),console.log(this.itemsBox)},formatPrice:function(e){var t=(e/1).toFixed(2).replace(".",",");return"$ "+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},getLenders:function(){var e=this;l.a.get(d.a.endpointTarget+"/manicuristas").then((function(t){e.lenders=t.data}))},selected:function(e){console.log(this.$refs.table.$children[0].$data),this.lenderSelecteds.push(e.selected_item._id),this.EditlenderSelecteds.push(e.selected_item._id),console.log(e)},unSelected:function(e){for(var t=0;t<this.lenderSelecteds.length;t++)if(this.lenderSelecteds[t]==e.unselected_item._id){this.lenderSelecteds.splice(t,1);break}for(var a=0;a<this.EditlenderSelecteds.length;a++)if(this.EditlenderSelecteds[a]==e.unselected_item._id){this.EditlenderSelecteds.splice(a,1);break}},selectedAll:function(e){for(var t=0;t<e.selected_items.length;t++)this.lenderSelecteds.push(e.selected_items[t]._id),this.EditlenderSelecteds.push(e.selected_items[t]._id)},unSelectedAll:function(e){this.lenderSelecteds=[],this.EditlenderSelecteds=[]},selectedItem:function(e){var t=this;""!=this.countModal?(this.itemsBox[this.itemIndex].check=!0,this.itemsBox[this.itemIndex].count=this.countModal,1==this.typeItemModal&&this.itemSelected.push({id:this.rowsItems[this.itemIndex]._id,count:this.itemsBox[this.itemIndex].count}),2==this.typeItemModal&&this.EdititemSelected.push({id:this.rowsItems[this.itemIndex]._id,count:this.itemsBox[this.itemIndex].count}),this.modals.modal4=!1,this.modals.modal3=!0,this.modals.message="Registro existoso",this.modals.icon="ni ni-check-bold ni-5x",this.modals.type="success",setTimeout((function(){t.modals.modal3=!1,t.modals.message="",t.modals.icon="",t.modals.type=""}),1500)):(this.modals={modal3:!0,message:"Debe rellenar los datos",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500))},unSelectedItem:function(e){for(var t=0;t<this.itemSelected.length;t++)if(this.itemSelected[t]==e.unselected_item._id){this.itemSelected.splice(t,1);break}for(var a=0;a<this.EdititemSelected.length;a++)if(this.EdititemSelected[a]==e.unselected_item._id){this.EdititemSelected.splice(a,1);break}},selectedAllItem:function(e){for(var t=0;t<e.selected_items.length;t++)this.itemSelected.push(e.selected_items[t]._id),this.EdititemSelected.push(e.selected_items[t]._id)},unSelectedAllItem:function(e){this.itemSelected=[],this.EdititemSelected=[]},registerService:function(){var e=this;if(""==this.serviceRegister||0==this.priceRegister||""==this.timeRegister||""==this.comissionRegister)this.modals={modal3:!0,message:"Debe rellenar los datos",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500);else if(0==this.lenderSelecteds.length)this.modals={modal3:!0,message:"Debe seleccionar almenos un prestador",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500);else{var t=!this.addDiscount;l.a.post(d.a.endpointTarget+"/servicios",{nombreServicio:this.serviceRegister,precioServicio:this.priceRegister,comisionServicio:this.comissionRegister,tiempoServicio:this.timeRegister,prestadores:this.lenderSelecteds,productos:this.itemSelected,categoryRegister:this.categoryRegister,descuento:t}).then((function(t){"Servicio creado"==t.data.status?(e.modals={modal3:!0,message:"El servicio se registro con exito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500),e.initialState(),e.getServices(),p["a"].$emit("reloadServices","reload")):(e.modals={modal3:!0,message:"El servicio ya existe",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500))}))}},initialState:function(){this.serviceRegister="",this.priceRegister=0,this.comissionRegister="",this.timeRegister="Seleccione el tiempo",this.lenderSelecteds=[],this.addDiscount=!1,this.modals.modal1=!1,$(".maxHeight  thead .vbt-checkbox").click(),$(".maxHeight  thead .vbt-checkbox").prop("checked",!1)},dataEdit:function(e,t,a,s,o,i,r,n,l){var c=this;console.log(n),this.itemsBox=[];for(var d=0;d<this.rowsItems.length;d++)this.itemsBox.push({check:!1,count:""});this.EditlenderSelecteds=[],this.EdititemSelected=[];this.idServiceEdit=e,this.EditlenderSelecteds=t,this.EdititemSelected=n,this.serviceEdit=a,this.priceEdit=r,this.editCategoryServicer=l,this.comissionEdit=i,this.timeEdit=s,this.addDiscountEdit=o,this.modals.modal2=!0;for(var m=this.$refs.table.$children[0].$data.vbt_rows,u=this.$refs.table.$children[0].$data.selected_items,p=0;p<=u.length;p++)u.shift();setTimeout((function(){for(var e=0;e<m.length;e++)for(var t=0;t<c.EditlenderSelecteds.length;t++)c.EditlenderSelecteds[t]==m[e]._id&&u.push(m[e]);for(var a=0;a<c.rowsItems.length;a++)for(var s=0;s<c.EdititemSelected.length;s++)c.EdititemSelected[s].id==c.rowsItems[a]._id&&(c.itemsBox[a].check=!0,c.itemsBox[a].count=c.EdititemSelected[s].count)}),100)},clean:function(){for(var e=this.$refs.table.$children[0].$data.selected_items,t=0;t<=e.length;t++)e.shift(),console.log(e.length)},editService:function(){var e=this;if(""==this.serviceEdit||""==this.priceEdit||""==this.timeEdit||""==this.comissionEdit)this.modals={modal3:!0,message:"Debe rellenar los datos",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500);else if(0==this.EditlenderSelecteds.length)this.modals={modal3:!0,message:"Debe seleccionar almenos un prestador",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500);else{console.log(this.EdititemSelected);this.addDiscountEdit;var t=this.idServiceEdit;l.a.put(d.a.endpointTarget+"/servicios/"+t,{nombreServicio:this.serviceEdit,tiempoServicio:this.timeEdit,precioServicio:this.priceEdit,comisionServicio:this.comissionEdit,prestadores:this.EditlenderSelecteds,productos:this.EdititemSelected,descuento:this.addDiscountEdit,editCategoryServicer:this.editCategoryServicer}).then((function(t){e.modals={modal3:!0,message:"¡Servicio actualizado!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.getServices(),e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500),p["a"].$emit("reloadServices","reload")}))}},changeStatus:function(e){var t=this;l.a.put(d.a.endpointTarget+"/servicios/changeActive/"+e).then((function(e){t.getServices()})).catch((function(e){t.messageError="Error con la consulta",t.errorAlert=!0,setTimeout((function(){t.errorAlert=!1}),1500)}))},validRoute:function(e,t){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==e)for(var o=0;o<s.validaciones.length;o++)if(t==s.validaciones[o])return!0}},elegirCantidad:function(e,t){if(""==this.itemsBox[e].count)this.typeItemModal=t,this.countModal="",this.modals.modal4=!0,this.itemsBox[e].check=!1,this.itemIndex=e,this.unitPerItem=this.rowsItems[e].type;else{this.itemsBox[e].count="",this.itemsBox[e].check=!1;for(var a=0;a<this.itemSelected.length;a++)if(this.itemSelected[a].id==this.rowsItems[e]._id){this.itemSelected.splice(a,1);break}for(var s=0;s<this.EdititemSelected.length;s++)if(this.EdititemSelected[s].id==this.rowsItems[e]._id){this.EdititemSelected.splice(s,1);break}console.log(this.EdititemSelected)}},getCategories:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(d.a.endpointTarget+"/servicios/getCategory");case 2:t=e.sent,console.log(t),t.data.length>0&&(this.categories=t.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),newCategory:function(){var e=this;l.a.post(d.a.endpointTarget+"/servicios/newCategory",{name:this.nameCategory}).then((function(t){console.log(t),"ok"==t.data.status&&(e.getCategories(),e.nameCategory="",e.modals.modal6=!1)}))},deleteCategory:function(e){var t=this;l.a.delete(d.a.endpointTarget+"/servicios/deleteCategory/"+e).then((function(e){"ok"==e.data.status&&t.getCategories()}))}}},_=y,w=(a("cc64"),a("2877")),C=Object(w["a"])(_,s,o,!1,null,null,null);t["default"]=C.exports},2020:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/inventario.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white"},[e._v("Sección de inventario")]),a("p",{staticClass:"text-white mt-0 mb-2"},[e._v("Esta es la sección administrativa de tu inventario, aquí podrás registrar, editar y visualizar todos tus productos.")]),a("a",{staticClass:"btn btn-success text-white cursor-pointer",on:{click:function(t){e.modals.modal1=!0,e.validForm=1,e.initialState(2)}}},[e._v("Registrar un producto")]),a("a",{staticClass:"btn btn-success text-white cursor-pointer",on:{click:function(t){e.modals.modal3=!0,e.providerSup.typeProvider="Registrar",e.initialState(2)}}},[e._v("Registrar un provedor")]),a("a",{staticClass:"btn btn-danger text-white cursor-pointer",on:{click:function(t){e.modals.modal4=!0}}},[e._v("Cerrar inventario")])])])])]),a("tabs",{staticClass:"flex-column flex-md-row inventory",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{staticClass:"p-2",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-box-open"}),e._v("\n                  Tabla de productos\n              ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{card_title:"Hola",rows:e.rows,columns:e.columns,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"edit",fn:function(t){return[a("b",[a("center",[a("base-button",{attrs:{title:"Compras",size:"sm",type:"success",icon:"fa fa-plus"},on:{click:function(a){e.modals.modal1=!0,e.validForm=3,e.dataProduct.entry="",e.unit=t.row.type,e.dataProduct.name=t.row.producto,e.initialState(1,t.row._id)}}}),parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume)<=t.row.alertTotal?a("base-button",{attrs:{title:"Alerta producto",size:"sm",type:"danger",icon:"ni ni-bell-55"},on:{click:function(a){return e.dataStock(t.row._id,t.row.alertTotal,t.row.type)}}}):a("base-button",{attrs:{title:"Alerta producto",size:"sm",type:"success",icon:"ni ni-bell-55"},on:{click:function(a){return e.dataStock(t.row._id,t.row.alertTotal,t.row.type)}}}),a("base-button",{attrs:{title:"Eliminar",size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(a){return e.deleteItem(t.row._id)}}})],1)],1)]}},{key:"totalIdeal",fn:function(t){return[parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume)<=t.row.alertTotal?a("span",{staticStyle:{color:"#f5365c"}},[e._v("\n                    "+e._s(parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume))+"\n                  ")]):a("span",[e._v("\n                    "+e._s(parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume))+"\n                  ")])]}},{key:"price",fn:function(t){return[e._v("\n                  $ "+e._s(e.formatPrice(t.row.monto))+"\n                ")]}},{key:"pagination-info",fn:function(t){return[e._v("\n                    Actuales "+e._s(t.currentPageRowsLength)+" | \n                      Filtrados "+e._s(t.filteredRowsLength)+" | \n                    Registros totales "+e._s(t.originalRowsLength)+"\n                ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n                    Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n                ")]}}])})],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-user-tie"}),e._v("\n                  Tabla de provedores\n              ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:e.providerTable,columns:e.columProvider,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"edit",fn:function(t){return[a("b",[a("center",[a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(a){e.modals.modal3=!0,e.providerSup.typeProvider="Editar",e.pushDataProvider(t.row.nombre,t.row.rut,t.row.contacto,t.row.contactoAdicional,t.row.ubicacion,t.row._id)}}},[e._v("Editar")]),a("base-button",{attrs:{size:"sm",type:"danger",icon:"fa fa-trash"},on:{click:function(a){return e.deleteProvider(t.row._id)}}},[e._v("Eliminar")])],1)],1)]}},{key:"totalIdeal",fn:function(t){return[e._v("\n                  "+e._s(parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume))+"\n                ")]}},{key:"price",fn:function(t){return[e._v("\n                  $ "+e._s(e.formatPrice(t.row.monto))+"\n                ")]}},{key:"pagination-info",fn:function(t){return[e._v("\n                    Actuales "+e._s(t.currentPageRowsLength)+" | \n                      Filtrados "+e._s(t.filteredRowsLength)+" | \n                    Registros totales "+e._s(t.originalRowsLength)+"\n                ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n                    Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n                ")]}}])})],1),a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"ni ni-calendar-grid-58"}),e._v("\n                Historial\n              ")]),a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("card",{attrs:{shadow:""}},[a("tab-pane",[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-money-check-alt"}),e._v("\n                              Historial de compras\n                          ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{card_title:"Hola",rows:e.history,columns:e.columHistory,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"totalIdeal",fn:function(t){return[e._v("\n                              "+e._s(parseFloat(t.row.cantidad)+parseFloat(t.row.entry)-parseFloat(t.row.consume))+"\n                            ")]}},{key:"costo",fn:function(t){return[e._v("\n                              $ "+e._s(e.formatPrice(t.row.precio))+"\n                            ")]}},{key:"pagination-info",fn:function(t){return[e._v("\n                                Actuales "+e._s(t.currentPageRowsLength)+" | \n                                  Filtrados "+e._s(t.filteredRowsLength)+" | \n                                Registros totales "+e._s(t.originalRowsLength)+"\n                            ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n                                Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n                            ")]}}])})],1),a("tab-pane",{attrs:{title:"Profile"}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-file-contract"}),e._v("\n                              Historial de cierres\n                          ")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:e.historyClosed,columns:e.columHistoryClosed,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"edit",fn:function(t){return[a("b",[a("center",[a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(a){e.modals.modal5=!0,e.validForm=2,e.reports=t.row.array}}},[e._v("Ver informe")])],1)],1)]}},{key:"date",fn:function(t){return[e._v("\n                              "+e._s(e.formatDate(t.row.fecha))+"\n                            ")]}},{key:"pagination-info",fn:function(t){return[e._v("\n                                Actuales "+e._s(t.currentPageRowsLength)+" | \n                                  Filtrados "+e._s(t.filteredRowsLength)+" | \n                                Registros totales "+e._s(t.originalRowsLength)+"\n                            ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n                                Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n                            ")]}}])})],1)],1)],1)],1)],1)],1),a("modal",{attrs:{show:e.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(t){return e.$set(e.modals,"modal1",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[void 0,[3!=e.validForm?a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[e._v("Datos del producto")])]):a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[e._v("Anexa mas productos a "+e._s(e.dataProduct.name))])]),a("form",{attrs:{role:"form"}},[3==e.validForm?a("div",{staticClass:"row"},[a("div",{staticClass:"col-7"},[a("base-input",{attrs:{alternative:"",placeholder:"Cantidad","addon-left-icon":"fa fa-box-open"},on:{keyup:e.valid},model:{value:e.dataProduct.entry,callback:function(t){e.$set(e.dataProduct,"entry",t)},expression:"dataProduct.entry"}})],1),a("div",{staticClass:"col-5 mt-2"},[e._v("\n                      "+e._s(e.unit)+"\n                    ")])]):e._e(),3==e.validForm?a("base-input",{attrs:{"addon-left-icon":"ni ni-calendar-grid-58"},on:{change:e.valid},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.focus,o=t.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{config:e.configDatePicker,placeholder:"Seleccione una fecha de compra"},on:{"on-open":s,"on-close":o},model:{value:e.dateAdd,callback:function(t){e.dateAdd=t},expression:"dateAdd"}})}}],null,!1,752621718)}):e._e(),3!=e.validForm?a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre","addon-left-icon":"fa fa-edit"},model:{value:e.dataProduct.name,callback:function(t){e.$set(e.dataProduct,"name",t)},expression:"dataProduct.name"}}):e._e(),3!=e.validForm?a("select",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"unit"}],staticClass:"form-control mb-3",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.unit=t.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:""}},[e._v("Seleccione el tipo de medida")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Gramo(s)"}},[e._v("Gramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Kilogramo(s)"}},[e._v("Kilogramo(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Litro(s)"}},[e._v("Litro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Mililitro(s)"}},[e._v("Mililitro(s)")]),a("option",{staticStyle:{color:"black"},attrs:{value:"Unidad"}},[e._v("Unidad")])]):e._e(),3!=e.validForm?a("base-input",{attrs:{alternative:"",placeholder:"Cantidad","addon-left-icon":"fa fa-box-open"},model:{value:e.dataProduct.initial,callback:function(t){e.$set(e.dataProduct,"initial",t)},expression:"dataProduct.initial"}}):e._e(),1==e.validForm?a("base-input",{attrs:{alternative:"",placeholder:"Numero para alerta","addon-left-icon":"fa fa-bell"},model:{value:e.dataProduct.alert,callback:function(t){e.$set(e.dataProduct,"alert",t)},expression:"dataProduct.alert"}}):e._e(),a("currency-input",{staticClass:"form-control mb-3",staticStyle:{"margin-top":"-10px"},attrs:{locale:"de",placeholder:"Precio por unidad","addon-left-icon":"ni ni-money-coins"},on:{keyup:e.valid},model:{value:e.dataProduct.price,callback:function(t){e.$set(e.dataProduct,"price",t)},expression:"dataProduct.price"}}),3==e.validForm?a("base-button",{staticClass:"mb-2",attrs:{icon:"fa fa-plus",size:"sm",type:"success"},on:{click:function(t){e.modals.modal3=!0}}},[e._v("Registrar provedor")]):e._e(),a("div",{on:{click:e.valid,keyup:e.valid}},[3==e.validForm?a("vue-single-select",{attrs:{options:e.providers,placeholder:"Provedor"},model:{value:e.provider,callback:function(t){e.provider=t},expression:"provider"}}):e._e()],1),a("div",{staticClass:"text-center"},[1==e.validForm?a("base-button",{attrs:{type:"default"},on:{click:function(t){return e.addProduct()}}},[e._v("Registrar")]):e._e(),2==e.validForm?a("base-button",{attrs:{type:"default"},on:{click:function(t){return e.updateProducts()}}},[e._v("Editar")]):e._e(),3==e.validForm?a("base-button",{attrs:{type:"success"},on:{click:function(t){return e.addMore(e.dataProduct.id)}}},[e._v("Agregar")]):e._e()],1)],1)]],2)],1),a("modal",{attrs:{show:e.modals.modal6,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(t){return e.$set(e.modals,"modal6",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[e._v("Edite el total para que le sistema alerte cuando este próximo a acabarse ("+e._s(e.typeStock)+")")])]),a("form",{attrs:{role:"form"}},[a("base-input",{attrs:{alternative:"",placeholder:"Total alarma","addon-left-icon":"fa fa-bell"},model:{value:e.stockTotal,callback:function(t){e.stockTotal=t},expression:"stockTotal"}})],1)],a("div",{staticClass:"text-center"},[a("base-button",{attrs:{type:"default"},on:{click:function(t){return e.editStock()}}},[e._v("Editar")])],1)],2)],1),a("modal",{attrs:{show:e.modals.modal3,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-sm"},on:{"update:show":function(t){return e.$set(e.modals,"modal3",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-center text-muted mb-4",staticStyle:{"margin-top":"-30%"}},[a("small",[e._v("Datos del provedor")])]),a("form",{attrs:{role:"form"}},[a("base-input",{attrs:{alternative:"",placeholder:"Nombre de la empresa","addon-left-icon":"fa fa-user-tie","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validProviders()}},model:{value:e.provider.name,callback:function(t){e.$set(e.provider,"name",t)},expression:"provider.name"}}),a("base-input",{attrs:{alternative:"",placeholder:"RUT de la empresa","addon-left-icon":"fa fa-key","addon-right-icon":"fas fa-plus text-default"},model:{value:e.provider.rut,callback:function(t){e.$set(e.provider,"rut",t)},expression:"provider.rut"}}),a("base-input",{attrs:{alternative:"",placeholder:"Contacto de la empresa","addon-left-icon":"fa fa-address-book","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validProviders()}},model:{value:e.provider.contact,callback:function(t){e.$set(e.provider,"contact",t)},expression:"provider.contact"}}),a("base-input",{attrs:{alternative:"",placeholder:"Contacto adicional","addon-left-icon":"fa fa-address-book","addon-right-icon":"fas fa-plus text-default"},model:{value:e.provider.contactPlus,callback:function(t){e.$set(e.provider,"contactPlus",t)},expression:"provider.contactPlus"}}),a("base-input",{attrs:{alternative:"",placeholder:"Dirección de la empresa","addon-left-icon":"fas fa-route","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validProviders()}},model:{value:e.provider.direction,callback:function(t){e.$set(e.provider,"direction",t)},expression:"provider.direction"}})],1)],a("div",{staticClass:"text-center"},[a("base-button",{attrs:{disabled:e.providerSup.validProvider,type:"default"},on:{click:function(t){return e.providerFunction()}}},[e._v(e._s(e.providerSup.typeProvider))])],1)],2)],1),a("modal",{attrs:{show:e.modals.modal2,gradient:e.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(t){return e.$set(e.modals,"modal2",t)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:e.modals.icon}),a("h1",{staticClass:"heading mt-5"},[e._v(e._s(e.modals.message))])])]),a("modal",{attrs:{show:e.modals.modal4,"modal-classes":"modal-dialog-centered modal-lg"},on:{"update:show":function(t){return e.$set(e.modals,"modal4",t)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("Cierre de inventario")]),a("vue-custom-scrollbar",{staticStyle:{height:"30vh",overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}},[a("div",{staticClass:"row p-2 m-2"},[a("div",{staticClass:"col-7"},[e._v("\n          Nombre del producto\n        ")]),a("div",{staticClass:"col-5 text-left"},[e._v("\n          Total real\n        ")])]),e._l(e.rows,(function(t,s){return a("div",{staticClass:"row p-2 m-2"},[a("dt",{staticClass:"col-7 mt-2"},[e._v(e._s(t.producto))]),a("base-input",{staticClass:"col-5",attrs:{placeholder:"Ingrese cantidad en "+t.type},model:{value:e.countProduct[s].count,callback:function(t){e.$set(e.countProduct[s],"count",t)},expression:"countProduct[index].count"}})],1)}))],2),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"default"},on:{click:e.closeInventory}},[e._v("Cerrar inventario")]),a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(t){e.modals.modal4=!1}}},[e._v("Salir\n        ")])],1)],2),a("modal",{attrs:{"modal-classes":"modal-dialog-centered modal-xl",show:e.modals.modal5},on:{"update:show":function(t){return e.$set(e.modals,"modal5",t)}}},[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("Informe de cierre")]),a("vue-bootstrap4-table",{staticClass:"tableClient",attrs:{rows:e.reports,columns:e.columHistoryReport,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"pagination-info",fn:function(t){return[e._v("\n              Actuales "+e._s(t.currentPageRowsLength)+" | \n                Filtrados "+e._s(t.filteredRowsLength)+" | \n              Registros totales "+e._s(t.originalRowsLength)+"\n          ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n              Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n          ")]}}])}),a("template",{slot:"footer"},[a("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(t){e.modals.modal4=!1}}},[e._v("Cerrar\n          ")])],1)],2)],1)},o=[],i=(a("6b54"),a("a481"),a("7f7f"),a("bd86")),r=a("bc3a"),n=a.n(r),l=a("a5e9"),c=a.n(l),d=a("12f9"),m=a("4b70"),u=a.n(m),p=(a("e366"),a("c38f")),v=a.n(p),f=(a("0952"),a("4984")),h={components:{VueBootstrap4Table:d["a"],flatPicker:v.a,vueCustomScrollbar:u.a},data:function(){var e;return{countProduct:[],reports:[],usuario:localStorage.nombre+" "+localStorage.apellido,myId:null,historyClosed:[],validForm:0,providerSup:{validProvider:!1,typeProvider:""},history:[],provider:{name:"",rut:"",contact:"",contactPlus:"",direction:""},providers:[],providerTable:[],unit:"",dateAdd:"",stockTotal:"",idToStock:"",typeStock:"",addValid:!0,configDatePicker:{allowInput:!0,dateFormat:"m-d-Y",locale:f["Spanish"],minDate:new Date},modals:{modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},dataProduct:{name:"",price:0,initial:"",entry:"",alert:"",id:null},rows:[],columns:[{label:"Producto",name:"producto",sort:!0},{label:"precio",name:"monto",slot_name:"price",sort:!0},{label:"Tipo de medida",name:"type",sort:!0},{label:"Cantidad inicial",name:"cantidad",sort:!0},{label:"Cantidad ingresada",name:"entry",sort:!1},{label:"Consumo",name:"consume",sort:!1},{label:"Total",name:"",sort:!1,slot_name:"totalIdeal"},{label:"Administrar",name:"_id",sort:!1,slot_name:"edit"}],columProvider:[{label:"Nombre de la empresa",name:"nombre",sort:!0},{label:"RUT",name:"rut",sort:!0},{label:"Contacto",name:"contacto",sort:!0},{label:"Contacto adicional",name:"contactoAdicional",sort:!0},{label:"Ubicación",name:"ubicacion",sort:!0},{label:"Administrar",name:"_id",sort:!1,slot_name:"edit"}],columHistory:[{label:"Fecha",name:"fecha",sort:!0},{label:"Producto",name:"producto",sort:!0},{label:"Anexado",name:"entry",sort:!0},{label:"Medida",name:"unit",sort:!0},{label:"Costo",name:"precio",sort:!0,slot_name:"costo"},{label:"Provedor",name:"provedor",sort:!0}],columHistoryClosed:[{label:"Fecha",name:"fecha",sort:!0,slot_name:"date"},{label:"Encargado del cierre",name:"user",sort:!0,slot_name:"costo"},{label:"Productos totales",name:"totalProduct",sort:!0},{label:"Administrar",name:"_id",sort:!1,slot_name:"edit"}],columHistoryReport:[{label:"Producto",name:"name",sort:!0,slot_name:"date"},{label:"Medida",name:"medida",sort:!0,slot_name:"costo"},{label:"Total ideal",name:"ideal",sort:!0},{label:"Total real",name:"count",sort:!0},{label:"Diferencia",name:"diferencia",sort:!0}],config:(e={checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(i["a"])(e,"rows_selectable",!0),Object(i["a"])(e,"per_page_options",[5,10,20,30,40,50,80,100]),Object(i["a"])(e,"global_search",{placeholder:"Filtrar productos",visibility:!0,case_sensitive:!1}),Object(i["a"])(e,"show_refresh_button",!1),Object(i["a"])(e,"show_reset_button",!1),Object(i["a"])(e,"selected_rows_info",!0),Object(i["a"])(e,"preservePageOnDataChange",!0),Object(i["a"])(e,"pagination_info",!0),e),classes:{table:"table-bordered table-striped"}}},beforeCreate:function(){localStorage.getItem("userToken")||(this.$swal({type:"error",title:"URL restringida",showConfirmButton:!1,timer:1500}),router.push({name:"login"}))},created:function(){this.getProducts(),this.getProviders(),this.getHistoryClosed()},methods:{getProducts:function(){var e=this;this.countProduct=[],n.a.get(c.a.endpointTarget+"/inventario").then((function(t){e.rows=t.data,e.history=[];for(var a=0;a<t.data.length;a++)for(var s=0;s<t.data[a].history.length;s++)e.history.push(t.data[a].history[s]);for(var o=0;o<e.rows.length;o++){var i=e.rows[o].cantidad+e.rows[o].entry-e.rows[o].consume;e.countProduct.push({id:e.rows[o]._id,count:"",ideal:i,medida:e.rows[o].type,name:e.rows[o].producto,diferencia:""})}}))},getProviders:function(){var e=this;n.a.get(c.a.endpointTarget+"/inventario/getProvider").then((function(t){e.providerTable=t.data;for(var a=0;a<t.data.length;a++)e.providers.push(t.data[a].nombre)}))},getHistoryClosed:function(){var e=this;n.a.get(c.a.endpointTarget+"/inventario/getHistory").then((function(t){e.historyClosed=t.data}))},addProduct:function(){var e=this;n.a.post(c.a.endpointTarget+"/inventario",{product:this.dataProduct.name,type:this.unit,quantity:this.dataProduct.initial,price:this.dataProduct.price,alert:this.dataProduct.alert}).then((function(t){"ok"===t.data.status?(e.modals={modal2:!0,message:"¡Producto registrado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts(),e.initialState(3)}),1500)):(e.modals={modal2:!0,message:"¡Producto ya existe!",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!0,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts()}),1500))})).catch((function(t){e.$swal({type:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)}))},addProvider:function(){var e=this;n.a.post(c.a.endpointTarget+"/inventario/addProvider",{name:this.provider.name,rut:this.provider.rut,contacto:this.provider.contact,contactoPlus:this.provider.contactPlus,direccion:this.provider.direction}).then((function(t){"ok"===t.data.status?(e.$swal({type:"success",title:"Provedor registrado",showConfirmButton:!1,timer:1500}),e.getProducts(),e.getProviders()):e.$swal({type:"error",title:"Provedor existe",showConfirmButton:!1,timer:1500})})).catch((function(t){e.$swal({type:"error",title:"Problemas con el servidor",showConfirmButton:!1,timer:1500}),console.log(t)}))},initialState:function(e,t){1==e&&(this.myId=t,this.provider="",this.dateAdd="",this.dataProduct.price="",console.log(this.myId)),2==e&&(this.provider={name:"",rut:"",contact:"",contactPlus:"",direction:""},this.providerSup.validProvider=!0),3==e&&(console.log("No entre aqui"),this.dataProduct={name:"",price:0,initial:"",add:"",alert:"",id:""},this.unit="")},pushData:function(e,t,a,s,o){this.validForm=2,this.unit="",this.dataProduct={name:e,price:a,initial:t,id:s},this.unit=o},formatDate:function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()},formatPrice:function(e){var t=(e/1).toFixed(2).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},updateProducts:function(){var e=this;n.a.put(c.a.endpointTarget+"/inventario/"+this.dataProduct.id,{product:this.dataProduct.name,type:this.unit,cantidad:this.dataProduct.initial,monto:this.dataProduct.price}).then((function(t){e.modals={modal2:!0,message:"¡Producto actualizado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts(),e.initialState(2)}),1500)})).catch((function(t){e.modals={modal2:!0,message:"¡Error al actualizar el producto!",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal1:!0,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500)}))},updateProvider:function(){var e=this;n.a.put(c.a.endpointTarget+"/inventario/updateProvider/"+this.provider.id,{name:this.provider.name,rut:this.provider.rut,contact:this.provider.contact,contactoPlus:this.provider.contactPlus,ubicacion:this.provider.direction}).then((function(t){e.$swal({type:"success",title:"Provedor Actualizado",showConfirmButton:!1,timer:1500}),e.getProviders()})).catch((function(t){e.$swal({type:"error",title:"El provedor no fue actualizado",showConfirmButton:!1,timer:1500})}))},addMore:function(){var e=this;n.a.put(c.a.endpointTarget+"/inventario/add/"+this.myId,{entry:this.dataProduct.entry,history:{id:this.myId,fecha:this.dateAdd,producto:this.dataProduct.name,entry:this.dataProduct.entry,unit:this.unit,precio:this.dataProduct.price,provedor:this.provider,status:!0}}).then((function(t){e.modals={modal2:!0,message:"¡Producto actualizado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts()}),1500)})).catch((function(t){e.$swal({type:"error",title:"El producto no fue actualizado",showConfirmButton:!1,timer:1500})}))},valid:function(){""!=this.unit&&""!=this.dateAdd&&""!=this.dataProduct.price&&""!=this.provider?this.addValid=!1:this.addValid=!0},deleteProvider:function(e){var t=this;this.$swal({title:"¿Está seguro de borrar el provedor?",text:"No puedes revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?n.a.delete(c.a.endpointTarget+"/inventario/deleteProvider/"+e).then((function(e){"ok"==e.data.status&&(t.modals={modal2:!0,message:"Provedor borrado con exito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},t.getProviders()}),1500))})):(t.modals={modal2:!0,message:"Acción cancelada",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500))}))},deleteItem:function(e){var t=this;this.$swal({title:"¿Está seguro de borrar el producto?",text:"No puedes revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy seguro",cancelButtonText:"No, evitar acción",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value?n.a.put(c.a.endpointTarget+"/inventario/deleteItem/"+e).then((function(e){"ok"==e.data.status&&(t.modals={modal2:!0,message:"Producto borrado con exito",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},t.getProducts()}),1500))})):(t.modals={modal2:!0,message:"Acción cancelada",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""}}),1500))}))},closeInventory:function(){var e=this;n.a.post(c.a.endpointTarget+"/inventario/closeInventory",{user:this.usuario,array:this.countProduct}).then((function(t){"ok"===t.data.status?(e.modals={modal2:!0,message:"¡Cierre realizado!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts(),e.getHistoryClosed()}),1500)):e.$swal({type:"success",title:"Ya se hizo un cierre este mes",showConfirmButton:!1,timer:1500})})).catch((function(t){e.$swal({type:"error",title:"Cierre NO realizado",showConfirmButton:!1,timer:1500})}))},validProviders:function(){""==this.provider.name||""==this.provider.contact||""==this.provider.direction?this.providerSup.validProvider=!0:this.providerSup.validProvider=!1},pushDataProvider:function(e,t,a,s,o,i){this.provider={name:e,rut:t,contact:a,contactPlus:s,direction:o,id:i}},providerFunction:function(){"Registrar"==this.providerSup.typeProvider?this.addProvider():this.updateProvider()},deleteSale:function(e,t){var a=this;n.a.post(c.a.endpointTarget+"/inventario/deleteSale/"+e,{user:this.usuario,array:this.countProduct}).then((function(e){"ok"===e.data.status?(a.$swal({type:"success",title:"Cierre realizado",showConfirmButton:!1,timer:1500}),a.getProducts(),a.getHistoryClosed()):a.$swal({type:"success",title:"Ya se hizo un cierre este mes",showConfirmButton:!1,timer:1500})})).catch((function(e){a.$swal({type:"error",title:"Cierre NO realizado",showConfirmButton:!1,timer:1500})}))},dataStock:function(e,t,a){this.modals.modal6=!0,this.idToStock=e,this.typeStock=a,this.stockTotal=t},editStock:function(){var e=this;n.a.put(c.a.endpointTarget+"/inventario/editStockAlarm/"+this.idToStock,{stockTotal:this.stockTotal}).then((function(t){"ok"==t.data.status?(e.modals={modal2:!0,message:"Alarma actualizada",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.modals={modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,message:"",icon:"",type:""},e.getProducts()}),1500)):e.$swal({type:"error",title:"Hubo un problema",showConfirmButton:!1,timer:1500})}))}}},g=h,b=(a("862b"),a("2877")),y=Object(b["a"])(g,s,o,!1,null,null,null);t["default"]=y.exports},3294:function(e,t,a){},"4a39":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"header pb-7 pt-5  d-flex align-items-center",staticStyle:{"min-height":"400px","background-image":"url(img/theme/profile-cover.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask bg-gradient-success opacity-8"}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-7 col-md-10"},[a("h1",{staticClass:"display-2 text-white"},[e._v("Hola "+e._s(e.model.first_name))]),a("p",{staticClass:"text-white mt-0 mb-5"},[e._v("Este es tu perfil, puedes ver tu progreso trabajando para KKPrettyNails, en las diferentes secciones.Tambien puedes editar tus datos.")]),a("base-button",{staticClass:"mb-5",attrs:{type:"info"},on:{click:function(t){e.inspector=!0}}},[e._v("Editar perfil")])],1)])])]),a("div",{staticClass:"container-fluid mt--7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-4 order-xl-2 mb-5 mb-xl-0"},[a("div",{staticClass:"card card-profile shadow"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-3 order-lg-2"},[a("div",{staticClass:"card-profile-image"},[a("a",{attrs:{href:"#"}},[""==e.haveImage?a("img",{staticClass:"rounded-circle",staticStyle:{width:"150px",height:"150px"},attrs:{src:"img/theme/profile-default.png"}}):a("img",{staticClass:"rounded-circle",staticStyle:{width:"150px",height:"150px"},attrs:{src:e.model.image}})])])])]),a("div",{staticClass:"card-body pt-0 pt-md-4"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card-profile-stats d-flex justify-content-center mt-md-5"},[3==e.model.status?a("div",[a("span",{staticClass:"heading"},[e._v(e._s(e.monthLender))]),a("span",{staticClass:"description"},[e._v("Mi mes")])]):e._e(),3==e.model.status?a("div",[a("span",{staticClass:"heading"},[e._v(e._s(e.formatPrice(e.gainLender)))]),a("span",{staticClass:"description"},[e._v("Ganancia del mes")])]):e._e()])])]),a("div",{staticClass:"text-center"},[a("h3",[e._v("\n                                "+e._s(e.model.first_name)+" "+e._s(e.model.last_name)+"\n                            ")]),a("div",{staticClass:"h5"},[1==e.model.status?a("p",[e._v("Gerente")]):e._e(),2==e.model.status?a("p",[e._v("Personal de caja")]):e._e(),3==e.model.status?a("p",[e._v("Prestadora")]):e._e()]),a("hr",{staticClass:"my-4"}),a("p",[e._v(e._s(e.model.email))])]),a("hr",{staticClass:"my-4"}),a("p",[e._v(e._s(e.model.first_name)+" — "+e._s(e.model.about))])])])]),a("div",{staticClass:"col-xl-8 order-xl-1"},[a("card",{attrs:{shadow:"",type:"secondary"}},[a("div",{staticClass:"bg-white border-0",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-8"},[a("h3",{staticClass:"mb-0"},[e._v("Mi perfil")])])])]),[a("form",{on:{submit:function(e){e.preventDefault()}}},[a("h6",{staticClass:"heading-small text-muted mb-4"},[e._v("Información de usuario")]),a("div",{staticClass:"pl-lg-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[e.inspector?a("base-input",{attrs:{alternative:"",label:"Nombre",placeholder:"Username","input-classes":"form-control-alternative"},model:{value:e.model.first_name,callback:function(t){e.$set(e.model,"first_name",t)},expression:"model.first_name"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Nombre",placeholder:"Username","input-classes":"form-control-alternative"},model:{value:e.model.first_name,callback:function(t){e.$set(e.model,"first_name",t)},expression:"model.first_name"}})],1),a("div",{staticClass:"col-lg-6"},[e.inspector?a("base-input",{attrs:{alternative:"",label:"Apellido",placeholder:"jesse@example.com","input-classes":"form-control-alternative"},model:{value:e.model.last_name,callback:function(t){e.$set(e.model,"last_name",t)},expression:"model.last_name"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Apellido",placeholder:"jesse@example.com","input-classes":"form-control-alternative"},model:{value:e.model.last_name,callback:function(t){e.$set(e.model,"last_name",t)},expression:"model.last_name"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[e.inspector?a("base-input",{attrs:{alternative:"",label:"Correo",placeholder:"First name","input-classes":"form-control-alternative"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}}):a("base-input",{attrs:{disabled:"",alternative:"",label:"Correo",placeholder:"Last name","input-classes":"form-control-alternative"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),a("div",{staticClass:"col-lg-6 form-group"},[a("label",[a("strong",[e._v("Imagen de perfil")])]),e.inspector?a("input",{ref:"file",staticClass:"form-control mb-3",attrs:{type:"file",id:"fileProfile"},on:{change:function(t){return e.handleFileUpload()}}}):a("input",{ref:"file",staticClass:"form-control mb-3",attrs:{type:"file",id:"fileProfile",disabled:""}})])])]),a("hr",{staticClass:"my-4"}),a("h6",{staticClass:"heading-small text-muted mb-4"},[e._v("Sobre ti")]),a("div",{staticClass:"pl-lg-4"},[a("div",{staticClass:"form-group"},[a("base-input",{attrs:{alternative:"",label:"Sobre mi - proximamente"}},[e.inspector?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.model.about,expression:"model.about"}],staticClass:"form-control form-control-alternative",attrs:{rows:"4",placeholder:"Unas palabras sobre ti..."},domProps:{value:e.model.about},on:{input:function(t){t.target.composing||e.$set(e.model,"about",t.target.value)}}}):a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.model.about,expression:"model.about"}],staticClass:"form-control form-control-alternative",attrs:{disabled:"",rows:"4",placeholder:"Unas palabras sobre ti..."},domProps:{value:e.model.about},on:{input:function(t){t.target.composing||e.$set(e.model,"about",t.target.value)}}})])],1)]),e.inspector?a("base-button",{staticClass:"float-right",attrs:{type:"info"},on:{click:e.editProfile}},[e._v("Editar")]):e._e(),e.inspector?a("base-button",{attrs:{type:"info"},on:{click:function(t){e.modals.modal2=!0}}},[e._v("Cambiar contraseña")]):e._e()],1)]],2)],1)])]),a("modal",{attrs:{show:e.modals.modal1,gradient:e.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(t){return e.$set(e.modals,"modal1",t)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:e.modals.icon}),a("h1",{staticClass:"heading mt-5"},[e._v(e._s(e.modals.message))])])]),a("modal",{attrs:{show:e.modals.modal2,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal2",t)}}},[a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3"},[a("h3",[e._v("Cambie su contraseña")])])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Antigua contraseña",type:"password","addon-left-icon":"ni ni-key-25"},on:{change:function(t){return e.validRegister()}},model:{value:e.pass.lastPass,callback:function(t){e.$set(e.pass,"lastPass",t)},expression:"pass.lastPass"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nuevo contraseña",type:"password","addon-left-icon":"ni ni-key-25"},model:{value:e.pass.newPass,callback:function(t){e.$set(e.pass,"newPass",t)},expression:"pass.newPass"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Repita la contraseña",valid:e.pass.valid,type:"password"},on:{keyup:e.validFields},model:{value:e.pass.newPassVerify,callback:function(t){e.$set(e.pass,"newPassVerify",t)},expression:"pass.newPassVerify"}}),e.pass.validAll?a("base-button",{attrs:{type:"default"},on:{click:e.EditPass}},[e._v("\n                        Cambiar\n                    ")]):a("base-button",{attrs:{type:"default",disabled:""}},[e._v("\n                        Cambiar\n                    ")])],1)]],2)],1)],1)},o=[],i=(a("6b54"),a("a481"),a("28a5"),a("96cf"),a("3b8d")),r=a("bc3a"),n=a.n(r),l=a("41cb"),c=a("a5e9"),d=a.n(c),m=a("04e1"),u=a.n(m),p=a("e366"),v={name:"user-profile",data:function(){var e=localStorage.userToken,t=u()(e);return{id:t._id,model:{first_name:"",last_name:"",email:"",access:"",image:"",about:""},modals:{modal1:!1,modal2:!1,message:"",icon:"",type:""},inspector:!1,monthLender:0,gainLender:0,file:"",pass:{newPass:"",lastPass:"",newPassVerify:"",valid:null,validAll:null},haveImage:""}},beforeCreate:function(){localStorage.getItem("userToken")||(this.$swal({type:"error",title:"URL restringida",showConfirmButton:!1,timer:1500}),l["a"].push({name:"login"}))},created:function(){this.getData(),this.getYourSales()},methods:{validFields:function(){this.pass.valid=this.pass.newPass==this.pass.newPassVerify,this.validRegister()},validRegister:function(){this.pass.validAll=!(!this.pass.lastPass||1!=this.pass.valid)},getData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={headers:{"x-access-token":localStorage.userToken}},e.prev=1,e.next=4,n.a.get(d.a.endpointTarget+"/users/data/"+this.id,t);case 4:a=e.sent,this.model.first_name=a.data.first_name,this.model.last_name=a.data.last_name,this.model.email=a.data.email,this.model.status=a.data.status,this.model.access=a.data.LastAccess,this.model.about=a.data.about,this.model.image=d.a.imgEndpoint+a.data.userImage,this.haveImage=a.data.userImage,e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](1),this.$swal({type:"error",title:"Acceso invalido, ingrese de nuevo, si el problema persiste comuniquese con el proveedor del servicio",showConfirmButton:!1,timer:2500}),l["a"].push({name:"login"});case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(){return e.apply(this,arguments)}return t}(),EditPass:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.pass.newPassVerify!=this.pass.newPass){e.next=14;break}return t={headers:{"x-access-token":localStorage.userToken}},e.prev=2,e.next=5,n.a.put(d.a.endpointTarget+"/users/changePass/"+this.id,{newPass:this.pass.newPass,lastPass:this.pass.lastPass},t);case 5:a=e.sent,"ok"==a.data.status?(this.modals={modal2:!1,modal1:!0,message:"¡Contraseña cambiada con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){s.modals={modal1:!1,message:"",icon:"",type:""}}),1500),this.pass.newPass="",this.pass.lastPass="",this.pass.newPassVerify="",this.inspector=!1):(this.modals={modal2:!1,modal1:!0,message:"Contraseña incorrecta",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){s.modals={modal1:!1,message:"",icon:"",type:""}}),1500),this.pass.newPass="",this.pass.lastPass=""),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0);case 12:e.next=15;break;case 14:this.$swal({type:"error",title:"Las contraseñas deben conincidir",showConfirmButton:!1,timer:2500});case 15:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),getYourSales:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,o,i,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.userToken,a=u()(t),s=a.linkLender,this.link=a.linkLender,""==s){e.next=11;break}return o=s.split(" / "),e.next=8,n.a.get(d.a.endpointTarget+"/manicuristas/SalesByPrest/"+o[0]+":"+o[1]);case 8:for(i=e.sent,this.monthLender=i.data.length,r=0;r<i.data.length;r++)for(l=0;l<i.data[r].EmployeComision.length;l++)this.gainLender=i.data[r].EmployeComision[l].employe==o[0]?this.gainLender+i.data[r].EmployeComision[l].comision:this.gainLender+0;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatPrice:function(e){var t=(e/1).toFixed(2).replace(".",",");return"$ "+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},handleFileUpload:function(){this.file=this.$refs.file.files[0],console.log(this.file)},editProfile:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("image",this.file),t.append("first_name",this.model.first_name),t.append("last_name",this.model.last_name),t.append("email",this.model.email),t.append("about",this.model.about),a={nombre:this.model.first_name,apellido:this.model.last_name,image:""},e.prev=7,e.next=10,n.a.post(d.a.endpointTarget+"/users/editData/"+this.id,t,{headers:{"Content-Type":"multipart/form-data","x-access-token":localStorage.userToken}});case 10:s=e.sent,console.log(s),this.modals={modal1:!0,message:"¡Usuario editado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){o.modals={modal1:!1,message:"",icon:"",type:""}}),1500),this.inspector=!1,localStorage.setItem("nombre",a.nombre),localStorage.setItem("apellido",a.apellido),""!=s.data.image&&(localStorage.setItem("imageUser",s.data.image),a.image=s.data.image),p["a"].$emit("dataChange",a),this.getData(),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](7),console.log(e.t0);case 25:case"end":return e.stop()}}),e,this,[[7,22]])})));function t(){return e.apply(this,arguments)}return t}()}},f=v,h=a("2877"),g=Object(h["a"])(f,s,o,!1,null,null,null);t["default"]=g.exports},5144:function(e,t,a){},"639d":function(e,t,a){"use strict";var s=a("3294"),o=a.n(s);o.a},"862b":function(e,t,a){"use strict";var s=a("e2c2"),o=a.n(s);o.a},"980d":function(e,t,a){},cc64:function(e,t,a){"use strict";var s=a("980d"),o=a.n(s);o.a},d5c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"header pb-4 pt-2 pt-lg-4 d-flex align-items-center",staticStyle:{"min-height":"50px","background-image":"url(img/theme/users.jpg)","background-size":"cover","background-position":"center top"}},[a("span",{staticClass:"mask  opacity-7",staticStyle:{"background-color":"#172b4d !important"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h1",{staticClass:"display-2 text-white"},[e._v("Sección de empleados")]),a("p",{staticClass:"text-white mt-0 mb-2"},[e._v("Esta es la sección administrativa de tus empleados, aquí podrás registrar, editar y visualizar todos tus empleados.")]),e.validRoute("empleados","registrar")?a("base-button",{attrs:{type:"success"},on:{click:function(t){e.modals.modal1=!0,e.initialState(2)}}},[e._v("Registrar un empleado")]):e._e()],1)])])]),a("modal",{attrs:{show:e.modals.modal1,"body-classes":"p-0","modal-classes":"modal-dialog-centered modal-md"},on:{"update:show":function(t){return e.$set(e.modals,"modal1",t)}}},[a("h6",{staticClass:"modal-title p-0 m-0",attrs:{slot:"header",id:"modal-title-default"},slot:"header"}),a("card",{staticClass:"border-0",attrs:{type:"secondary",shadow:"","header-classes":"bg-white pb-5","body-classes":"px-lg-5 py-lg-5"}},[[a("div",{staticClass:"text-muted text-center mb-3",staticStyle:{"margin-top":"-15% !important"}},[e._v("\n                    Datos del empleado\n                ")])],[a("form",{attrs:{role:"form"}},[a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Nombre del empleado","addon-left-icon":"ni ni-single-02","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validRegister()}},model:{value:e.registerEmploye.name,callback:function(t){e.$set(e.registerEmploye,"name",t)},expression:"registerEmploye.name"}}),a("base-input",{staticClass:"mb-3",attrs:{alternative:"",placeholder:"Documento","addon-left-icon":"ni ni-key-25","addon-right-icon":"fa fa-asterisk text-danger"},on:{keyup:function(t){return e.validRegister()},change:function(t){e.registerEmploye.id=e.formatRut(e.registerEmploye.id)}},model:{value:e.registerEmploye.id,callback:function(t){e.$set(e.registerEmploye,"id",t)},expression:"registerEmploye.id"}}),[a("div",{staticClass:"text-muted text-center mb-3"},[e._v("Horario libre")])],a("div",{staticClass:"row"},[[a("div",{staticClass:"text-muted col-6 text-center"},[e._v("Desde "),a("i",{staticClass:"fa fa-asterisk",staticStyle:{"font-size":".5em",color:"#f5365c",position:"absolute",top:"18%",left:"65%"}})]),a("div",{staticClass:"text-muted col-6 text-center mb-3"},[e._v("Hasta"),a("i",{staticClass:"fa fa-asterisk",staticStyle:{"font-size":".5em",color:"#f5365c",position:"absolute",top:"30%",left:"64%"}})])],a("select",{directives:[{name:"model",rawName:"v-model",value:e.registerEmploye.timeRestOne,expression:"registerEmploye.timeRestOne"}],staticClass:"form-control mb-3 mx-auto col-5",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registerEmploye,"timeRestOne",t.target.multiple?a:a[0])},function(t){return e.validRegister()}]}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:"Seleccione el tiempo"}},[e._v("Seleccione el tiempo")]),a("option",{staticStyle:{color:"black"},attrs:{value:"12:00"}},[e._v("12:00")]),a("option",{staticStyle:{color:"black"},attrs:{value:"12:30"}},[e._v("12:30")]),a("option",{staticStyle:{color:"black"},attrs:{value:"13:00"}},[e._v("13:00")]),a("option",{staticStyle:{color:"black"},attrs:{value:"13:30"}},[e._v("13:30")]),a("option",{staticStyle:{color:"black"},attrs:{value:"14:00"}},[e._v("14:00")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.registerEmploye.timeRestTwo,expression:"registerEmploye.timeRestTwo"}],staticClass:"form-control mb-3 mx-auto col-5",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registerEmploye,"timeRestTwo",t.target.multiple?a:a[0])},function(t){return e.validRegister()}]}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:"Seleccione el tiempo"}},[e._v("Seleccione el tiempo")]),a("option",{staticStyle:{color:"black"},attrs:{value:"12:30"}},[e._v("12:30")]),a("option",{staticStyle:{color:"black"},attrs:{value:"13:00"}},[e._v("13:00")]),a("option",{staticStyle:{color:"black"},attrs:{value:"13:30"}},[e._v("13:30")]),a("option",{staticStyle:{color:"black"},attrs:{value:"14:00"}},[e._v("14:00")]),a("option",{staticStyle:{color:"black"},attrs:{value:"14:30"}},[e._v("14:30")])])],2),[a("div",{staticClass:"text-muted text-center mb-3"},[e._v("\n                            Día libre "),a("i",{staticClass:"fa fa-asterisk",staticStyle:{"font-size":".5em",color:"#f5365c",position:"absolute",left:"58%",bottom:"43%"}})])],a("select",{directives:[{name:"model",rawName:"v-model",value:e.registerEmploye.dayFree,expression:"registerEmploye.dayFree"}],staticClass:"form-control mb-3 mx-auto",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.registerEmploye,"dayFree",t.target.multiple?a:a[0])},function(t){return e.validRegister()}]}},[a("option",{staticStyle:{color:"black"},attrs:{selected:"",value:"Seleccione el día"}},[e._v("Seleccione el día")]),a("option",{staticStyle:{color:"black"},attrs:{value:"1"}},[e._v("Lunes")]),a("option",{staticStyle:{color:"black"},attrs:{value:"2"}},[e._v("Martes")]),a("option",{staticStyle:{color:"black"},attrs:{value:"3"}},[e._v("Miercoles")]),a("option",{staticStyle:{color:"black"},attrs:{value:"4"}},[e._v("Jueves")]),a("option",{staticStyle:{color:"black"},attrs:{value:"5"}},[e._v("Viernes")]),a("option",{staticStyle:{color:"black"},attrs:{value:"6"}},[e._v("Sabado")])]),a("div",{staticClass:"text-center"},[0==e.registerEmploye.valid?a("base-button",{staticClass:"my-4",attrs:{type:"primary",disabled:""}},[e._v(e._s(e.tipeForm))]):a("base-button",{staticClass:"my-4",attrs:{type:"primary"},on:{click:function(t){return e.proccess()}}},[e._v(e._s(e.tipeForm))])],1)],2)]],2)],1),a("modal",{attrs:{show:e.modals.modal2,gradient:e.modals.type,"modal-classes":"modal-danger modal-dialog-centered"},on:{"update:show":function(t){return e.$set(e.modals,"modal2",t)}}},[a("div",{staticClass:"py-3 text-center"},[a("i",{class:e.modals.icon}),a("h1",{staticClass:"heading mt-5"},[e._v(e._s(e.modals.message))])])]),a("vue-bootstrap4-table",{attrs:{rows:e.employes,columns:e.columns,classes:e.classes,config:e.config},scopedSlots:e._u([{key:"Administrar",fn:function(t){return[a("b",[a("center",[e.validRoute("empleados","detalle")?a("base-button",{attrs:{size:"sm",type:"default",icon:"ni ni-bullet-list-67"},on:{click:function(a){e.modals.modal1=!0,e.initialState(3),e.pushData(t.row.nombre,t.row.documento,t.row.restTime,t.row.restDay,t.row._id,t.row.comision)}}},[e._v("Detalles")]):a("base-button",{attrs:{disabled:"",size:"sm",type:"default",icon:"ni ni-bullet-list-67"}},[e._v("Detalles")]),e.validRoute("empleados","reportes")?a("base-button",{attrs:{size:"sm",type:"primary",icon:"ni ni-align-center"},on:{click:function(a){return e.reportEmploye(t.row._id)}}},[e._v("Reporte")]):a("base-button",{attrs:{size:"sm",disabled:"",type:"primary",icon:"ni ni-align-center"}},[e._v("Reporte")]),e.validRoute("empleados","eliminar")?a("base-button",{attrs:{size:"sm",type:"warning",icon:"ni ni-fat-remove"},on:{click:function(a){return e.deleteEmploye(t.row._id)}}},[e._v("Eliminar")]):a("base-button",{attrs:{size:"sm",disabled:"",type:"warning",icon:"ni ni-fat-remove"}},[e._v("Eliminar")])],1)],1)]}},{key:"total",fn:function(t){return[a("b",[e._v("\n               "+e._s(e.formatPrice(t.row.comision-t.row.advancement+t.row.bonus))+"\n            ")])]}},{key:"comision",fn:function(t){return[a("b",[e._v("\n               "+e._s(e.formatPrice(t.row.comision))+"\n            ")])]}},{key:"bono",fn:function(t){return[a("b",[e._v("\n               "+e._s(e.formatPrice(t.row.bonus))+"\n            ")])]}},{key:"advancement",fn:function(t){return[a("b",[e._v("\n               "+e._s(e.formatPrice(t.row.advancement))+"\n            ")])]}},{key:"pagination-info",fn:function(t){return[e._v("\n            Actuales "+e._s(t.currentPageRowsLength)+" | \n             Filtrados "+e._s(t.filteredRowsLength)+" | \n            Registros totales "+e._s(t.originalRowsLength)+"\n        ")]}},{key:"selected-rows-info",fn:function(t){return[e._v("\n            Total Number of rows selected : "+e._s(t.selectedItemsCount)+"\n        ")]}}])})],1)},o=[],i=(a("6b54"),a("28a5"),a("7f7f"),a("a481"),a("bd86")),r=a("bc3a"),n=a.n(r),l=a("41cb"),c=a("a5e9"),d=a.n(c),m=a("12f9"),u=a("e366"),p=a("04e1"),v=a.n(p),f={components:{VueBootstrap4Table:m["a"]},data:function(){var e;return{auth:[],tipeForm:"",registerEmploye:{name:"",id:"",timeRestOne:"Seleccione el tiempo",timeRestTwo:"Seleccione el tiempo",dayFree:"Seleccione el día",_id:"",comision:"",valid:!1,valid2:!1},modals:{modal1:!1,modal2:!1,message:"",icon:"",type:""},employes:[],columns:[{label:"Nombre",name:"nombre",sort:!0},{label:"Identidad",name:"documento",sort:!0},{label:"Comisión",name:"comision",sort:!0,slot_name:"comision"},{label:"Bonos",name:"bonus",sort:!0,slot_name:"bono"},{label:"Avances",name:"advancement",sort:!0,slot_name:"advancement"},{label:"Total",name:"status",sort:!0,slot_name:"total"},{label:"Administrar",name:"_id",sort:!1,slot_name:"Administrar"}],config:(e={card_title:"Tabla de empleados",checkbox_rows:!1,rows_selectable:!0,highlight_row_hover_color:"rgba(238, 238, 238, 0.623)"},Object(i["a"])(e,"rows_selectable",!0),Object(i["a"])(e,"per_page_options",[5,10,20,30,40,50,80,100]),Object(i["a"])(e,"global_search",{placeholder:"Enter custom Search text",visibility:!1,case_sensitive:!1}),Object(i["a"])(e,"show_refresh_button",!1),Object(i["a"])(e,"show_reset_button",!1),Object(i["a"])(e,"selected_rows_info",!0),Object(i["a"])(e,"preservePageOnDataChange",!0),Object(i["a"])(e,"pagination_info",!0),e),classes:{table:"table-bordered table-striped"}}},beforeCreate:function(){localStorage.getItem("userToken")||(this.$swal({type:"error",title:"URL restringida",showConfirmButton:!1,timer:1500}),l["a"].push({name:"login"}))},created:function(){this.getEmployes(),this.getToken(),console.log(this.auth)},methods:{getEmployes:function(){var e=this;n.a.get(d.a.endpointTarget+"/manicuristas").then((function(t){e.employes=t.data}))},getToken:function(){var e=localStorage.userToken,t=v()(e);this.auth=t.access},reportEmploye:function(e){localStorage.setItem("idReportEmploye",e),l["a"].push({path:"/reporteEmpleado"})},proccess:function(){"Registrar"==this.tipeForm?this.registerEmployes():this.updateEmploye()},registerEmployes:function(){var e=this,t=this.registerEmploye.name.replace(/\s*$/,""),a=this.registerEmploye.id.replace(/\s*$/,""),s=this.registerEmploye.timeRestOne+"/"+this.registerEmploye.timeRestTwo;n.a.post(d.a.endpointTarget+"/manicuristas",{nombreManicurista:t,documentoManicurista:a,restTime:s,restDay:this.registerEmploye.dayFree}).then((function(t){"Manicurista ingresada"==t.data.status?(e.modals={modal2:!0,message:"¡Empleado registrado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.initialState(1),e.getEmployes(),u["a"].$emit("reloadLenders","reload")}),1500)):(e.modals={modal2:!0,message:"¡El empleado ya se encuentra registrado!",icon:"ni ni-fat-remove ni-5x",type:"danger"},setTimeout((function(){e.modals={modal2:!1,modal1:!0,message:"",icon:"",type:""}}),1500))}))},updateEmploye:function(){var e=this,t=this.registerEmploye.name.replace(/\s*$/,""),a=this.registerEmploye.id.replace(/\s*$/,""),s=this.registerEmploye.timeRestOne+"/"+this.registerEmploye.timeRestTwo;n.a.put(d.a.endpointTarget+"/manicuristas/"+this.registerEmploye._id,{nombre:t,documento:a,restTime:s,restDay:this.registerEmploye.dayFree,comision:this.registerEmploye.comision}).then((function(t){"Manicurista Editada"==t.data.status?(e.modals={modal2:!0,message:"¡Emplado editado con exito!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){e.initialState(1),e.getEmployes(),u["a"].$emit("reloadLenders","reload")}),2e3)):e.$swal({type:"error",title:"Prestador ya existe",showConfirmButton:!1,timer:1500})}))},deleteEmploye:function(e){var t=this;this.$swal({title:"¿Seguro que desea eliminar?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(a){a.value&&n.a.delete(d.a.endpointTarget+"/manicuristas/"+e).then((function(e){(e.data.status="Prestador borrado")&&(t.modals={modal2:!0,message:"¡Emplado eliminado!",icon:"ni ni-check-bold ni-5x",type:"success"},setTimeout((function(){t.initialState(1),t.getEmployes(),u["a"].$emit("reloadLenders","reload")}),2e3))})).catch((function(e){t.$swal({type:"error",title:"Hubo un problema",showConfirmButton:!1,timer:1500})}))}))},pushData:function(e,t,a,s,o,i){var r=a.split("/");this.registerEmploye={name:e,id:t,timeRestOne:r[0],timeRestTwo:r[1],dayFree:s,_id:o,comision:i}},validFields:function(e){console.log("y entonces?"),"c"==e&&(this.registerUser.correo==this.registerUser.correoConfirm?(this.registerUser.c=!0,console.log("y entonces?")):this.registerUser.c=!1),"p"==e&&(this.registerUser.password==this.registerUser.passwordConfirm?this.registerUser.p=!0:this.registerUser.p=!1)},initialState:function(e){this.registerEmploye={name:"",id:"",timeRestOne:"Seleccione el tiempo",timeRestTwo:"Seleccione el tiempo",dayFree:"Seleccione el día",_id:"",comision:"",valid:!1,valid2:!1},1==e&&(this.modals={modal1:!1,modal2:!1,message:"",icon:"ni ni-check-bold ni-5x",type:"success"}),2==e&&(this.tipeForm="Registrar"),3==e&&(this.tipeForm="Editar")},validRegister:function(){""!=this.registerEmploye.name&&""!=this.registerEmploye.id&&"Seleccione el tiempo"!=this.registerEmploye.timeRestOne&&"Seleccione el tiempo"!=this.registerEmploye.timeRestTwo&&"Seleccione el día"!=this.registerEmploye.dayFree?this.registerEmploye.valid=!0:this.registerEmploye.valid=!1},formatDate:function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+"  ("+t.getHours()+":"+t.getMinutes()+")"},formatPrice:function(e){var t=(e/1).toFixed(2).replace(".",",");return"$ "+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatRut:function(e){for(var t=e.length-2,a="",s=0;s<e.length;s++)a+=e[s],t==s&&(a+=".");var o=a.replace(".","-");return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},validRoute:function(e,t){for(var a=0;a<this.auth.length;a++){var s=this.auth[a];if(s.ruta==e)for(var o=0;o<s.validaciones.length;o++)if(t==s.validaciones[o])return!0}}}},h=f,g=(a("639d"),a("2877")),b=Object(g["a"])(h,s,o,!1,null,null,null);t["default"]=b.exports},e2c2:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7119107d.a03c3d1b.js.map